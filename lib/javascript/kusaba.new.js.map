{"version":3,"sources":["es6/src/kusaba.new.js"],"names":["style_cookie","style_cookie_txt","style_cookie_site","kumod_set","ispage","is_entering","_messages","en","noLocalStorage","oops","blankResponse","watchlistAdd","expandingThread","newThread","NewThread","replyTo","cancel","update","updatingCounts","couldntFetch","noNewPosts","replies","settings_fxEnabled","settings_showReplies","settings_sfwMode","settings_expandImgFull","deletePost","deleteAndBan","enterCaptcha","selectText","dcls","watchOn","captcharot","threadUpdationAutomatically","stopFuckingDolls","del","delandban","ban","stickthread","unstickthread","lockthread","unlockthread","returnDesktop","returnTouch","forceDesktop","okay","captchalang","reply","imageDownscaledBy","videoDownscaledBy","toFit","newReplies","newThreadsAvailable","loading","anonymous","sortBy","bumpOrder","lastReply","creationDate","replyCount","doStick","showHidden","doNotStick","hideHidden","search","threadOnPage","goToThread","smallPics","largePics","legacyMode","threads","comments","active_since","last_active","active_on","tryAgain","xhrError","details","ru","watchlistRemove","odc","_l","locale","hasOwnProperty","trace","console","log","f","arguments","callee","caller","path","re","fname","exec","toString","args","i","length","push","join","Array","prototype","indexOf","elt","len","from","Math","ceil","floor","Utf8","encode","string","replace","c","utftext","n","charCodeAt","String","fromCharCode","decode","c2","c3","Cookie","name","regexp","RegExp","hit","document","cookie","unescape","replaceAll","value","days","expires","date","Date","setTime","getTime","toGMTString","str","to","idx","insert","text","textarea","$","css","find","createTextRange","caretPos","charAt","setSelectionRange","start","selectionStart","end","selectionEnd","substr","focus","markup","$target","istart","iend","element","get","startPos","endPos","selected","substring","bullets","bullet","$area","val","split","newtxt","quote","b","a","v","eval","checkhighlight","match","location","highlight","post","isTouch","removeClass","addClass","get_password","pass","getCookie","chars","rnd","random","togglePassword","passwordbox_html","html","toLowerCase","newhtml","show","toggleOptions","set_cookie","Styles","all","titles","init","_","each","getElementsByTagName","link","getAttribute","_default","hasAttribute","custom","current","customBypass","this_board_dir","in_array","initiated","decide","testingCSS","localStorage","title","addStyle","setStyle","$clink","click","ev","preventDefault","quitTest","parent","slideUp","$cancelLink","append","setCustom","sc","setDefault","change","stylename","removeBypass","addBypass","oldcookie","newcookie","brd","scrollAnchor","save","window","sheet","disabled","restore","onTest","url","m","capitalize","escape","$link","testStyle","popupMessage","$confirm","confirmLongTermTest","bind","$reject","$btns","setItem","removeItem","delandbanlinks","$scope","force","dnbinfo","attr","ku_cgipath","delPost","HiddenThreads","list","getItem","isHidden","threadid","hide","alert","newlist","unhide","slice","concat","togglethread","slideDown","toggleblotter","slideToggle","is","hideblotter","expandthread","board","$thread","expandFrom","expandTo","$omitted","$msg","prependTo","HTMLoader","getThread","err","posts","replaceWith","replyMap","showReplies","getnewposts","scrollToID","$lastQrl","last","lastpost","data","replies_container","$newposts_get","querySelector","Infinity","insertAdjacentHTML","allPosts","querySelectorAll","targetReply","call","bcr","getBoundingClientRect","docHeight","documentElement","clientHeight","bottom","top","postX","scrollTop","spaceAround","height","scrollTo","showLinks","href","ku_boardspath","offset","left","fadeIn","goingExternal","quickreply","externalBoard","preferUnpinned","appearsNew","position","opacity","round","width","getwatchedthreads","ajax","success","error","xhr","status","content","delay","children","after","fadeOut","addtowatchedthreads","removefromwatchedthreads","hidewatchedthreads","showwatchedthreads","reload","Captcha","refresh","injector","inject","captchaTimeout","shownOnce","cColor","offsetWidth","forEach","input","refreshOnce","checkcaptcha","formid","handleSubmit","form","captchafield","id","ffdata","Ajax","submitPost","fd","FormData","xr","XMLHttpRequest","open","action","onload","res","JSON","parse","response","e","error_type","error_verbose","resetForm","noko","checked","thread_replyto","post_id","newpostsResult","send","expandimg","postnum","imgurl","thumburl","imgw","imgh","thumbw","thumbh","getElementById","event","which","Settings","expandImgFull","img","max_w","clientWidth","body","offset_el","offsetLeft","offsetParent","new_w","ratio","zoom","notice","createElement","setAttribute","style","textDecoration","textNode","createTextNode","appendChild","insertBefore","innerHTML","PostPreviews","zindex","cached","_parseURL","matches","_mouseover","stopPropagation","isCatalog","hasClass","parsedURL","parentid","postid","previewid","preview","first","before","mouseleave","_mouseout","mouseover","onMouseOver","parents","transformOrigin","clientY","pageY","clientX","pageX","right","zIndex","cursor","getPost","clearTimeout","fadeout","predelay","pre","setTimeout","remove","_timings","transition","fade","postpreview","set_inputs","em","postpassword","set_delpass","special","load","add","callback","nodeType","tagName","src","complete","readyState","handler","apply","trigger","jQuery","_checkbox","clicked","settingName","defaultValue","removeAttr","fxEnabled","changed","enabled","fx","off","sfwMode","rswap","swap","DocumentTouch","setCaptchaLang","lang","readyset","prepend","LatexIT","checkgotothread","checknamesave","bnrs","cloud20","on","filter","processNodeInsertion","menu_show","mouseenter","toggleClass","target","head","js","OpenLatexEditor","expandwebm","newid","hover","dragsOff","drags","pinnerState","pinner","appendTo","s","textbox","onfocus","onblur","xl","animate","htm","strip","select","unwrap","originalEvent","animationName","countries","toUpperCase","dcxt","performTasks","embedLinks","process","code","site","is_catalog","catalog","trip","getJSON","done","formatDate","fail","cssLink","prop","unreadCounter","$node","prettyprint_mod","render","processEmbeds","tries","tasks","openSettings","closeSettings","addTask","fn","task","updater","ajaxPosting","newThreads","showNewThreads","thread","token","clearfields","lastvisits","timestamp","boardid","stringify","bpageNotify","room","newthread","$label","$form","xsend","tmp","textContent","innerText","container","vidID","ku_youtube_apikey","items","videotitle","snippet","thumbnail","thumbnail_large","thumbnail_url","kumod","mp3playerid","expandmp3","display","swfplayerid","expandswf","w","h","$mov","movieurl","dt","uid","makeid","video","play","promise","pause","possible","checkd","doc","navigatepages","ctrlKey","docloc","keyCode","submit","page","docloc_trimmed","lastIndexOf","docloc_valid","relativepost","maxthreads","getElementsByName","newrelativepost","addEventListener","attachEvent","NodeList","root","msg","repliesContainer","links","linkData","className","linkN","includes","skip","elements","dimensions","mid","innerWidth","innerHeight","elMap","parentBCR","elems","el","relativeVisibleWidth","pos","relativeVisibleHeight","dx","abs","dy","primaryVisibility","secondaryVisibility","primaryOffset","secondaryOffset","sort","anchor","bcrBefore","saved","loaded","requestAnimationFrame","bcrAfter","scrollBy","x","lastTime","vendors","cancelAnimationFrame","currTime","timeToCall","max","menu_current","menu_last","dl","queue","clearQueue","menu_pin","set_oldmenu","mode","implementation","hasFeature","eqn","txt","atxt","extxt","r","g","replaceWithSrc","scope","normalizergb","toFixed","normalizergba","needle","haystack","prettyPrint","next","triggerNativeEvent","eventName","fireEvent","evt","createEvent","initEvent","dispatchEvent","opt","extend","handle","$el","$drag","z_idx","drg_h","outerHeight","drg_w","outerWidth","pos_y","pos_x","pin","scrollLeft","empty","vid","youtube","vimeo","coub","triggerNative","ajaxSubmit","beforeSubmit","responseText","resp","onlycaptcha","randomString","stop","rottencaptcha","rotCaptcha","fields","field","alias","existing","type","styleSheet","cssText","removeChild","result","allboards","query","desc","opts","item","ku_boardsfolder","reduced","bnr","toDisplay","randomItem","getRandomInt","min","array","define","amd","Zepto","t","isDefaultPrevented","closest","clk","offsetX","clk_x","clk_y","offsetY","o","offsetTop","debug","opera","postError","fileapi","files","formdata","attr2","jquery","param","traditional","decodeURIComponent","contentWindow","contentDocument","k","j","p","u","test","skipEncodingOverride","encoding","enctype","timeout","T","D","l","extraData","d","isPlainObject","iframeTarget","aborted","F","M","abort","S","reject","iframeSrc","detachEvent","removeEventListener","dataType","XMLDocument","isXMLDoc","O","responseXML","getResponseHeader","statusText","X","E","y","context","resolve","active","Deferred","ajaxSettings","getAllResponseHeaders","setRequestHeader","execCommand","global","beforeSend","A","L","forceSync","parseXML","ActiveXObject","async","loadXML","DOMParser","parseFromString","nodeName","C","parseJSON","dataFilter","globalEval","trim","veto","beforeSerialize","formToArray","semantic","clearForm","includeHidden","replaceTarget","iframe","closeKeepAlive","contentType","processData","cache","uploadProgress","upload","total","lengthComputable","formData","removeData","ajaxForm","delegation","isFunction","selector","isReady","ajaxFormUnbind","unbind","navigator","userAgent","fieldValue","constructor","required","formSerialize","fieldSerialize","merge","selectedIndex","options","attributes","specified","clearFields","clearInputs","clone","reset","enable","savedOn","savedon","unload","key","sites","rx","fruit","onbeforeunload","conf","layout","respectStickied","expandOnHover","saveConfig","myConf","val_desc","sortBtns","v_d_i","pinBtns","hideBtns","layoutBtns","searchInput","$card","getEmbedThumb","currentTarget","threadID","threadIX","findIndex","model","hidden","classList","rendered","$group","build","gallery","fileTypes","image","iconsAvailable","audio","embed","authorities","short","Dow","dateLocal","dows","getDay","yy","padLeft","getFullYear","mo","getMonth","Mon","mons","dd","getDate","hh","getHours","mm","getMinutes","ss","getSeconds","entry","sortByOrder","sby","repeat","buildEntry","outerHTML","thumbnail_medium","processed","file","smallThumb","file_type","fileTypeClass","bigThumb","smallSrc","expandable","op","repliesLabel","reply_count","last_reply","images","countersCombined","posterauthority","nameDatePriority","tripcode","poster","this_board_defaultName","dateCompact","searchData","stripHTML","subject","message","buildIndicators","layouts","stickied","lock","locked","deathmark","deleted_timestamp","indicatorsCombined","createHTMLDocument","localMod","built","last_ts","parseInt","valstr","$brd","loadThread","boardID","postID","then","$data","parseHTML","metaURL","maintable","Node","postMap","threadMaps","secondTry","cachedPost","found","$post","range","threadMap","reduce"],"mappings":"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","file":"kusaba.new.js","sourcesContent":["'use strict';\r\n\r\nvar style_cookie;\r\nvar style_cookie_txt;\r\nvar style_cookie_site;\r\nvar kumod_set=false;\r\nvar ispage;\r\nvar is_entering=false;\r\n\r\nvar _messages = {\r\n  en: {\r\n    noLocalStorage: \"Your browser does not support LocalStorage\",\r\n    oops: \"Something went wrong...\",\r\n    blankResponse: \"blank response\",\r\n    watchlistAdd: \"Тред добавлен в список избранных.\",\r\n    expandingThread: \"Expanding thread...\",\r\n    newThread: \"new thread\",\r\n    NewThread: \"New thread\",\r\n    replyTo: \"reply to\",\r\n    cancel: \"Cancel\",\r\n    update: \"Update\", \r\n    updatingCounts: \"Updating...\",\r\n    couldntFetch: \"Cold not fetch this post\",\r\n    noNewPosts: \"No new posts\",\r\n    replies: \"Replies\",\r\n    settings_fxEnabled: \"Animation effects\",\r\n    settings_showReplies: \"Show replies inside posts\",\r\n    settings_sfwMode: \"NSFW mode\",\r\n    settings_expandImgFull: \"Expand images to full size\",\r\n    deletePost: \"Delete post\", \r\n    deleteAndBan: \"Delete post and ban poster\",\r\n    enterCaptcha: \"Please enter captcha.\",\r\n    selectText: \"Select some text\",\r\n    dcls: \"Double click to show source\",\r\n    watchOn: \"Watch on\",\r\n    captcharot: \"Captcha has rotted\",\r\n    threadUpdationAutomatically: \"Tread is being updated automatically.\",\r\n    stopFuckingDolls: \"<b>Отключите AJAX-отправку постов и AJAX-обновление треда.</b><br />(Кликните, чтобы закрыть)\",\r\n    del: \"Delete\",\r\n    delandban: \"Delete and ban\",\r\n    ban: \"Ban\",\r\n    stickthread: \"Stick thread\",\r\n    unstickthread: \"Unstick thread\",\r\n    lockthread: \"Lock thread\",\r\n    unlockthread: \"Unlock thread\",\r\n    returnDesktop: \"Switch to desktop interface\",\r\n    returnTouch: \"Switch to touch interface\",\r\n    forceDesktop: \"Force Desktop interface\",\r\n    okay: \"Okay\",\r\n    captchalang: \"Captcha language\",\r\n    reply: \"Reply\",\r\n    imageDownscaledBy: \"Image was downscaled by\",\r\n    videoDownscaledBy: \"Video was downscaled by\",\r\n    toFit: \"to feet screen\",\r\n    newReplies: \"New replies\",\r\n    newThreadsAvailable: \"New threads available.\",\r\n    loading: \"Loading\",\r\n    anonymous: \"Anonymous\",\r\n    sortBy: \"Sort by\",\r\n    bumpOrder: \"Bump order\",\r\n    lastReply: \"Last reply\",\r\n    creationDate: \"Creation date\",\r\n    replyCount: \"Reply count\",\r\n    doStick: \"Respect stickied\",\r\n    showHidden: \"Show hidden\",\r\n    doNotStick: \"Ignore stickied\",\r\n    hideHidden: \"Hide hidden\",\r\n    search: \"Search\",\r\n    threadOnPage: \"Thread is on page\",\r\n    goToThread: \"Go to thread\",\r\n    smallPics: \"Small pictures\",\r\n    largePics: \"Large pictures\",\r\n    legacyMode: \"Legacy mode\",\r\n    threads: \"Threads\",\r\n    comments: \"Replies\",\r\n    active_since: \"Active since\",\r\n    last_active: \"Last seen\",\r\n    active_on: \"Active on\",\r\n    tryAgain: \"Try again\",\r\n    xhrError: \"XHR error\",\r\n    details: \"details\"\r\n  },\r\n  ru: {\r\n    noLocalStorage: \"localStorage не поддерживается браузером\",\r\n    oops: \"Что-то пошло не так...\",\r\n    blankResponse: \"пустой ответ\",\r\n    watchlistAdd: \"Тред добавлен в список избранных.\",\r\n    watchlistRemove: \"Тред удален из списка избранных.\",\r\n    expandingThread: \"Разворачиваем тред...\",\r\n    newThread: \"новый тред\",\r\n    NewThread: \"Создать тред\",\r\n    replyTo: \"ответ на\",\r\n    cancel: \"Отмена\",\r\n    update: \"Обновить\", \r\n    updatingCounts: \"Ищем новые посты...\",\r\n    couldntFetch: \"Не удалось загрузить этот пост\",\r\n    noNewPosts: \"Нет новых постов\",\r\n    replies: \"Ответы\",\r\n    settings_fxEnabled: \"Анимированные эффекты\",\r\n    settings_showReplies: \"Показывать ответы внутри поста\",\r\n    settings_sfwMode: \"Мамка в комнате\",\r\n    settings_expandImgFull: \"Разворачивать картинки до исходного размера\",\r\n    deletePost: \"Удалить пост\", \r\n    deleteAndBan: \"Удалить пост и забанить постера\",\r\n    enterCaptcha: \"Пожалуйста, введите капчу.\",\r\n    selectText: \"Текст не выделен\",\r\n    dcls: \"Double click to show source\",\r\n    watchOn: \"Смотреть на\",\r\n    odc: \"javascript:LatexIT.replaceWithSrc(this);\",  \r\n    captcharot: \"Капча протухла\",\r\n    threadUpdationAutomatically: \"Тред обновляется автоматически\",\r\n    stopFuckingDolls: \"<b>Отключите AJAX-отправку постов и AJAX-обновление треда.</b><br />(Кликните, чтобы закрыть)\",\r\n    del: \"Удалить\",\r\n    delandban: \"Удалить и забанить\",\r\n    ban: \"Забанить\",\r\n    stickthread: \"Прикрепить тред\",\r\n    unstickthread: \"Отлепить тред\",\r\n    lockthread: \"Закрыть тред\",\r\n    unlockthread: \"Открыть тред\",\r\n    returnDesktop: \"Переключиться на десктопный интерфейс\",\r\n    returnTouch: \"Переключиться на тач-интерфейс\",\r\n    forceDesktop: \"Force Desktop interface\",\r\n    okay: \"Ясно\",\r\n    captchalang: \"Язык капчи\",\r\n    reply: \"Ответить\",\r\n    imageDownscaledBy: \"Картинка ужата на\",\r\n    videoDownscaledBy: \"Видео ужато на\",\r\n    toFit: \"по размеру окна\",\r\n    newReplies: \"Новых ответов\",\r\n    newThreadsAvailable: \"Доступны новые треды.\",\r\n    loading: \"Загружаем\",\r\n    anonymous: \"Аноним\",\r\n    sortBy: \"Сортировать по\",\r\n    bumpOrder: \"бампам\",\r\n    lastReply: \"дате ответов\",\r\n    creationDate: \"дате создания\",\r\n    replyCount: \"числу ответов\",\r\n    doStick: \"Прикреплять\",\r\n    showHidden: \"Показывать скрытые\",\r\n    doNotStick: \"Не прикреплять\",\r\n    hideHidden: \"Скрывать скрытые\",\r\n    search: \"Поиск\",\r\n    threadOnPage: \"Тред располагается на странице\",\r\n    goToThread: \"Перейти в тред\",\r\n    smallPics: \"Мелкие картинки\",\r\n    largePics: \"Большие картинки\",\r\n    legacyMode: \"Олдфажный режим\",\r\n    threads: \"Тредов\",\r\n    comments: \"Ответов\",\r\n    active_since: \"Присоединился\",\r\n    last_active: \"Был активен\",\r\n    active_on: \"Активен на\",\r\n    tryAgain: \"Попробовать снова\",\r\n    xhrError: \"Ошибка XHR\",\r\n    details: \"подробности\"\r\n  }\r\n}\r\n\r\nvar _l = (typeof locale !== 'undefined' && _messages.hasOwnProperty(locale)) ? _messages[locale] : _messages.ru;\r\n\r\nfunction trace() {\r\n  if (!console.log) return;\r\n  \r\n  var f = arguments.callee.caller;\r\n  var path = arguments[0];\r\n  if (path == '') path += \"trace()\";\r\n  \r\n  while (f != null) {\r\n    var re = /function ([^\\(]+)/;\r\n    var fname = re.exec(f.toString());\r\n    if (fname == null) fname = ''; else fname = fname[1];\r\n    var args = [];\r\n    for (var i = 0; i < f.arguments.length; i++) args.push(f.arguments[i]);\r\n    fname += \"(\" + args.join(', ') + \")\"; \r\n    path += ' <- ' + fname;\r\n    f = f.caller;\r\n  }\r\n  console.log(path);\r\n}\r\n\r\n/* IE/Opera fix, because they need to go learn a book on how to use indexOf with arrays */\r\nif (!Array.prototype.indexOf) {\r\n  Array.prototype.indexOf = function(elt /*, from*/) {\r\n  var len = this.length;\r\n\r\n  var from = Number(arguments[1]) || 0;\r\n  from = (from < 0)\r\n     ? Math.ceil(from)\r\n     : Math.floor(from);\r\n  if (from < 0)\r\n    from += len;\r\n\r\n  for (; from < len; from++) {\r\n    if (from in this &&\r\n      this[from] === elt)\r\n    return from;\r\n  }\r\n  return -1;\r\n  };\r\n}\r\n  \r\n/* Utf8 strings de-/encoder */\r\nvar Utf8 = {\r\n  // public method for url encoding\r\n  encode : function (string) {\r\n    string = string.replace(/\\r\\n/g,\"\\n\");\r\n    var utftext = \"\";\r\n    for (var n = 0; n < string.length; n++) {\r\n      var c = string.charCodeAt(n);\r\n      if (c < 128) {\r\n        utftext += String.fromCharCode(c);\r\n      }\r\n      else if((c > 127) && (c < 2048)) {\r\n        utftext += String.fromCharCode((c >> 6) | 192);\r\n        utftext += String.fromCharCode((c & 63) | 128);\r\n      }\r\n      else {\r\n        utftext += String.fromCharCode((c >> 12) | 224);\r\n        utftext += String.fromCharCode(((c >> 6) & 63) | 128);\r\n        utftext += String.fromCharCode((c & 63) | 128);\r\n      }\r\n    }\r\n    return utftext;\r\n  },\r\n  // public method for url decoding\r\n  decode : function (utftext) {\r\n    var string = \"\", i = 0, c = 0, c1 = 0, c2 = 0, c3 = 0\r\n    while ( i < utftext.length ) {\r\n      c = utftext.charCodeAt(i);\r\n      if (c < 128) {\r\n        string += String.fromCharCode(c);\r\n        i++;\r\n      }\r\n      else if((c > 191) && (c < 224)) {\r\n        c2 = utftext.charCodeAt(i+1);\r\n        string += String.fromCharCode(((c & 31) << 6) | (c2 & 63));\r\n        i += 2;\r\n      }\r\n      else {\r\n        c2 = utftext.charCodeAt(i+1);\r\n        c3 = utftext.charCodeAt(i+2);\r\n        string += String.fromCharCode(((c & 15) << 12) | ((c2 & 63) << 6) | (c3 & 63));\r\n        i += 3;\r\n      }\r\n    }\r\n    return string;\r\n  }\r\n}\r\n\r\nfunction Cookie(name) {\r\n  if (arguments.length == 1) {\r\n    // with(document.cookie) {\r\n      var regexp=new RegExp(\"(^|;\\\\s+)\"+name+\"=(.*?)(;|$)\");\r\n      var hit=regexp.exec(document.cookie);\r\n      if(hit&&hit.length>2) return Utf8.decode(unescape(replaceAll(hit[2],'+','%20')));\r\n      else return '';\r\n    // }\r\n  } else {\r\n    var value = arguments[1]\r\n    , days = arguments[2]\r\n    , expires=\"\"\r\n    if(days) {\r\n      var date=new Date();\r\n      date.setTime(date.getTime()+(days*24*60*60*1000));\r\n      expires=\"; expires=\"+date.toGMTString();\r\n    }\r\n    document.cookie=name+\"=\"+value+expires+\"; path=/\";\r\n  }\r\n}\r\n   \r\n\r\nfunction replaceAll(str, from, to) {\r\n  var idx = str.indexOf( from );\r\n  while ( idx > -1 ) {\r\n    str = str.replace( from, to );\r\n    idx = str.indexOf( from );\r\n  }\r\n  return str;\r\n}\r\n\r\n\r\nfunction insert(text) {\r\n  var textarea = (($('#postclone').length && $('#postclone').css('display') !== 'none') ? $('#postclone') : $('#postform')).find('textarea')[0];\r\n  if(textarea) {\r\n    if(textarea.createTextRange && textarea.caretPos) { // IE \r\n      var caretPos=textarea.caretPos;\r\n      caretPos.text=caretPos.text.charAt(caretPos.text.length-1)==\" \"?text+\" \":text;\r\n    } else if(textarea.setSelectionRange) { // Firefox \r\n      var start=textarea.selectionStart;\r\n      var end=textarea.selectionEnd;\r\n      textarea.value=textarea.value.substr(0,start)+text+textarea.value.substr(end);\r\n      textarea.setSelectionRange(start+text.length,start+text.length);\r\n    } else {\r\n      textarea.value+=text+\" \";\r\n    }\r\n    textarea.focus();\r\n  }\r\n  if($('#postclone').css('display') !== 'none') return false;\r\n}\r\n\r\nfunction markup($target, start, end, istart, iend) {\r\n  let element = $target.find('textarea').get(0);\r\n  if (element.selectionStart || element.selectionStart == '0') {\r\n    element.focus();\r\n    let startPos = element.selectionStart\r\n    , endPos = element.selectionEnd\r\n    , selected = element.value.substring(startPos, endPos);\r\n    if(selected.indexOf('\\n') === (-1) && typeof istart !== \"undefined\" && typeof iend !== \"undefined\") {\r\n      start = istart; end = iend;\r\n    }\r\n    element.value = element.value.substring(0, startPos) + start + element.value.substring(startPos, endPos) + end + element.value.substring(endPos, element.value.length);\r\n  } else {\r\n    element.value += start + end;\r\n  }\r\n}\r\n\r\nfunction bullets($target, bullet, istart, iend) {\r\n  let $area = $target.find('textarea')\r\n  , element = $area.get(0)\r\n  , startPos = element.selectionStart\r\n  , endPos = element.selectionEnd\r\n  , selected = $area.val().substring(startPos, endPos)\r\n  if(selected.indexOf('\\n') === (-1) && typeof istart !== \"undefined\" && typeof iend !== \"undefined\") {\r\n    element.value = element.value.substring(0, startPos) + istart + element.value.substring(startPos, endPos) + iend + element.value.substring(endPos, element.value.length);\r\n  }\r\n  else {\r\n    selected = $area.val().substring(startPos, endPos).split('\\n');\r\n    var newtxt = \"\";\r\n    for(var i=0; i<selected.length; i++) {\r\n      newtxt += (bullet + selected[i]);\r\n      if(i < (selected.length - 1)) newtxt += '\\n';\r\n    }\r\n    $area.val(\r\n      $area.val().substring(0, startPos) \r\n      + newtxt + \r\n      $area.val().substring(endPos)\r\n    );  \r\n  }\r\n} \r\n  \r\nfunction quote(b, a) { \r\n  var v = eval(\"document.\" + a + \".message\");\r\n  v.value += \">>\" + b + \"\\n\";\r\n  v.focus();\r\n}\r\n\r\nfunction checkhighlight() {\r\n  var match;\r\n  if(match=/#i([0-9]+)/.exec(document.location.toString()))\r\n    if(!$('#postform textarea').val())\r\n      insert(\">>\"+match[1]);\r\n  if(match=/#([0-9]+)/.exec(document.location.toString()))\r\n    highlight(match[1]);\r\n}\r\n\r\nfunction highlight(post, checknopage) {\r\n  if (isTouch)  return;\r\n  $('.highlight').removeClass('highlight').addClass('reply');\r\n  $(\"#reply\" + post).removeClass('reply').addClass('highlight');\r\n  var match = /^([^#]*)/.exec(document.location.toString());\r\n  document.location = match[1] + \"#\" + post;\r\n}    \r\n  \r\nfunction get_password(name) {\r\n  var pass = getCookie(name);\r\n  if(pass) return pass;\r\n\r\n  var chars=\"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789\";\r\n  pass='';\r\n\r\n  for(var i=0;i<8;i++) {\r\n    var rnd = Math.floor(Math.random()*chars.length);\r\n    pass += chars.substring(rnd, rnd+1);\r\n  }\r\n  Cookie(name, pass, 365);\r\n  return(pass);\r\n}\r\n\r\nfunction togglePassword() {\r\n  var passwordbox_html = $(\"#passwordbox\").html().toLowerCase();\r\n  var newhtml = '<td></td><td></td>';\r\n  if (passwordbox_html == newhtml) {\r\n    newhtml = '<td class=\"postblock\">Mod</td><td><input type=\"text\" name=\"modpassword\" size=\"28\" maxlength=\"75\">&nbsp;<acronym title=\"Display staff status (Mod/Admin)\">D</acronym>:&nbsp;<input type=\"checkbox\" name=\"displaystaffstatus\" checked>&nbsp;<acronym title=\"Lock\">L</acronym>:&nbsp;<input type=\"checkbox\" name=\"lockonpost\">&nbsp;&nbsp;<acronym title=\"Sticky\">S</acronym>:&nbsp;<input type=\"checkbox\" name=\"stickyonpost\">&nbsp;&nbsp;<acronym title=\"Raw HTML\">RH</acronym>:&nbsp;<input type=\"checkbox\" name=\"rawhtml\">&nbsp;&nbsp;<acronym title=\"Name\">N</acronym>:&nbsp;<input type=\"checkbox\" name=\"usestaffname\"></td>';\r\n  }\r\n  $(\"#passwordbox\").html(newhtml).show();\r\n  return false;\r\n}\r\n\r\n/* used for textboards only, deleted, src in clean */\r\nfunction toggleOptions(D,C,B){ trace('deprecated!') }\r\n\r\n// proxied functions\r\nfunction getCookie(name)                {   return Cookie(name)                     }  \r\nfunction set_cookie(name,value,days)    {   return Cookie(name,value,days)          }       \r\n\r\nvar Styles = {\r\n  all: [], titles: [],\r\n  init: function() {\r\n    _.each(document.getElementsByTagName(\"link\"), function(link) {\r\n      if(link.getAttribute(\"rel\").indexOf(\"style\")!=-1 && link.getAttribute(\"title\")) {\r\n        this.all.push(link);\r\n        this.titles.push(link.getAttribute(\"title\"));\r\n        if(link.getAttribute(\"rel\").indexOf(\"alternate\")===-1) {\r\n          this._default = link.getAttribute(\"title\");\r\n        }\r\n        if(link.hasAttribute(\"data-custom\")) {\r\n          this.custom = link.getAttribute(\"title\");\r\n        }\r\n      }\r\n    }, this);\r\n    this.current = this._default;\r\n    var customBypass = getCookie('bypasscustom');\r\n    this.customBypass = (customBypass.length && typeof this_board_dir !== 'undefined' && in_array(this_board_dir, customBypass.split('|'))) ? true : false;\r\n    this.initiated = true\r\n  },\r\n  decide: function() {\r\n    this.init();\r\n    var testingCSS = localStorage['testing-css'] || null\r\n    if(testingCSS) {\r\n      var title = this.addStyle(testingCSS)\r\n      this.setStyle(title)\r\n      var $clink = $('<a href=\"#\">Отключить тестирование '+title+'.css</a>')\r\n      $clink.click(function(ev) {\r\n        ev.preventDefault()\r\n        Styles.quitTest()\r\n        $(this).parent().slideUp()\r\n      })\r\n      this.$cancelLink = $('<div style=\"font-weight: bold\"></div>').append($clink)\r\n      return\r\n    }     \r\n    if(this.hasOwnProperty('custom') && !this.customBypass) \r\n      return this.setCustom();\r\n    var sc = getCookie(style_cookie);\r\n    if(sc && in_array(sc, this.titles))\r\n      this.setStyle(sc);\r\n    else {\r\n      this.setDefault();\r\n      set_cookie(\"kustyle_site\",this._default,365);\r\n      set_cookie(\"kustyle\",this._default,365); \r\n    }\r\n  },\r\n  change: function(stylename) {\r\n    if(!in_array(stylename, this.titles) || this.current === stylename) return;\r\n    this.setStyle(stylename);\r\n    if(this.hasOwnProperty('custom') && this.custom === stylename) {\r\n      this.removeBypass();\r\n    }\r\n    else {\r\n      if(this.hasOwnProperty('custom'))\r\n        this.addBypass();\r\n      set_cookie(\"kustyle_site\",stylename,365);\r\n      set_cookie(\"kustyle\",stylename,365);    \r\n    }\r\n  },\r\n  removeBypass: function() {\r\n    if(!this.customBypass || typeof this_board_dir === 'undefined') return;\r\n    this.customBypass = false;\r\n    var oldcookie = getCookie('bypasscustom').split('|'), newcookie = [];\r\n    _.each(oldcookie, function(brd) {\r\n      if(brd !== this_board_dir) newcookie.push(brd);\r\n    });\r\n    newcookie = newcookie.length ? newcookie.join('|') : '';\r\n    set_cookie(\"bypasscustom\",newcookie,365);\r\n  },\r\n  addBypass: function() {\r\n    if(this.customBypass || typeof this_board_dir === 'undefined') return;\r\n    this.customBypass = true;\r\n    var cookie = getCookie('bypasscustom').split('|');\r\n    if(!in_array(this_board_dir, cookie)) {\r\n      cookie.push(this_board_dir);\r\n      set_cookie(\"bypasscustom\",cookie.join('|'),365);\r\n    }\r\n  },\r\n  setDefault: function() {\r\n    if(this.hasOwnProperty('_default') && this.current !== this._default)\r\n      this.setStyle(this._default);\r\n  },\r\n  setCustom: function() {\r\n    if(this.hasOwnProperty('custom'))\r\n      this.setStyle(this.custom);\r\n  },\r\n  setStyle: function(stylename) {\r\n    if(!in_array(stylename, this.titles)) return;\r\n    if (scrollAnchor && scrollAnchor.save)\r\n      scrollAnchor.save('setstyle', '.postnode', window, 'v');\r\n    _.each(this.all, function(sheet) {\r\n      sheet.disabled=true;    // Hello IE\r\n      if(sheet.getAttribute(\"title\") === stylename)\r\n        sheet.disabled=false;\r\n    });\r\n    if (scrollAnchor && scrollAnchor.restore)\r\n      scrollAnchor.restore('setstyle');\r\n    this.current = stylename;\r\n  },\r\n  onTest: null,\r\n  addStyle: function(url) {\r\n    var m = /(?:.+\\/)?(.+)\\.css/i.exec(url);\r\n    if(!m) return;\r\n    var title = _.capitalize(_.escape(m[1]))\r\n    if(!in_array(title, this.titles)) {\r\n      var $link = $('<link rel=\"stylesheet\" type=\"text/css\" href=\"'+url+'\" title=\"'+title+'\" disabled>')\r\n      $('head').append($link);\r\n      this.titles.push(title)\r\n      this.all.push($link[0])\r\n    }\r\n    return title\r\n  },\r\n  testStyle: function(url) {\r\n    this.onTest = url\r\n    var title = this.addStyle(url)\r\n    this.setStyle(title)\r\n    popupMessage('Установлен стиль '+title+'.', 'none');\r\n    var $confirm = $('<button>OK</button>').click(this.confirmLongTermTest.bind(this))\r\n    , $reject = $('<button>'+_l.cancel+'</button>').click(this.quitTest.bind(this))\r\n    , $btns = $('<div class=\"pmsg-form\"></div>').append($confirm, $reject)\r\n    $('#popupMessage').append($btns)\r\n  },\r\n  confirmLongTermTest: function() {\r\n    if(this.onTest)\r\n      localStorage.setItem('testing-css', this.onTest)\r\n  },\r\n  quitTest: function() {\r\n    localStorage.removeItem('testing-css')\r\n    this.decide()\r\n  }\r\n}\r\n\r\nif(style_cookie) Styles.decide();\r\n\r\nfunction delandbanlinks($scope, force) {\r\n  if(typeof force === 'undefined') force = false;\r\n  if ((!kumod_set && !force) || typeof $scope === 'undefined') return;\r\n  $scope.find('span[id^=dnb]').each(function(index,element) {\r\n    let dnbinfo = $(this).attr('id').split('-')\r\n    , newhtml = '&nbsp;<span class=\"btngroup\">' + '<a href=\"' + ku_cgipath + '/manage_page.php?action=delposts&boarddir=' + dnbinfo[1] + '&del';\r\n    if (dnbinfo[3] == 'y') {newhtml += 'thread';} else {newhtml += 'post';}\r\n    newhtml += 'id=' + dnbinfo[2] + '\" title=\"'+_l.del+'\" onclick=\"return confirm(\\''+_l.delPost+'?\\');\"><svg class=\"icon b-icon sb-l\"><use xlink:href=\"#i-x\"></use></svg><\\/a>';\r\n    newhtml += '<a href=\"' + ku_cgipath + '/manage_page.php?action=delposts&boarddir=' + dnbinfo[1] + '&del';if (dnbinfo[3] == 'y') {newhtml += 'thread';} else {newhtml += 'post';}\r\n    newhtml +='id=' + dnbinfo[2] + '&postid=' + dnbinfo[2] + '\" title=\"'+_l.delandban+'\" onclick=\"return confirm(\\''+_l.delPost+'?\\');\"><svg class=\"icon b-icon sb-c\"><use xlink:href=\"#i-and\"></use></svg><\\/a>';\r\n    newhtml +='<a href=\"' + ku_cgipath + '/manage_page.php?action=bans&banboard=' + dnbinfo[1] + '&banpost=' + dnbinfo[2] + '\" title=\"'+_l.ban+'\"><svg class=\"icon b-icon sb-r\"><use xlink:href=\"#i-ban\"></use></svg><\\/a></span>&nbsp;';\r\n\r\n    if (dnbinfo[3] == 'y') {\r\n      newhtml += '<span class=\"btngroup\"><a href=\"' + ku_cgipath + '/manage_page.php?action=stickypost&board=' + dnbinfo[1] + '&postid=' + dnbinfo[2] + '\" title=\"'+_l.stickthread+'\" ><svg class=\"icon b-icon sb-l\"><use xlink:href=\"#i-pin\"></use></svg><\\/a><a href=\"' + ku_cgipath + '/manage_page.php?action=unstickypost&board=' + dnbinfo[1] + '&postid=' + dnbinfo[2] + '\" title=\"'+_l.unstickthread+'\" ><svg class=\"icon b-icon sb-r\"><use xlink:href=\"#i-unpin\"></use></svg><\\/a></span>&nbsp;';\r\n      newhtml += '<span class=\"btngroup\"><a href=\"' + ku_cgipath + '/manage_page.php?action=lockpost&board=' + dnbinfo[1] + '&postid=' + dnbinfo[2] + '\" title=\"'+_l.lockthread+'\" ><svg class=\"icon b-icon sb-l\"><use xlink:href=\"#i-lock\"></use></svg><\\/a><a href=\"' + ku_cgipath + '/manage_page.php?action=unlockpost&board=' + dnbinfo[1] + '&postid=' + dnbinfo[2] + '\" title=\"'+_l.unlockthread+'\" ><svg class=\"icon b-icon sb-r\"><use xlink:href=\"#i-unlock\"></use></svg><\\/a></span>';\r\n    }\r\n\r\n    $(this).html(newhtml);\r\n  });\r\n}\r\n\r\nvar HiddenThreads = {\r\n  list: function() {\r\n    if (localStorage == null) {\r\n      trace(_l.noLocalStorage);\r\n      return [];\r\n    }\r\n    var list = localStorage.getItem('hiddenThreads.' + this_board_dir);\r\n    if (list == null) return [];\r\n    return list.split(',');\r\n  },\r\n  isHidden: function(threadid) { return HiddenThreads.list().indexOf(threadid) != -1 },\r\n  hide: function(threadid) { \r\n    if (localStorage == null) alert(_l.noLocalStorage);\r\n    else {\r\n      var newlist = HiddenThreads.list();\r\n      newlist.push(threadid.toString());\r\n      localStorage.setItem('hiddenThreads.' + this_board_dir, newlist.join(','));\r\n    }\r\n  },\r\n  unhide: function(threadid) { \r\n    if (localStorage == null) alert(_l.noLocalStorage);\r\n    else {\r\n      var list = HiddenThreads.list();\r\n      var i = list.indexOf(threadid.toString());\r\n      if (i == -1) return;\r\n      var newlist = list.slice(0,i);\r\n      newlist = newlist.concat(list.slice(i+1));\r\n      localStorage.setItem('hiddenThreads.' + this_board_dir, newlist.join(','));\r\n    }\r\n  }\r\n}\r\n  \r\nfunction togglethread(threadid) {\r\n  if (HiddenThreads.isHidden(threadid)) {\r\n    $('#unhidethread' + threadid + this_board_dir).slideUp();\r\n    $('#thread' + threadid + this_board_dir).slideDown();\r\n    HiddenThreads.unhide(threadid);\r\n  } else {\r\n    $('#unhidethread' + threadid + this_board_dir).slideDown();\r\n    $('#thread' + threadid + this_board_dir).slideUp();\r\n    HiddenThreads.hide(threadid);\r\n  }\r\n  return false;\r\n}\r\n  \r\nfunction toggleblotter() {\r\n  $('.blotter-entries').each(function(index,element) {\r\n    $(this).slideToggle(function() {\r\n      if($(this).is(\":hidden\")) {\r\n        Cookie('ku_showblotter', '0', 365);\r\n      } else {\r\n        Cookie('ku_showblotter', '1', 365);\r\n      }\r\n    });\r\n  });\r\n}\r\n\r\nfunction hideblotter() {\r\n   $('.blotter-entries').each(function(index,element) {\r\n    $(this).hide();\r\n  });\r\n}\r\n\r\nfunction expandthread(threadid, board, ev) {\r\n  ev.preventDefault()\r\n  let $thread = $(`#thread${threadid}${board}`)\r\n  if ($thread.length) {\r\n    let expandFrom = + $thread.find('.postnode.op').find('input[type=checkbox]').val()\r\n    , expandTo = + $thread.find('.postnode:not(.op):first').find('input[type=checkbox]').val()\r\n    , $omitted = $thread.find('.omittedposts')\r\n    $omitted.find('a').hide()\r\n    let $msg = $omitted.find('span')\r\n    if (!$msg.length) {\r\n      $msg = $(`<span></span>`).prependTo($omitted)\r\n    }\r\n    $msg.text(`${_l.loading}...`)\r\n    HTMLoader.getThread(board, +threadid, [expandFrom, expandTo], (err, posts) => {\r\n      if (posts) {\r\n        $thread.find('.omittedposts').replaceWith(posts)\r\n        replyMap.showReplies()\r\n      }\r\n      else {\r\n        $msg.text(_l.oops + (err !== false ? ` (${err})` : ''))\r\n        $omitted.find('a').text(_l.tryAgain).show()\r\n      }\r\n    })\r\n  }\r\n  return false;\r\n}   \r\n\r\nfunction getnewposts(threadid=null, scrollToID=null) {\r\n  if(threadid===null) {\r\n    if (ispage) return 'error';\r\n    threadid = $('input[name=replythread]').val()\r\n  }\r\n  let $lastQrl = $(`.qrl[data-parent=\"${threadid}\"]`).last()\r\n  , lastpost = $lastQrl.data('postnum') || $lastQrl.data('parent')\r\n  if (! lastpost) return 'error';\r\n  let replies_container, $newposts_get, $msg\r\n  if (!ispage) {\r\n    $newposts_get = $('#newposts_get')\r\n    $newposts_get.find('a').hide()\r\n    $msg = $newposts_get.find('span')\r\n    if (!$msg.length) {\r\n      $msg = $(`<span></span>`).prependTo($newposts_get)\r\n    }\r\n    $msg.text(`${_l.loading}...`).show()\r\n    replies_container = document.querySelector('.replies')\r\n  }\r\n  else {\r\n    replies_container = document.querySelector(`#thread${threadid}${this_board_dir} .replies`)\r\n    if (!replies_container) return 'error';\r\n  }\r\n  HTMLoader.getThread(this_board_dir, +threadid, [+lastpost,Infinity], (err, posts) => {\r\n    if (!ispage) {\r\n      $msg.hide()\r\n      $newposts_get.find('a').show()\r\n    }\r\n    if (posts) {\r\n      replies_container.insertAdjacentHTML('beforeend', posts)\r\n\r\n      if (scrollToID) {\r\n        let allPosts = replies_container.querySelectorAll('.reply')\r\n        , targetReply = scrollToID=='last' \r\n          ? allPosts[allPosts.length-1] \r\n          : Array.prototype.find.call(allPosts, post => post.querySelector(`a[name=\"${scrollToID}\"]`))\r\n        if (! targetReply)\r\n          return 'error';\r\n        let bcr = targetReply.getBoundingClientRect()\r\n        , docHeight = document.documentElement.clientHeight\r\n        if (bcr.bottom > docHeight || bcr.top < 0) {\r\n          let postX = bcr.top + document.documentElement.scrollTop\r\n          , spaceAround = docHeight - bcr.height\r\n          window.scrollTo(0, postX - (spaceAround ? Math.ceil(spaceAround/2) : 0))\r\n        }\r\n      }\r\n\r\n      replyMap.showReplies()\r\n    }\r\n    else {\r\n      popupMessage(posts === '' ? _l.noNewPosts : _l.oops + (err !== false ? ` (${err})` : ''))\r\n    }\r\n  }, false, true)\r\n  return false;\r\n}\r\n\r\nfunction showLinks(ev) {\r\n  var href = $(this).attr('href');\r\n  $('#directLink').val(ku_boardspath+href);\r\n  $('#quoteLink').val('>>'+href.split('/res/')[0]+'/'+href.split('#')[1]);\r\n  $('#viewlink').css({\r\n    top: $(this).offset().top + $(this).height(),\r\n    left: $(this).offset().left\r\n  }).fadeIn('fast');\r\n  return false;\r\n}  \r\nif(localStorage['pinPreference'] === 'pinned')\r\n  localStorage['pinForm'] = 0;\r\nif(localStorage['pinPreference'] === 'unpinned')\r\n  localStorage['pinForm'] = 1;\r\nlocalStorage.removeItem('pinPreference');\r\n\r\nvar goingExternal = false;\r\nfunction quickreply(ev) {\r\n  var externalBoard = $(this).data('boardname');\r\n  if(externalBoard === this_board_dir) externalBoard = false;\r\n  var parent = $(this).data('parent'), current = $(this).data('postnum') || parent;\r\n  var preferUnpinned = !!+localStorage['pinForm'];\r\n  var appearsNew = ($('#postclone').css('display') === 'none');\r\n  $('#postclone').show();\r\n  if(isTouch) {\r\n    $('#postclone').css({\r\n      bottom: '0px',\r\n      left: '0px',\r\n      position: 'fixed',\r\n      opacity: 1\r\n    });\r\n  }\r\n  else {\r\n    if(preferUnpinned) {\r\n      $('#postclone').css({\r\n        top: $(this).offset().top + $(this).height(),\r\n        left: Math.round(($(window).width() / 2) - ($('#postclone').width() / 2)),\r\n        position: 'absolute'\r\n      });\r\n    }\r\n    else if(appearsNew) {\r\n      $('#postclone').css({\r\n        top: $(this).offset().top + $(this).height() - $(document).scrollTop(),\r\n        left: Math.round(($(window).width() / 2) - ($('#postclone').width() / 2)),\r\n        position: 'fixed'\r\n      });\r\n    }\r\n  }\r\n  $('#postclone input[name=\"replythread\"]').val(parent);\r\n  if(externalBoard) {\r\n    $('#postclone input[name=\"board\"]').val(externalBoard);\r\n    $('#postclone .posttypeindicator').html('<a href=\"'+ku_boardspath+'/'+externalBoard+'/res/'+parent+'.html?i#'+current+'\"> &gt;&gt;/'+externalBoard+'/'+parent+'</a>');\r\n  }\r\n  else {\r\n    $('#postclone .posttypeindicator').html('<a class=\"xlink\" href=\"#'+current+'\"> &gt;&gt;'+parent+'</a>');\r\n  }\r\n  insert('>>'+current+'\\n');\r\n  return false;\r\n} \r\n  \r\nfunction getwatchedthreads(threadid, board) {\r\n  if ($('#watchedthreadlist').get()!='') {\r\n    $('#watchedthreadlist').html(_l.loading + '...');\r\n    $.ajax({\r\n      url: ku_boardspath + '/threadwatch.php?board=' + board + '&threadid=' + threadid,\r\n      success: function(data) {\r\n        $('#watchedthreadlist').html(data || (_l.oops + \" (\"+_l.blankResponse+\")\"));\r\n      },\r\n      error: function(xhr, status) {\r\n        $('#watchedthreadlist').html(_l.oops + \" (\" + status + \")\");\r\n      }\r\n    });\r\n  }\r\n}  \r\n\r\nfunction popupMessage(content, delay) {\r\n  if (delay == null) delay = 1000\r\n  if ($('#popupMessage').get() == '') {\r\n    $('body').children().last().after('<div id=\"popupMessage\" class=\"reply postername\"></div>');\r\n    $('#popupMessage').hide()\r\n  }\r\n  $('#popupMessage').html(content).fadeIn(150)\r\n  if(delay !== 'none')\r\n    $('#popupMessage').delay(delay).fadeOut(300)\r\n  else\r\n    $('#popupMessage').click(function() {\r\n      $(this).fadeOut(300)\r\n    })\r\n}\r\n\r\nfunction addtowatchedthreads(threadid, board) {\r\n  if ($('#watchedthreadlist').get()!='') {\r\n    $.ajax({\r\n      url: ku_boardspath + '/threadwatch.php?do=addthread&board=' + board + '&threadid=' + threadid,\r\n      success: function(data) {\r\n        popupMessage(_l.watchlistAdd)\r\n        getwatchedthreads('0', board);\r\n      },\r\n      error: function(xhr, status) {\r\n        popupMessage(_l.oops + \" (\" + status + \")\");\r\n      }\r\n    });\r\n  }\r\n}\r\n  \r\nfunction removefromwatchedthreads(threadid, board) {\r\n  if ($('#watchedthreadlist').get()!='') {\r\n    $.ajax({\r\n      url: ku_boardspath + '/threadwatch.php?do=removethread&board=' + board + '&threadid=' + threadid,\r\n      success: function(data) {\r\n        popupMessage(_l.watchlistRemove)\r\n        getwatchedthreads('0', board);\r\n      },\r\n      error: function(xhr, status) {\r\n        popupMessage(_l.oops + \" (\" + status + \")\");\r\n      }\r\n    });\r\n  }\r\n}\r\n  \r\nfunction hidewatchedthreads() {\r\n  Cookie('showwatchedthreads','0',30);\r\n  $(\"#watchedthreads\").fadeOut();\r\n}    \r\n  \r\nfunction showwatchedthreads() {\r\n  Cookie('showwatchedthreads','1',30);\r\n  window.location.reload(true);\r\n}\r\n\r\nvar Captcha = {\r\n  init: function() {\r\n    $('.captchawrap').click(this.refresh.bind(this))\r\n    injector.inject('captcha-rotting',\r\n`.cw-running .rotting-indicator {\r\n  -webkit-animation-duration: ${captchaTimeout}s;\r\n       -o-animation-duration: ${captchaTimeout}s;\r\n          animation-duration: ${captchaTimeout}s;\r\n}\r\n.cw-running .captchaimage, \r\n.cw-running .rotten-msg {\r\n  -webkit-animation-delay: ${captchaTimeout}s;\r\n       -o-animation-delay: ${captchaTimeout}s;\r\n          animation-delay: ${captchaTimeout}s;}`)\r\n  },\r\n  refresh: function() {\r\n    if (!$('.captchawrap').length) return;\r\n    this.shownOnce = true\r\n    let cColor = $('.captchawrap').css('color').match(/([0-9]+(?:\\.[0-9]+)?)/g)\r\n    cColor = (cColor.length >= 3) ? '&color='+cColor.slice(0, 3).join(',') : ''\r\n    $('.captchaimage').attr('src', ku_boardspath+'/captcha.php?'+Math.random()+cColor)\r\n    $('.captchawrap')\r\n    .removeClass('cw-initial cw-running')\r\n    .each(function() {void this.offsetWidth}) //trigger a reflow\r\n    .addClass('cw-running')\r\n    Array.prototype.forEach.call(document.querySelectorAll('input[name=\"captcha\"]'), input => input.value = null)\r\n  },\r\n  refreshOnce: function() {\r\n    if (!this.shownOnce) {\r\n      this.refresh()\r\n    }\r\n    return false\r\n  },\r\n  shownOnce: false\r\n}\r\n\r\nfunction checkcaptcha(formid) {\r\n  if($('input[name=captcha]').length > 0) {\r\n    if($('#'+formid+' input[name=captcha]').val() =='') {\r\n      popupMessage(_l.enterCaptcha);\r\n      return false;\r\n    }\r\n    if(+$('.rotten-msg').css('opacity') > 0) {\r\n      popupMessage(_l.captcharot);\r\n      return false;\r\n    }\r\n  }\r\n  return true;\r\n}\r\n\r\nfunction handleSubmit(form) {\r\n  let captchafield = form.querySelector('input[name=captcha]')\r\n  if (captchafield && !captchafield.value.length)\r\n    return popupMessage(_l.enterCaptcha)\r\n  if (form.id === 'postclone') \r\n    ffdata.save()\r\n  Ajax.submitPost(form)\r\n}\r\n\r\nconst Ajax = {\r\n  submitPost: function(form) {\r\n    let fd = new FormData(form)\r\n    , xr = new XMLHttpRequest()\r\n    fd.append('AJAX', 1)\r\n    xr.open('POST', form.action)\r\n    xr.onload = e => {\r\n      if (xr.status !== 200) {\r\n        popupMessage(_l.xhrError)\r\n        return\r\n      }\r\n      Captcha.refresh()\r\n      let res = null\r\n      try {\r\n        res = JSON.parse(xr.response)\r\n      }\r\n      catch(e) {\r\n        popupMessage(_l.xhrError)\r\n        console.error('Malformed response (JSON expected):', xr.response)\r\n        return\r\n      }\r\n      if (res.error) {\r\n        if (res.error_type) {\r\n          if (res.error_type == 'ban') {\r\n            popupMessage(`${res.error} (<a href=\"${ku_cgipath}/banned.php\" target=\"_blank\">${_l.details}</a>)`, 'none')\r\n          }\r\n          if (res.error_type == 'duplicate_file') {\r\n            popupMessage(`${res.error}<br>${res.error_verbose}`, 'none')\r\n            form.querySelector('input[name=\"imagefile\"]').value = null\r\n          }\r\n        }\r\n        else {\r\n          popupMessage(res.error)\r\n        }\r\n        return\r\n      }\r\n      else {\r\n        resetForm(form)\r\n        if (form.id == \"postclone\") {\r\n          $(form).hide()\r\n        }\r\n        let noko = form.querySelector('input[name=\"redirecttothread\"]').checked\r\n        if (res.thread_replyto != 0) {\r\n          if (ispage) {\r\n            let newpostsResult = getnewposts(res.thread_replyto, +res.post_id)\r\n            if (newpostsResult == 'error') {\r\n              document.location.href = `${ku_boardspath}/${res.board}/res/${res.thread_replyto}.html`\r\n            }\r\n          }\r\n          else {\r\n            getnewposts(null, +res.post_id)\r\n          }\r\n        }\r\n        else {\r\n          if (noko) {\r\n            document.location.href = `${ku_boardspath}/${res.board}/res/${res.post_id}.html`\r\n          }\r\n          else {\r\n            document.location.href = `${ku_boardspath}/${res.board}`\r\n          }\r\n        }\r\n      }\r\n    }\r\n    xr.send(fd)\r\n  }\r\n}\r\n  \r\nfunction expandimg(postnum, imgurl, thumburl, imgw, imgh, thumbw, thumbh) {\r\n  \r\n  var element = document.getElementById(\"thumb\" + postnum);\r\n  if (element == null) return false;\r\n  if(typeof event !== 'undefined' && event.which === 2) return true;\r\n  if (element.getElementsByTagName('img')[0].getAttribute('alt').substring(0,4)!='full') {\r\n    $(element).html('<img src=\"'+imgurl+'\" alt=\"full'+postnum+'\" class=\"thumb\" height=\"'+imgh+'\" width=\"'+imgw+'\">'); \r\n    if (Settings.expandImgFull()) return false;    \r\n    var element = document.getElementById(\"thumb\" + postnum);\r\n    var img = element.getElementsByTagName('img')[0];\r\n    var max_w = document.documentElement?document.documentElement.clientWidth : document.body.clientWidth;\r\n    var offset = 50;\r\n    var offset_el = img;\r\n\r\n    while (offset_el != null) {\r\n        offset += offset_el.offsetLeft;\r\n        offset_el = offset_el.offsetParent;\r\n    }\r\n    var new_w = max_w - offset;\r\n    if (img.width > new_w) {\r\n        var ratio = img.width / img.height;\r\n        var zoom = 1 - new_w / img.width;\r\n        var new_h = new_w / ratio;\r\n        var notice = document.createElement('div');\r\n        notice.setAttribute('class', 'filesize');\r\n        notice.style.textDecoration = 'underline'; \r\n        var textNode = document.createTextNode(_l.imageDownscaledBy + \" \" + Math.round(zoom*100) + \"% \"+_l.toFit);\r\n        notice.appendChild(textNode);  \r\n        element.insertBefore(notice, img);\r\n        $(img).width(new_w);\r\n        $(img).height(new_h);\r\n\r\n    }     \r\n  } \r\n  else\r\n    element.innerHTML = '<img src=\"' + thumburl + '\" alt=\"' + postnum + '\" class=\"thumb\" height=\"' + thumbh + '\" width=\"' + thumbw + '\">';\r\n  \r\n  return false;\r\n}\r\n\r\n// YOBA previews w/#snivystuff\r\nvar PostPreviews = {\r\n  zindex:  3,\r\n  cached: {},\r\n  parent: {},\r\n\r\n  _parseURL: function(url) {\r\n    let matches = url.match(/\\/(.+)\\/res\\/([0-9]+)\\.html#([0-9]+)|postbynumber\\.php\\?b=(.+)&p=([0-9]+)/i)\r\n    if (!matches) return null;\r\n    return {\r\n      board: matches[1] || matches[4],\r\n      parent: matches[2] || '?',\r\n      post: matches[3] || matches[5],\r\n    }\r\n  },\r\n\r\n  _mouseover: function(e) {\r\n    e.stopPropagation();\r\n    var href = this.getAttribute(\"href\")\r\n    , isCatalog = $(this).hasClass('catalog-entry')\r\n    , parsedURL = PostPreviews._parseURL(href)\r\n    if (!parsedURL) return false;\r\n    let board = parsedURL['board']\r\n    , parentid = parsedURL['parent']\r\n    , postid = parsedURL['post']\r\n    , previewid = 'preview_'+board+'_'+postid\r\n    , preview = $('#' + previewid)\r\n    if (preview.length == 0) {\r\n      $('body').children().first().before('<div id=\"'+previewid+'\"></div>');\r\n      preview = $('#' + previewid);\r\n      preview.addClass('reflinkpreview content-background pre-hidden actual-reflinkpreview');     \r\n      preview.mouseleave(PostPreviews._mouseout);\r\n      preview.mouseover(PostPreviews.onMouseOver);\r\n    }\r\n    var parent = $(this).parents('div[id^=preview]');\r\n    if (parent.length > 0) {\r\n      if (previewid == parent.attr('id')) return; // anti-recursion\r\n      for (var id in PostPreviews.parent) { if (id == previewid || PostPreviews.parent[id] == previewid) return }\r\n      PostPreviews.parent[previewid] = parent.attr('id');\r\n    } \r\n    else {\r\n      PostPreviews.parent = [];\r\n    }\r\n    let transformOrigin;\r\n    if(e.clientY < ($(window).height() / 1.5)) { \r\n      preview.css({top:e.pageY+5}); \r\n      transformOrigin = \"top \"\r\n    } else {\r\n      preview.css({bottom:$(window).height()-e.pageY+5}); \r\n      transformOrigin = \"bottom \"\r\n    }\r\n    if(e.clientX < ($(window).width() / 1.5)) {\r\n      preview.css({left:e.pageX+15}); \r\n      transformOrigin += \"left\"\r\n    } else {\r\n      preview.css({right:$(window).width()-e.pageX+15}); \r\n      transformOrigin += \"right\"\r\n    }\r\n    preview.css({zIndex: PostPreviews.zindex++, \"transform-origin\": transformOrigin});\r\n    this.style.cursor = \"progress\"\r\n    HTMLoader.getPost(board, parentid, postid, (err, post) => {\r\n      preview.html(post ? post : (_l.oops + (err !== false ? ` (${err})` : '')))\r\n      .removeClass('pre-hidden')\r\n      this.style.cursor = \"pointer\"\r\n    })\r\n    e.preventDefault();\r\n  },\r\n\r\n  onMouseOver: function() {\r\n    var preview = $(this);\r\n    if ($(this).is('a')) {\r\n      let parsedURL = PostPreviews._parseURL(this.getAttribute(\"href\"))\r\n      if (!parsedURL) return;\r\n      let board = parsedURL['board']\r\n      , postid = parsedURL['post']\r\n      preview = $('#preview_'+board+\"_\"+postid).first();\r\n    }\r\n    while (preview.length > 0) {\r\n      clearTimeout(preview[0].fadeout)\r\n      preview = $('#' + PostPreviews.parent[preview.attr('id')]);\r\n    }\r\n  },\r\n\r\n  _mouseout: function() {\r\n    var preview = $(this);\r\n    if ($(this).is('a')) {\r\n      if (this.predelay) {\r\n        clearTimeout(this.predelay)\r\n      }\r\n      let parsedURL = PostPreviews._parseURL(this.getAttribute(\"href\"))\r\n      if (!parsedURL) return;\r\n      let board = parsedURL['board']\r\n      , postid = parsedURL['post']\r\n      preview = $('#preview_'+board+\"_\"+postid).first();\r\n    }\r\n    while (preview.length > 0) {\r\n      clearTimeout(preview[0].fadeout)\r\n      let pre = preview\r\n      preview[0].fadeout = setTimeout(() => {\r\n        pre.addClass('pre-hidden')\r\n        setTimeout(() => {\r\n          delete PostPreviews.parent[pre.attr('id')];\r\n          pre.remove();\r\n        }, PostPreviews._timings.transition)\r\n      }, PostPreviews._timings.fade)\r\n      preview = $('#' + PostPreviews.parent[preview.attr('id')]);   \r\n    }\r\n  },\r\n\r\n  _timings: {\r\n    predelay: 50,\r\n    transition: 200,\r\n    fade: 400\r\n  }\r\n}\r\n\r\n/* txt only. deleted. src in clean */\r\nfunction postpreview(D,A,C,B){}\r\n  \r\nfunction set_inputs(id) {\r\n  let form = document.getElementById(id)\r\n  if (form) {\r\n    let name = form.querySelector('input[name=name]')\r\n    if(name && !name.value) name.value = getCookie(\"name\");\r\n    if(!form.em.value) form.em.value = getCookie(\"email\");\r\n    if(!form.postpassword.value) form.postpassword.value = get_password(\"postpassword\");\r\n  }\r\n}\r\n  \r\nfunction set_delpass(id) {\r\n  let postpassword = document.getElementById(id).postpassword\r\n  if (postpassword && !postpassword.value) {\r\n    postpassword.value = get_password(\"postpassword\");\r\n  }\r\n}   \r\n\r\n(function ($) {\r\n  $.event.special.load = {\r\n    add: function (callback) {\r\n      if ( this.nodeType === 1 && this.tagName.toLowerCase() === 'img' && this.src !== '' ) {\r\n        if ( this.complete || this.readyState === 4 ) {\r\n          callback.handler.apply(this);\r\n        }\r\n        else if ( this.readyState === 'uninitialized' && this.src.indexOf('data:') === 0 ) {\r\n          $(this).trigger('error');\r\n        }\r\n\r\n        else {\r\n          $(this).bind('load', callback.handler);\r\n        }\r\n      }\r\n    }\r\n  };\r\n}(jQuery));\r\n\r\nvar Settings = {\r\n  _checkbox: function(clicked, settingName, defaultValue) {\r\n    if (localStorage == null) {\r\n      trace(_l.noLocalStorage);\r\n      return;\r\n    }\r\n    if (localStorage[settingName] == null) {\r\n      localStorage[settingName] = defaultValue;\r\n    }\r\n    if (clicked == true) {\r\n      // save it\r\n      localStorage[settingName] = $('#settings_' + settingName).is(\":checked\");\r\n    } else {\r\n      // update checkbox (called on load)\r\n      if (localStorage[settingName] == 'true')\r\n        $('#settings_' + settingName).attr(\"checked\",\"checked\");\r\n      else \r\n        $('#settings_' + settingName).removeAttr(\"checked\");\r\n    }\r\n    return (localStorage[settingName] == 'true') || (localStorage[settingName] == true) ;\r\n  },\r\n  \r\n  fxEnabled: function(changed) { \r\n    var enabled = Settings._checkbox(changed, 'fxEnabled', true);\r\n    if (changed != null) {\r\n      $.fx.off = !enabled;\r\n    }\r\n    return enabled;\r\n  },\r\n  \r\n  showReplies: function(changed) {\r\n    var enabled = Settings._checkbox(changed, 'showReplies', false);\r\n    if (changed != null) {\r\n      scrollAnchor.save('replymap', '.postnode', window, 'v')\r\n      if (enabled) {\r\n        replyMap.showReplies()\r\n        injector.remove('hide-replies')\r\n      }\r\n      else {\r\n        injector.inject('hide-replies', '.replieslist {display: none}')\r\n      }\r\n      scrollAnchor.restore('replymap')\r\n    }\r\n    return enabled;\r\n  },\r\n  \r\n  sfwMode: function(changed) {\r\n    var enabled = Settings._checkbox(changed, 'sfwMode', false);\r\n    if (enabled) {\r\n      injector.inject('sfwMode', '.thumb { opacity: 0.05;} .thumb:hover { opacity: 1;}');\r\n    }\r\n    else {\r\n      injector.remove('sfwMode');\r\n    }\r\n    return enabled;\r\n  },\r\n  \r\n  expandImgFull: function(changed) {\r\n    return Settings._checkbox(changed, 'expandImgFull', false);\r\n  }\r\n}\r\n\r\nvar rswap = {\r\n  i: true,\r\n  swap: function() {\r\n    if(this.i) $('#delform').before($('#rswapper')).after($('.postarea'));\r\n    else $('#delform').before($('.postarea')).after($('#rswapper'));\r\n    this.i = !this.i;\r\n  }\r\n}\r\n\r\nvar isTouch = (('ontouchstart' in window) || window.DocumentTouch && document instanceof DocumentTouch) || false;\r\nif(localStorage['interfaceType'] == 'desktop')\r\n  isTouch = false;\r\nif(localStorage['interfaceType'] == 'touch')\r\n  isTouch = true;\r\n\r\nvar captchalang = getCookie('captchalang') || 'ru';\r\nfunction setCaptchaLang(lang) {\r\n  if(!in_array(lang, ['ru', 'en', 'num'])) return;\r\n  captchalang = lang;\r\n  set_cookie('captchalang', lang, 365);\r\n}\r\n\r\nfunction readyset() {\r\n  if(!ispage) $('.mgoback').show();\r\n  if(isTouch)\r\n    $('#js_settings').prepend('<a href=\"javascript: localStorage.setItem(\\'interfaceType\\', \\'desktop\\'); location.reload();\">'+_l.returnDesktop+'</a><br>');\r\n  else\r\n    $('#js_settings').prepend('<a href=\"javascript: localStorage.setItem(\\'interfaceType\\', \\'touch\\'); location.reload();\">'+_l.returnTouch+'</a><br>');\r\n\r\n  $('#js_settings').prepend(_l.captchalang+': <a href=\"javascript:setCaptchaLang(\\'ru\\');\">Cyrillic</a> | <a href=\"javascript:setCaptchaLang(\\'en\\');\">Latin</a> | <a href=\"javascript:setCaptchaLang(\\'num\\');\">Numeral</a><br />');\r\n\r\n  if(Styles.$cancelLink)\r\n    $('#js_settings').prepend(Styles.$cancelLink)\r\n  \r\n  LatexIT.init();\r\n  checkhighlight();\r\n  checkgotothread();\r\n  checknamesave();\r\n\r\n  bnrs.init();\r\n\r\n  cloud20.init();\r\n  $('#boardselect').on('input', function() {\r\n    cloud20.filter($(this).val());\r\n  });\r\n\r\n  if(getCookie('ku_menutype')) {\r\n    var c = Cookie('ku_menutype');\r\n    if(c != 'default' && c != '')\r\n      document.getElementById('overlay_menu').style.position = c;\r\n  }\r\n\r\n  //initial post-process\r\n  processNodeInsertion();\r\n\r\n  if(!isTouch) {\r\n    $('.mobile-nav').hide();\r\n    $('.sect-exr').mouseenter(function() { menu_show('ms-'+$(this).data('toexpand')); });\r\n    $('#overlay_menu').mouseleave(function() { menu_show('_off_'); });\r\n    $('body').on('mouseenter', \"a[class^='ref']\", function(ev) {\r\n      this.predelay = setTimeout(() => PostPreviews._mouseover.bind(this)(ev), PostPreviews._timings.predelay)\r\n    });\r\n    $('body').on('mouseleave', \"a[class^='ref']\", PostPreviews._mouseout);\r\n  }\r\n  else {\r\n    $('body').addClass('touch-mode');\r\n    $('.sect-exr:not([data-toexpand=\"_options\"])').parent().hide();\r\n    $('.sect-exr').click(function() {\r\n      if($('#js_settings').is(':visible')) {\r\n        menu_show('_off_');\r\n      }\r\n      else {\r\n        menu_show('ms-_options');\r\n      }\r\n      return false;\r\n    });\r\n    $('body').click(function(event) {\r\n      menu_show('_off_'); \r\n      $('[id^=preview]').remove();\r\n    });\r\n    $('.mobile-nav').show();\r\n    $('body').on('click', \"a[class^='ref']\", PostPreviews._mouseover);       \r\n  \r\n    injector.inject('mb', 'body {margin-bottom: 350px;}')\r\n  }\r\n\r\n  // new markup\r\n  $('body').on('click', '.uib-mup', function() {\r\n    markup($(this).parents('form'), $(this).data('mups'), $(this).data('mupe'), $(this).data('imups'), $(this).data('imupe'));\r\n    return false;\r\n  });\r\n  $('.opt-exp').click(function() {\r\n    $(this).find('.expandee').toggleClass('expanded');\r\n  })\r\n  .mouseleave(function() {\r\n    $(this).find('.expandee').removeClass('expanded');\r\n  });\r\n  $('.code_markup_select').change(function() {\r\n    markup($(this).parents('form'), '[code='+$(this).val()+']', '[/code]');\r\n  })\r\n  $('body').on('click', '.uib-bul', function() {\r\n    bullets($(this).parents('form'), $(this).data('bul'), $(this).data('imups'), $(this).data('imupe'));\r\n    return false;\r\n  });\r\n  $('body').on('click', '.uib-tx', function() {\r\n    var target = $(this).data('target');\r\n    head.js('http://latex.codecogs.com/editor3.js', function() {\r\n      OpenLatexEditor(target,'phpBB','en-us', false, '','full');\r\n    });\r\n    return false;\r\n  });\r\n  //Webm expanding\r\n  $('body').on('click', '.movie', function(event) {expandwebm($(this), event)});\r\n  //new quick reply\r\n  $('body').on('click', '.qrl', quickreply);\r\n  $('#postclone label').each(function() {\r\n    var newid = $(this).attr('for')+'_clone';\r\n    $(this).attr('for', newid);\r\n    $(this).find('input').attr('id', newid);\r\n  });\r\n  $('#postform textarea').attr('id', 'top-textarea'); $('#postform .uib-tx').data('target', 'top-textarea');\r\n  $('#postclone textarea').attr('id', 'pop-textarea'); $('#postclone .uib-tx').data('target', 'pop-textarea');\r\n  if(!isTouch) {\r\n    $('input, textarea, select, label').hover(function() {\r\n      $('#postclone').dragsOff();\r\n    }, function() {\r\n      $('#postclone').drags();\r\n    });\r\n    var pinnerState = !!+localStorage['pinForm'] ? 'pinned' : 'unpinned';\r\n    var pinner = '<a href=\"#\" class=\"pinner '+pinnerState+'\" onclick=\"javascript:$(\\'#postclone\\').pin();return false;\" title=\"Прикрепить / Открепить\"><svg class=\"icon b-icon\"><use class=\"use-pin\" xlink:href=\"#i-pin\"></use><use class=\"use-unpin\" xlink:href=\"#i-unpin\"></use></svg></a>';\r\n  }\r\n  else {\r\n    var pinner = '';\r\n  }\r\n\r\n  /* not losing floating form data */\r\n  ffdata.load();\r\n\r\n  $('<span class=\"extrabtns postboxcontrol\">'+ pinner +\r\n  '&nbsp;<a href=\"#\" onclick=\"javascript:$(\\'#postclone\\').hide();return false;\" title=\"Закрыть\"><svg class=\"icon b-icon\"><use xlink:href=\"#i-x\"></use></svg></a>'+\r\n  '</span>').appendTo('#postclone');\r\n\r\n  //Dollscript rape begins\r\n  //Switch captcha language   \r\n  /*dcxt.addTask(function() {\r\n    dcxt.openSettings();\r\n    //Switch to \"form\" tab\r\n    $('.de-cfg-tab[info=form]')[0].click();\r\n    //Switch language if it's set wrong\r\n    if(captchalang == 'ru' && $('select[info=captchaLang] option:selected').val() !== $('select[info=captchaLang] option:contains(Rus)').val()) {\r\n      $('select[info=captchaLang]').val($('select[info=captchaLang] option:contains(Rus)').val()).triggerNative('change'); \r\n    }\r\n    if(captchalang == 'en' && $('select[info=captchaLang] option:selected').val() !== $('select[info=captchaLang] option:contains(Eng)').val()) {\r\n      $('select[info=captchaLang]').val($('select[info=captchaLang] option:contains(Eng)').val()).triggerNative('change'); \r\n    }\r\n    dcxt.closeSettings();\r\n  });*/\r\n\r\n  /*if(liveupd_ena && typeof io !== 'undefined') {\r\n    // Remove malfunctioning post counter\r\n    injector.inject('dcxt-nocount', '.de-ppanel-cnt:after {display: none}');\r\n    $(\"#postform, #postclone\").each(function() { $(this).append($('<input type=\"hidden\" name=\"token\">').val(randomString())) } );\r\n    $('#postform input[type=\"submit\"]').after('<img class=\"sending-loading\" src=\"'+ku_boardspath+'/images/loading.gif\">')\r\n    var socket = io.connect(liveupd_api);\r\n    if(ispage) {\r\n      var subscribeTo = [liveupd_sitename+this_board_dir+':newthreads'];\r\n      $('.op .reflink').children(':last-child').each(function() { \r\n        subscribeTo.push(liveupd_sitename+this_board_dir+':'+$(this).text());\r\n      });\r\n      socket.on('update', updater.bpageNotify)\r\n      .emit('subscribe', subscribeTo);\r\n    }\r\n    else {\r\n      dcxt.addTask(function() {\r\n        dcxt.openSettings();\r\n        $('.de-cfg-tab[info=form]')[0].click();\r\n        //Detect if AJAX posting enabled.\r\n        if(+$('select[info=ajaxReply]').val()) {\r\n          updater.ajaxPosting = true;\r\n        }\r\n        //Switch to \"posts\" tab\r\n        $('.de-cfg-tab[info=posts]')[0].click();\r\n        //Turn off AJAX thread update\r\n        if($('input[info=ajaxUpdThr]:checked').length) {\r\n          $('input[info=ajaxUpdThr]:checked')[0].click();\r\n          dcxt.changed++;\r\n        }\r\n        dcxt.closeSettings();\r\n      });\r\n      _l.noNewPosts += (\"<br>\" + _l.threadUpdationAutomatically);\r\n      socket.emit('subscribe', liveupd_sitename+$('input[name=board]').val()+':'+$('input[name=replythread]').val());\r\n      socket.on('update', function(data) {\r\n        updater.update(data);\r\n      });\r\n      $('body').on('submit', '#postform, #postclone', function(e) {\r\n        e.preventDefault();\r\n        if (!dcxt.enabled || checkcaptcha($(this).attr('id')))\r\n        updater.send($(this));\r\n      });\r\n    }\r\n  }*/\r\n\r\n  $('body').on('submit', '#postform, #postclone', function(e) {\r\n    e.preventDefault()\r\n    handleSubmit(this)\r\n  });\r\n\r\n  $('#delform').after('<div id=\"rswapper\">[<a onclick=\"javascript:rswap.swap();return false;\" href=\"#\">'+(ispage ? _l.NewThread : _l.reply)+'</a>]<hr /></div>');\r\n\r\n\r\n  /*dcxt.addTask(function() {\r\n    $('#rswapper').remove();\r\n  })*/\r\n\r\n  Settings.sfwMode(false);\r\n  if (localStorage) {\r\n    for(var s in Settings) {\r\n      if (s.substring(0,1) == \"_\") continue;\r\n      $(\"#js_settings\").append('<label><input type=\"checkbox\" onchange=\"javascript:Settings.'+s+'(true)\" name=\"settings_'+s+'\" id=\"settings_'+s+'\" value=\"true\"> '+_l['settings_'+s]+'</label><br />');\r\n      Settings[s](false);\r\n    }\r\n  } else {\r\n    $(\"#js_settings\").append(\"<span style=\\\"color:#F00\\\">\"+_l.noLocalStorage+\"</span><br />Твой браузер — говно. Скачай <a href=\\\"/web/20110329072959/http://google.com/chrome\\\" target=\\\"_blank\\\">Chome</a>, например.\");\r\n  }\r\n\r\n  var textbox = document.getElementById('message');\r\n  if(textbox)\r\n  {\r\n    textbox.onfocus=function(){is_entering = true;}\r\n    textbox.onblur=function(){is_entering = false;}\r\n  }\r\n\r\n  $('body').on('click', '.posttypeindicator a', function() {\r\n    var xl = $(this); \r\n    var offset = $('[name=\"' + xl.attr('href').substr(1) + '\"]').offset() || $('[name=\"' + xl.text().split('>>')[1] + '\"]').offset() || false;\r\n    if(offset) {\r\n      $('html, body').animate({\r\n        scrollTop: offset.top - ( $('#overlay_menu').height() + 10 )\r\n      }, 250);\r\n    }\r\n    return false;\r\n  });\r\n\r\n  $('body').on('click', '.dice', function() {\r\n    if(typeof $(this).data('html') === 'undefined') $(this).data('html', $(this).html());\r\n    var htm = strip($(this).html());\r\n    $(this).html($(this).attr('title'));\r\n    $(this).attr('title', htm);\r\n  });\r\n\r\n  //Permalinks and stuff\r\n  $('<div id=\"viewlink\"></div>').addClass('content-background reflinkpreview qreplyform').html(\r\n    '<a style=\"float:left;\" href=\"#\" onclick=\"javascript:$(\\'#viewlink\\').hide();return false;\"><svg style=\"margin-left:0\" class=\"icon b-icon\"><use xlink:href=\"#i-x\"></use></svg></a>'+\r\n    '<div style=\"display:inline-block\"><input type=\"text\" id=\"directLink\"><br /><input type=\"text\" id=\"quoteLink\"></div>'\r\n  ).hide().appendTo('body');\r\n  $('body').on('click', '.shl', showLinks);\r\n  $('#directLink, #quoteLink').on(\"click\", function() { $(this).select(); });\r\n\r\n  //Ultimate YOBA Youtube embeds\r\n  $('body').on('click','.embed', function() {$(this).unwrap() });\r\n  //detect node insertions and process them\r\n  $(document).on('animationstart webkitAnimationStart MSAnimationStart oanimationstart', function(event) {\r\n    var $target = $(event.target);\r\n    if (event.originalEvent.animationName == \"nodeInserted\" && !$target.hasClass('_inserted_')) processNodeInsertion($target);\r\n  });\r\n  $('body').on('mouseenter', '._country_', function() {\r\n    if(typeof $(this).attr('title') === \"undefined\") {\r\n      $(this).attr('title', countries[$(this).attr('src').split('flags/')[1].split('.png')[0].toUpperCase()]);\r\n    }\r\n  });\r\n  dcxt.performTasks();\r\n  $('body').on('click', '.audiowrap', function(ev) {\r\n    ev.preventDefault();\r\n    var src = $(this).attr('href');\r\n    $(this).replaceWith('<audio src=\"'+src+'\" controls autoplay=\"true\"></audio>')\r\n  })\r\n\r\n  $('input[name=embed]').on('input', function() {\r\n    var match = embedLinks.process($(this).val());\r\n    if(match) {\r\n      $(this).val(match.code)\r\n      .parents('.postform').find('[name=embedtype]').val(match.site);\r\n    }\r\n  });\r\n  if(typeof is_catalog !== 'undefined' && is_catalog) catalog.init();\r\n\r\n  $('.userdelete').addClass('content-background reflinkpreview');\r\n  $('body').on('change', 'input[name=\"post[]\"]', function() {\r\n    if (!$('.userdelete').hasClass('ud-active'))\r\n      $('.userdelete').addClass('ud-active');\r\n    else if (!($('input[name=\"post[]\"]').is(\":checked\")))\r\n      $('.userdelete').removeClass('ud-active');\r\n  })\r\n\r\n  $('<div id=\"tripinfo\"></div>').addClass('content-background reflinkpreview qreplyform').hide().appendTo('body');\r\n\r\n  $('#delform').on('click', '.postertrip', function(ev) {\r\n    ev.preventDefault()\r\n    var trip = $(this).text().split('!')[1]\r\n    , offset = $(this).offset(), height = $(this).height()\r\n    $.getJSON('/tripinfo.php', { trip: trip })\r\n    .done(function(data) {\r\n      var active_on = [];\r\n      _.each(data.active_on, function(board) {\r\n        active_on.push('<a target=\"_blank\" href=\"'+ku_boardspath+'/'+board+'/\">'+'/'+board+'/</a>');\r\n      })\r\n      $('#tripinfo')\r\n      .html(\r\n        '<div><b class=\"postertrip\">!'+trip+'</b> ['+'<a href=\"https://www.google.com/search?q=!'+trip+'\" target=\"_blank\">G</a>]</div>'+\r\n        '<a style=\"float:left;\" href=\"#\" onclick=\"javascript:$(\\'#tripinfo\\').hide();return false;\"><svg style=\"position: absolute; top: 3px; right: 3px;\" class=\"icon b-icon\"><use xlink:href=\"#i-x\"></use></svg></a>'+\r\n        '<div class=\"trip-info-line\">'+_l.threads+': '+data.threads+', '+_l.comments+': '+data.comments+'</div>'+\r\n        '<div class=\"trip-info-line\">'+_l.active_since+': '+catalog.formatDate(data.active_since, true)+'</div>'+\r\n        '<div class=\"trip-info-line\">'+_l.last_active+': '+catalog.formatDate(data.last_active, true)+'</div>'+\r\n        (active_on.length ? '<div class=\"trip-info-line\">'+_l.active_on+': '+active_on.join(', ')+'</div>' : '')\r\n      )\r\n      .css({\r\n         top: offset.top + height,\r\n         left: offset.left\r\n       })\r\n      .fadeIn('fast');\r\n    })\r\n    .fail(function(error) {\r\n      console.error(error)\r\n    })\r\n  })\r\n  $('body').on('click', '.csswrap', function(ev) {\r\n    ev.preventDefault()\r\n    var cssLink = $(this).attr('href')\r\n    Styles.testStyle(cssLink)\r\n  })\r\n\r\n  $('input[name=disable_name]').on('change', function() {\r\n    var off = $(this).is(':checked')\r\n    $(this).parents('form').find('input[name=name]').attr('disabled', off)\r\n    localStorage.setItem('post_anonymously', +off)\r\n  })\r\n  .prop('checked', !!+localStorage['post_anonymously']).trigger('change')\r\n\r\n  unreadCounter.update()\r\n\r\n  Captcha.init()\r\n}\r\n\r\n// this will be applied to every new inserted node (post)\r\nfunction processNodeInsertion($node) {\r\n  if(typeof $node === 'undefined') $node = $('*');\r\n  else {\r\n    $node.addClass('_inserted_');\r\n    $node = $node.parents(\":eq(1)\");\r\n  }\r\n  if($node.find('.prettyprint').length) prettyprint_mod(null, $node[0]);\r\n  LatexIT.render($node);\r\n  processEmbeds($node);\r\n  delandbanlinks($node);\r\n}\r\n\r\nvar dcxt = {\r\n  tries: 10,\r\n  enabled: false,\r\n  tasks: [],\r\n  changed: 0,\r\n  openSettings: function() {\r\n    if($('#de-content-cfg').length) return;\r\n    injector.inject('dcxt-hide', '#de-content-cfg {opacity: 0!important}');\r\n    $('#de-btn-settings')[0].click();\r\n  },\r\n  closeSettings: function() {\r\n    if(!$('#de-content-cfg').length) return;\r\n    $('#de-btn-settings')[0].click();\r\n    injector.remove('dcxt-hide');\r\n  },\r\n  addTask: function(fn) {\r\n    if(this.enabled) fn();\r\n    else this.tasks.push(fn);\r\n  },\r\n  performTasks: function() {\r\n    if(!this.enabled && $('#de-btn-settings').length) {\r\n      this.enabled = true;\r\n      $('#gotothread').prop('checked', true);\r\n      _.each(this.tasks, function(task) {\r\n        task();\r\n      });\r\n      this.tasks = [];\r\n      if(this.changed) location.reload();\r\n    }\r\n    else if(this.tries) {\r\n      setTimeout(function() {\r\n        dcxt.performTasks();\r\n      }, 500);\r\n      this.tries--;\r\n    }\r\n  }\r\n}\r\n\r\nvar updater = {\r\n  ajaxPosting: false,\r\n  newThreads: [],\r\n  showNewThreads: function() {\r\n    $('#wild_thread_appeared').remove();\r\n    _.each(this.newThreads, function(thread) {\r\n      $.get(ku_boardspath+'/read.php?b='+this_board_dir+'&t='+this_board_dir+'&p='+thread+'&single&replink=1', function(data) {\r\n        $('#delform').prepend(data+'<br clear=\"lesuft\" /><hr />');\r\n      });\r\n    });\r\n    this.newThreads = [];\r\n  },\r\n  update: function(data) {\r\n    if(typeof data.token !== undefined) {\r\n      if($('input[name=token][value='+ data.token +']').length) {\r\n        // This is my post\r\n        clearfields($('input[name=token][value='+ data.token +']').parents('form'));\r\n        if(!this.ajaxPosting) getnewposts();\r\n      }\r\n      else {\r\n        getnewposts();\r\n      }\r\n    }\r\n    var lastvisits = localStorage['lastvisits'] ? (JSON.parse(localStorage['lastvisits']) || { }) : { };\r\n    if(typeof data.timestamp !== 'undefined') {\r\n      lastvisits[boardid] = data.timestamp;\r\n      localStorage.setItem('lastvisits', JSON.stringify(lastvisits));\r\n    }\r\n  },\r\n  bpageNotify: function(data) {\r\n    if($('input[name=token][value='+ data.token +']').length) return;\r\n    if(data.room == 'newthreads') {\r\n      if(dcxt.enabled) return;\r\n      updater.newThreads.push(data.newthread);\r\n      if(!$('#wild_thread_appeared').length)\r\n      $('.postarea').after('<a class=\"xlink\" href=\"javascript:updater.showNewThreads();return false;\" id=\"wild_thread_appeared\">'+_l.newThreadsAvailable+'<hr /></a>');\r\n    }\r\n    else {\r\n      var $target = $('[id^=replies'+data.room+']');\r\n      if(!$target.find('.fresh-replies').text(_l.newReplies+': '+(Number(($target.find('.fresh-replies').text().split(':')[1]))+1)).length)\r\n        $target.append('<a href=\"/'+ this_board_dir +'/res/'+data.room+'.html\" class=\"xlink fresh-replies\">'+_l.newReplies+': 1</a>').find('.fresh-replies').click(function(e) {\r\n          e.preventDefault();\r\n          var $label = $(this);\r\n          var after = /\\d+/.exec($target.find('.reply').last().attr('id'));\r\n          $.ajax({\r\n            url: ku_boardspath + '/expand.php?after=' + after + '&board=' + this_board_dir + '&threadid=' + data.room,\r\n            success: function(data) {\r\n              if (data) {\r\n                $target.append($(data));\r\n                replyMap.showReplies()\r\n                \r\n              } else {\r\n                popupMessage(_l.noNewPosts);\r\n              }\r\n              $label.remove();\r\n            },\r\n            error: function(xhr, status) {\r\n              popupMessage(_l.oops + \" (\" + status + \")\");\r\n            }\r\n          });\r\n        });\r\n    } \r\n  },\r\n  send: function($form) {\r\n    if(!this.ajaxPosting) {\r\n      xsend($form.attr('id'));\r\n    }\r\n    return false;\r\n  }\r\n}\r\n\r\nfunction strip(html)\r\n{\r\n   var tmp = document.createElement(\"DIV\");\r\n   tmp.innerHTML = html;\r\n   return tmp.textContent || tmp.innerText || \"\";\r\n}\r\n\r\nfunction processEmbeds($scope) {\r\n  $scope.find('.embed:not(.title-given)').each(function() {\r\n    var container = $(this);\r\n    var vidID = container.data('id');\r\n    if(container.data('site') === 'youtube') { \r\n      $.get('https://www.googleapis.com/youtube/v3/videos?part=id%2Csnippet&id='+vidID+'&key='+ku_youtube_apikey, function(res) {\r\n        if(!res.error && res.items.length) {\r\n          var videotitle = res.items[0].snippet.title;          \r\n          container.append($('<a target=\"_blank\" title=\"'+_l.watchOn+' Youtube\"></a>').addClass('yt-title-overlay').text(videotitle).attr('href', 'http://www.youtube.com/watch?v='+vidID)\r\n          .click(function(ev) { ev.stopPropagation(); }));\r\n        }\r\n      });\r\n      container.addClass('title-given');\r\n    }\r\n    if(container.data('site') === 'vimeo') {\r\n      $.get('http://vimeo.com/api/v2/video/'+vidID+'.json', function(res) {\r\n        var videotitle = res[0].title, thumbnail = res[0].thumbnail_large;\r\n        container.css({'background-image': 'url('+thumbnail+')'})\r\n        .append($('<a target=\"_blank\" title=\"'+_l.watchOn+' Vimeo\"></a>').addClass('vi-title-overlay').text(videotitle).attr('href', 'http://vimeo.com/'+vidID)\r\n        .click(function(ev) { ev.stopPropagation(); }));\r\n      });\r\n      container.addClass('title-given');\r\n    }\r\n    if(container.data('site') === 'coub') {\r\n      $.get(ku_boardspath+'/corpsy.php?code='+vidID, function(res) {\r\n        var videotitle = res.title, thumbnail = res.thumbnail_url;\r\n        container.css({'background-image': 'url('+thumbnail+')'})\r\n        .append($('<a target=\"_blank\" title=\"'+_l.watchOn+' Coub\"></a>').addClass('co-title-overlay').text(videotitle).attr('href', 'http://coub.com/view/'+vidID)\r\n        .click(function(ev) { ev.stopPropagation(); }));\r\n      });\r\n      container.addClass('title-given');\r\n    }\r\n  });\r\n}\r\n\r\nvar kumod = getCookie('kumod');\r\nif (kumod !== '') {\r\n  if(kumod === 'allboards') kumod_set = true;\r\n  else kumod_set = in_array(this_board_dir, kumod.split('|'));\r\n}\r\n\r\nvar mp3playerid = 0;\r\nfunction expandmp3(id, path){\r\n  if (mp3playerid == id)\r\n  {\r\n    document.getElementById('player'+id).innerHTML = '';\r\n    document.getElementById('player'+id).style.display = 'none';\r\n    mp3playerid = 0;\r\n  } else {\r\n    if(mp3playerid != 0)\r\n    {\r\n      document.getElementById('player'+mp3playerid).innerHTML = '';\r\n      document.getElementById('player'+mp3playerid).style.display = 'none';\r\n    }\r\n\r\n    document.getElementById('player'+id).innerHTML = '<embed src=\"/web/20110329072959/http://www.0chan.ru/mediaplayer.swf?type=mp3&file='+path+'\" width=\"320\" height=\"20\">';\r\n    document.getElementById('player'+id).style.display = 'block';\r\n    mp3playerid = id;\r\n  }\r\n}\r\n\r\nvar swfplayerid = 0;\r\nfunction expandswf(id, path, w, h){\r\n  if (swfplayerid == id)\r\n  {\r\n    document.getElementById('swfplayer'+id).innerHTML = '';\r\n    document.getElementById('swfplayer'+id).style.display = 'none';\r\n    swfplayerid = 0;\r\n  } else {\r\n    if(swfplayerid != 0)\r\n    {\r\n      document.getElementById('swfplayer'+swfplayerid).innerHTML = '';\r\n      document.getElementById('swfplayer'+swfplayerid).style.display = 'none';\r\n    }\r\n\r\n    document.getElementById('swfplayer'+id).innerHTML = '<embed src=\"'+path+'\" width=\"'+w+'\" height=\"'+h+'\">';\r\n    document.getElementById('swfplayer'+id).style.display = 'block';\r\n    swfplayerid = id;\r\n  }\r\n}\r\n\r\nfunction expandwebm($mov, ev) {\r\n  //good luck understanding this shitcode :^)\r\n  if($mov.data('expanded') !== '1') {\r\n    ev.preventDefault(); \r\n    var movieurl = $mov.attr('href'), imgh = $mov.data('height'), imgw = $mov.data('width'), dt = $mov.data('thumb'), postnum = $mov.data('id');\r\n    var uid = '_vframe_'+makeid()+(new Date().getTime());\r\n    $mov.replaceWith(function() {\r\n      return '<span id=\"'+uid+'\" data-thumb=\"'+dt+'\" data-width=\"'+imgw+'\"\" data-height=\"'+imgh+'\" data-href=\"'+movieurl+'\">'+this.innerHTML + '</span>';\r\n    });\r\n    $mov = $(\"#\"+uid);\r\n    $mov.find('img').hide();\r\n    var video = $mov.find('video').show(), notice = '';\r\n    if(!video.length) {\r\n      $mov.find('span').append('<video class=\"thumb\" src=\"'+movieurl+'\" controls loop autoplay height=\"'+imgh+'\" width=\"'+imgw+'\"></video>').promise().done(function() {\r\n        video = $mov.find('video');\r\n      });\r\n    }\r\n    else video.get(0).play();\r\n    if(!Settings.expandImgFull()) {\r\n      var offset = 50, offset_el = video[0];\r\n      var max_w = document.documentElement?document.documentElement.clientWidth : document.body.clientWidth;\r\n      while (offset_el != null) {\r\n        offset += offset_el.offsetLeft;\r\n        offset_el = offset_el.offsetParent;\r\n      }\r\n      var new_w = max_w - offset;\r\n      if(imgw > new_w) {\r\n        var ratio = imgw / imgh;\r\n        var zoom = 1 - new_w / imgw;\r\n        var new_h = new_w / ratio;\r\n        video.width(new_w);\r\n        video.height(new_h);\r\n        notice = _l.videoDownscaledBy + \" \" + Math.round(zoom*100) + \"% \"+_l.toFit;\r\n      }\r\n    }\r\n    $mov.parent().find('.filesize').append('<span class=\"videocloser\"><b> [<a href=\"#\"> x </a>]</b> '+notice+'</span>');\r\n    $mov.parent().find('.videocloser').click(function() {\r\n      var uid = '_vframe_'+makeid()+(new Date().getTime());\r\n      $mov.replaceWith(function() {\r\n        return '<a class=\"movie\" id=\"'+uid+'\" data-thumb=\"'+dt+'\" data-width=\"'+imgw+'\"\" data-height=\"'+imgh+'\" href=\"'+movieurl+'\">'+this.innerHTML + '</a>';\r\n      }).data('expanded', '0');\r\n      $mov = $(\"#\"+uid);\r\n      $mov.find('video').hide()[0].pause();\r\n      $mov.find('img').show();\r\n      $(this).remove();\r\n      return false;\r\n    });\r\n  }\r\n}\r\n\r\nfunction makeid()\r\n{\r\n  var text = \"\";\r\n  var possible = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\r\n\r\n  for( var i=0; i < 5; i++ )\r\n    text += possible.charAt(Math.floor(Math.random() * possible.length));\r\n\r\n  return text;\r\n}\r\n\r\nfunction checknamesave(){\r\n  var checkd;\r\n  if(getCookie('name') != '') {\r\n    checkd = true;\r\n  } else {\r\n    checkd = false;\r\n  }\r\n  var doc = document.getElementById('save');\r\n  if (doc != null) doc.checked = checkd;\r\n}\r\nfunction checkgotothread(){\r\n  var checkd; \r\n  if(getCookie('tothread') == 'on') {\r\n    checkd = true;\r\n  } else {\r\n    checkd = false;\r\n  }\r\n  $(\"#gotothread\").attr('checked', checkd);\r\n}\r\n\r\nfunction navigatepages (event)\r\n{\r\n  if (!document.getElementById) return;\r\n    if (is_entering) return;\r\n  if (window.event) event = window.event;\r\n\r\n  if (event.ctrlKey)\r\n  {\r\n\r\n    var link = null;\r\n    var href = null;\r\n\r\n        var docloc = document.location.toString();\r\n        if (docloc.indexOf('/res/') != -1) {\r\n          if( (event.keyCode ? event.keyCode : event.which ? event.which : null) == 13 )\r\n            $('textarea[name=\"message\"]:focus').parents('form').submit();\r\n        }\r\n        else {\r\n          if (docloc.indexOf('.html') == -1 || docloc.indexOf('board.html') != -1) {\r\n            var page = 0;\r\n            var docloc_trimmed = docloc.substr(0, docloc.lastIndexOf('/') + 1);\r\n          } else {\r\n            var page = docloc.substr((docloc.lastIndexOf('/') + 1));\r\n            page = (+page.substr(0, page.indexOf('.html')));\r\n            var docloc_trimmed = docloc.substr(0, docloc.lastIndexOf('/') + 1);\r\n          }\r\n          if (page == 0) {\r\n            var docloc_valid = docloc_trimmed;\r\n          } else {\r\n            var docloc_valid  = docloc_trimmed + page + '.html';\r\n          }\r\n          let match;\r\n          if(match=/#s([0-9]+)/.exec(docloc)) {\r\n            var relativepost = (+match[1]);\r\n          } else {\r\n            var relativepost = -1;\r\n          }\r\n          var maxthreads = 0;\r\n          while(document.getElementsByName('s'+(++maxthreads)).length>0){}\r\n          switch (event.keyCode ? event.keyCode : event.which ? event.which : null)\r\n          {\r\n            case 13: // ctrl+Enter\r\n              $('textarea[name=\"message\"]:focus').parents('form').submit();\r\n              break;\r\n\r\n            case 0x25: // ctrl+left\r\n              link = document.getElementById('prevPage');\r\n              break;\r\n            case 0x27: // ctrl+right\r\n              link = document.getElementById('nextPage');\r\n              break;\r\n\r\n            case 0x28: // ctrl+down\r\n              if (relativepost == maxthreads - 1) {\r\n                break; //var newrelativepost = 0;\r\n              } else {\r\n                var newrelativepost = relativepost + 1;\r\n              }\r\n              href = docloc_valid + '#s' + newrelativepost;\r\n              break;\r\n\r\n            case 0x26: // ctrl+up\r\n              if (relativepost == -1 || relativepost == 0) {\r\n                break; //var newrelativepost = maxthreads - 1;\r\n              } else {\r\n                var newrelativepost = relativepost - 1;\r\n              }\r\n              href = docloc_valid + '#s' + newrelativepost;\r\n              break;\r\n\r\n            case 0x24: // ctrl+home\r\n              document.location = docloc_trimmed;\r\n              break;\r\n          }\r\n\r\n          if (link && link.action) document.location = link.action;\r\n          if (href) document.location.href = href;\r\n        }\r\n  }\r\n}\r\n \r\n\r\nif (window.document.addEventListener) {\r\n   window.document.addEventListener(\"keydown\", navigatepages, false);\r\n} else {\r\n   window.document.attachEvent(\"onkeydown\", navigatepages);\r\n}\r\n\r\nNodeList.prototype.forEach = Array.prototype.forEach;\r\n\r\nvar replyMap = {\r\n  showReplies: function(root) {\r\n    // let start = new Date().getTime()\r\n    ;(root || document).querySelectorAll('.postnode').forEach(post => {\r\n      let n = post.querySelector('.reflink a:last-child').innerHTML\r\n      , msg = post.querySelector('.postmessage')\r\n      , repliesContainer = post.querySelector('.replieslist')\r\n      if (this.posts[n]) {\r\n        this.posts[n].container = repliesContainer\r\n      }\r\n      else {\r\n        this.posts[n] = {\r\n          container: repliesContainer,\r\n          replies: []\r\n        }\r\n      }\r\n      let links = msg.querySelectorAll(`a[class^=ref\\\\|${this_board_dir}]`)\r\n      if (links.length) links.forEach(link => {\r\n        let linkData = link.className.split(' ')[0].split('|')\r\n        , linkN = linkData[3]\r\n        , href = linkData[2] !== '' \r\n          ? `/${linkData[1]}/res/${linkData[2]}.html#${n}`\r\n          : `${ku_boardspath}/postbynumber.php?b=${linkData[1]}&p=${linkData[3]}`\r\n        , htm = `<a class=\"ref-reply\" href=\"${href}\" onclick=\"javascript:highlight(\\'${n}\\', true);\">&gt;&gt;${n}</a>`\r\n        if (this.posts[linkN]) {\r\n          if (! _.includes(this.posts[linkN].replies, htm)) {\r\n            this.posts[linkN].replies.push(htm)\r\n          }\r\n        }\r\n        else {\r\n          this.posts[linkN] = {\r\n            replies: [htm]\r\n          }\r\n        }\r\n        this.posts[linkN].skip = false\r\n      })\r\n    })\r\n    _.each(this.posts, post => {\r\n      if (!post.skip && post.replies.length && post.container) {\r\n        post.container.innerHTML = `<br>${_l.replies}: ${post.replies.join(', ')}`\r\n        post.skip = true\r\n      }\r\n    })\r\n    /*let end = new Date().getTime()\r\n    console.log(end - start)*/\r\n  },\r\n  posts: {}\r\n}\r\n\r\nvar scrollAnchor = {\r\n  save: function(id, elements, parent, dimensions) {\r\n    parent = parent || window\r\n    dimensions = dimensions || 'vh'\r\n    let mid = [window.innerWidth / 2, window.innerHeight / 2]\r\n    , elMap = []\r\n    , parentBCR = (parent != window) \r\n      ? parent.getBoundingClientRect() \r\n      : {\r\n        left: 0,\r\n        top: 0,\r\n        right: window.innerWidth,\r\n        bottom: window.innerHeight\r\n      }\r\n    if (\r\n      parent != window\r\n      &&\r\n      ( \r\n        (parentBCR.left <= 0 && parentBCR.right <= 0) \r\n        || \r\n        (parentBCR.top <= 0 && parentBCR.bottom <= 0)\r\n        ||\r\n        parentBCR.left >= window.innerWidth\r\n        ||\r\n        parentBCR.top >= window.innerHeight\r\n      )\r\n    ) {\r\n      mid = [parentBCR.left + parentBCR.width/2, parentBCR.top + parentBCR.height/2]\r\n    }\r\n    let elems = (parent == window ? document : parent).querySelectorAll(elements)\r\n    if (! elems.length) return;\r\n    elems.forEach(function (el) {\r\n      let bcr = el.getBoundingClientRect()\r\n      , relativeVisibleWidth = Math.pos(bcr.width - (Math.pos(parentBCR.left - bcr.left) + Math.pos(bcr.right - parentBCR.right))) / bcr.width\r\n      , relativeVisibleHeight = Math.pos(bcr.height - (Math.pos(parentBCR.top - bcr.top) + Math.pos(bcr.bottom - parentBCR.bottom))) / bcr.height\r\n      , dx = Math.abs(mid[0] - (bcr.left + bcr.width/2))\r\n      , dy = Math.abs(mid[1] - (bcr.top + bcr.height/2))\r\n      elMap.push({\r\n        el: el,\r\n        primaryVisibility: dimensions[0] == 'h' ? relativeVisibleWidth : relativeVisibleHeight,\r\n        secondaryVisibility: dimensions[0] == 'v' ? relativeVisibleWidth : relativeVisibleHeight,\r\n        primaryOffset: dimensions[0] == 'h' ? dx : dy,\r\n        secondaryOffset: dimensions[0] == 'v' ? dx : dy\r\n      })\r\n    })\r\n    elMap.sort((a, b) => {\r\n      if (b.primaryVisibility !== a.primaryVisibility) {\r\n        return b.primaryVisibility - a.primaryVisibility\r\n      }\r\n      else if (dimensions.length > 1 && b.secondaryVisibility !== a.secondaryVisibility) {\r\n        return b.secondaryVisibility - a.secondaryVisibility\r\n      }\r\n      else if (a.primaryOffset !== b.primaryOffset) {\r\n        return a.primaryOffset - b.primaryOffset\r\n      }\r\n      else if (dimensions.length > 1) {\r\n        return a.secondaryOffset - b.secondaryOffset\r\n      }\r\n    })\r\n    let anchor = elMap[0].el\r\n    , bcrBefore = anchor.getBoundingClientRect()\r\n    this.saved[id] = {\r\n      anchor: anchor,\r\n      left: bcrBefore.left,\r\n      top: bcrBefore.top,\r\n      parent: parent,\r\n      dimensions: dimensions\r\n    }\r\n  },\r\n  restore: function(id) {\r\n    let loaded = this.saved[id]\r\n    if (! loaded) return;\r\n    window.requestAnimationFrame(() => {\r\n      let bcrAfter = loaded.anchor.getBoundingClientRect()\r\n      loaded.parent.scrollBy(loaded.dimensions.indexOf('h') !== (-1) ? bcrAfter.left - loaded.left : 0, loaded.dimensions.indexOf('v') !== (-1) ? bcrAfter.top - loaded.top : 0)\r\n    })\r\n  },\r\n  saved: {}\r\n}\r\nMath.pos = x => x >= 0 ? x : 0;\r\n\r\n// requestAnimationFrame polyfill https://gist.github.com/paulirish/1579671\r\n(function() {\r\n  var lastTime = 0;\r\n  var vendors = ['ms', 'moz', 'webkit', 'o'];\r\n  for(var x = 0; x < vendors.length && !window.requestAnimationFrame; ++x) {\r\n    window.requestAnimationFrame = window[vendors[x]+'RequestAnimationFrame'];\r\n    window.cancelAnimationFrame = window[vendors[x]+'CancelAnimationFrame'] || window[vendors[x]+'CancelRequestAnimationFrame'];\r\n  }\r\n \r\n  if (!window.requestAnimationFrame)\r\n    window.requestAnimationFrame = function(callback, element) {\r\n      var currTime = new Date().getTime();\r\n      var timeToCall = Math.max(0, 16 - (currTime - lastTime));\r\n      var id = window.setTimeout(function() { callback(currTime + timeToCall); }, timeToCall);\r\n      lastTime = currTime + timeToCall;\r\n      return id;\r\n    };\r\n \r\n  if (!window.cancelAnimationFrame)\r\n    window.cancelAnimationFrame = function(id) {\r\n      clearTimeout(id);\r\n    };\r\n}());\r\n\r\n/// overlay menu\r\nvar menu_current = '';\r\nvar menu_last = '';\r\nfunction menu_show(id)\r\n{\r\n  if(menu_current != '')\r\n  {\r\n    var dl = (id == '_off_') ? 125 : 0;\r\n    $('#'+menu_current).delay(dl).slideUp(100);\r\n    menu_last = menu_current;\r\n  }\r\n  if (id != '') {\r\n    if (menu_last == id && typeof $('#' + id).queue() !== 'undefined' && $('#' + id).queue().length > 0) {\r\n      $('#' + id).clearQueue();\r\n    } else {\r\n      $('#' + id).slideDown(150);\r\n    }\r\n  }\r\n  menu_current = id;\r\n}\r\nfunction menu_pin(){\r\n  if(document.getElementById('overlay_menu').style.position == 'absolute') {\r\n    document.getElementById('overlay_menu').style.position = 'fixed';\r\n    Cookie('ku_menutype', 'fixed', 365);\r\n  } else { \r\n    document.getElementById('overlay_menu').style.position = 'absolute';\r\n    Cookie('ku_menutype', 'absolute', 365);\r\n  }\r\n}\r\n\r\nfunction set_oldmenu(cookie){\r\n  if(cookie) {\r\n    Cookie('ku_oldmenu', 'yes', 90);\r\n  }\r\n  var h = document.getElementById('boardlist_header');\r\n  var f = document.getElementById('boardlist_footer');\r\n  if (h && f) {\r\n    h.innerHTML = f.innerHTML + ' <a href=\\\"#\\\" onclick=\\\"javascript:set_cookie(\\'ku_oldmenu\\', \\'no\\', 90);parent.document.location.reload(true);\\\">[overlay]</a>';\r\n  }\r\n}\r\n\r\nvar LatexIT = {\r\n  mode : 'gif',\r\n  init : function() {\r\n  if(document.implementation.hasFeature(\"http://www.w3.org/TR/SVG11/feature#BasicStructure\", \"1.1\"))\r\n    this.mode='svg';\r\n  },\r\n  odc: \"javascript:LatexIT.replaceWithSrc(this);\",\r\n  dcls: \"Double click to show source\", \r\n\r\n  pre : function(eqn) {\r\n    var txt=eqn.innerHTML;\r\n    if ( !txt.match(/<img.*?>/i) && !txt.match(/<object.*?>/i))\r\n    {\r\n      //Clean code\r\n      txt=txt.replace(/<br>/gi,\"\").replace(/<br \\/>/gi,\"\").replace(/&amp;/mg,'&');\r\n      var atxt = \"[tex]\"+txt+\"[/tex]\"; \r\n      txt=escape(txt.replace(/\\\\/mg,'\\\\'));\r\n      // Add coloring according to style of text\r\n      var c = eval(\"LatexIT.normalize\"+$(eqn).parent().css('color'));\r\n      var extxt = \"{\\\\color[rgb]{\"+c.r+','+c.g+','+c.b+\"}\"+txt+\"}\";\r\n      txt = \" <img src=\\\"http://latex.codecogs.com/\"+this.mode+\".latex?\"+ extxt +\"\\\" title=\\\"\"+this.dcls+\"\\\" alt=\\\"\"+atxt+\"\\\" ondblclick=\\\"\"+this.odc+\"\\\" border=\\\"0\\\" class=\\\"latex\\\" /> \";\r\n    }\r\n    return txt;\r\n  },\r\n  \r\n  replaceWithSrc: function(eqn) {\r\n    var txt = $(eqn).attr('alt');\r\n    $(eqn).parent().html(txt);\r\n  },\r\n\r\n  render : function($scope) {\r\n    var scope = (typeof $scope === 'undefined') ? window.document : $scope[0];\r\n    var eqn = scope.getElementsByTagName(\"*\");\r\n    for (var i=0; i<eqn.length; i++) {\r\n      if(eqn[i].getAttribute(\"lang\") == \"latex\" || eqn[i].getAttribute(\"xml:lang\") == \"latex\")\r\n      eqn[i].innerHTML = this.pre(eqn[i]);\r\n    } \r\n  },\r\n\r\n  normalizergb : function(r, g, b) {\r\n    return {r: (r/255).toFixed(3), g: (g/255).toFixed(2), b: (b/255).toFixed(2) }\r\n  },\r\n  normalizergba : function(r, g, b, a) {\r\n    return this.normalizergb(r, g, b);\r\n  }\r\n};\r\n\r\nfunction in_array(needle, haystack) {\r\n  return (typeof haystack !== 'object') ? (needle === haystack) : _.includes(haystack, needle)\r\n}\r\n\r\nfunction prettyprint_mod() {\r\n  prettyPrint.apply(this, arguments);\r\n  $(\".prettyprint\").each(function() {\r\n    $(this).parents().filter(\".reply\").addClass('prettyprint-container');\r\n  });\r\n  $('.replies table tbody tr').each(function() {\r\n    $(this).css({ 'display': 'block' });\r\n  });\r\n  $('.prettyprint:not(.inline-pp)').next('br').each(function() {\r\n    $(this).css({ 'display': 'none' });\r\n  });\r\n}\r\n\r\n(function($) {\r\n  $.fn.drags = function(opt) {\r\n    opt = $.extend({handle:\"\",cursor:\"move\"}, opt);\r\n\r\n    if(opt.handle === \"\") {\r\n      var $el = this;\r\n    } else {\r\n      var $el = this.find(opt.handle);\r\n    }\r\n\r\n    return $el.css('cursor', opt.cursor).on(\"mousedown\", function(e) {\r\n      if(opt.handle === \"\") {\r\n        var $drag = $(this).addClass('draggable');\r\n      } else {\r\n        var $drag = $(this).addClass('active-handle').parent().addClass('draggable');\r\n      }\r\n      var z_idx = $drag.css('z-index'),\r\n        drg_h = $drag.outerHeight(),\r\n        drg_w = $drag.outerWidth(),\r\n        pos_y = $drag.offset().top + drg_h - e.pageY,\r\n        pos_x = $drag.offset().left + drg_w - e.pageX;\r\n      $drag.css('z-index', 1000).parents().on(\"mousemove\", function(e) {\r\n        $('.draggable').offset({\r\n          top:e.pageY + pos_y - drg_h,\r\n          left:e.pageX + pos_x - drg_w\r\n        }).on(\"mouseup\", function() {\r\n          $(this).removeClass('draggable').css('z-index', z_idx);\r\n        });\r\n      });\r\n      e.preventDefault(); // disable selection\r\n    }).on(\"mouseup\", function() {\r\n      if(opt.handle === \"\") {\r\n        $(this).removeClass('draggable');\r\n      } else {\r\n        $(this).removeClass('active-handle').parent().removeClass('draggable');\r\n      }\r\n    });\r\n  }\r\n  $.fn.dragsOff = function(opt) {\r\n    opt = $.extend({handle:\"\",cursor:\"default\"}, opt);\r\n\r\n    if(opt.handle === \"\") {\r\n     var $el = this;\r\n     $(this).removeClass('draggable');\r\n    } else {\r\n     var $el = this.find(opt.handle);\r\n     $(this).removeClass('active-handle')\r\n        .parent()\r\n        .removeClass('draggable');\r\n    }\r\n    return $el.css('cursor', \"default\")\r\n      .off(\"mousedown\")\r\n      .off(\"mouseup\")\r\n      .off(\"mousemove\");\r\n  }\r\n  $.fn.pin = function() {\r\n    if(this.css('position') !== 'fixed') {\r\n      var abs = {\r\n        top: this.position().top - $(document).scrollTop(),\r\n        left: this.position().left - $(document).scrollLeft()\r\n      }\r\n      this.css({\r\n        position: 'fixed',\r\n        left: abs.left,\r\n        top: abs.top\r\n      });\r\n      this.find('.pinner').removeClass('pinned').addClass('unpinned');\r\n      localStorage['pinForm'] = 0;\r\n      // localStorage['pinPreference'] = 'pinned';\r\n    }\r\n    else {\r\n      var abs = {\r\n        top: this.position().top + $(document).scrollTop(),\r\n        left: this.position().left + $(document).scrollLeft()\r\n      }\r\n      this.css({\r\n        position: 'absolute',\r\n        left: abs.left,\r\n        top: abs.top\r\n      });\r\n      this.find('.pinner').removeClass('unpinned').addClass('pinned');\r\n      localStorage['pinForm'] = 1;\r\n      // localStorage['pinPreference'] = 'unpinned';\r\n    }\r\n  }\r\n  $.fn.unwrap = function () {\r\n    $(this).off().removeClass('wrapper').addClass('unwrapping').empty().css({'background-image': 'none'});\r\n    var vid = $(this).data('id'), htm = '';\r\n    var embedHTMLs = {\r\n      youtube: '<iframe style=\"display:none\" class=\"embedded-content\" width=\"368\" height=\"237\" src=\"//www.youtube.com/embed/'+vid+'?wmode=transparent\" frameborder=\"0\" allowfullscreen></iframe>',\r\n      vimeo: '<iframe style=\"display:none\" src=\"//player.vimeo.com/video/'+vid+'?badge=0\" width=\"368\" height=\"210\" frameborder=\"0\" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>',\r\n      coub: '<iframe src=\"http://coub.com/embed/'+vid+'?muted=false&autostart=false&originalSize=false&hideTopBar=false&noSiteButtons=false&startWithHD=false\" allowfullscreen=\"true\" frameborder=\"0\" width=\"368\" height=\"207\"></iframe>'\r\n    }\r\n    var htm = embedHTMLs[$(this).data('site')] || false;\r\n    if(!htm) return false;\r\n    var container = $(this);\r\n    var content = $(htm)\r\n    .appendTo(container)\r\n    .load(function() {\r\n      $(this).show();\r\n      container.removeClass('unwrapping');\r\n    });\r\n  };\r\n  $.fn.triggerNative = function(eventName) {\r\n    return this.each(function() {\r\n      var el = $(this).get(0);\r\n      triggerNativeEvent(el, eventName);\r\n    });\r\n  };\r\n  function triggerNativeEvent(el, eventName){\r\n    if (el.fireEvent) { // < IE9\r\n    (el.fireEvent('on' + eventName));\r\n    } else {\r\n    var evt = document.createEvent('Events');\r\n    evt.initEvent(eventName, true, false);\r\n    el.dispatchEvent(evt);\r\n    }\r\n  }\r\n})(jQuery);\r\n\r\nfunction xsend(formid) {\r\n  if(typeof formid === 'undefined') formid = \"postform\";\r\n  $('#'+formid).ajaxSubmit({\r\n    beforeSubmit: function() {\r\n      $('#'+formid).addClass('form-sending');\r\n    },\r\n    success: function(responseText, statusText, xhr, $form) {\r\n      $('#'+formid).removeClass('form-sending');\r\n      var resp = $('<html></html>').append(responseText);\r\n      if(resp.find('h1').text() !== '') {\r\n        popupMessage(resp.find('h2').text());\r\n        clearfields($(formid), true);\r\n      }\r\n      else if(resp.find('.big-shit').text() !== '') {\r\n        if(resp.find('.big-shit').text() === 'Вы забанены!') {\r\n          window.location.href = ku_cgipath + \"/banned.php\";\r\n        }\r\n        popupMessage(resp.find('.big-shit').text());\r\n        clearfields($(formid), true);\r\n      }\r\n    } \r\n  }); \r\n  return false;\r\n}\r\n\r\nfunction clearfields($form, onlycaptcha) {\r\n  if(typeof onlycaptcha === 'undefined') onlycaptcha = false;\r\n  if(!onlycaptcha) {\r\n    $form.find('[name=\"message\"]').val('');\r\n    $form.find('[name=\"captcha\"]').val('');\r\n    $form.find('[name=\"subject\"]').val('');\r\n    $form.find('[name=\"imagefile\"]').val('');\r\n    $form.find('[name=\"name\"]').val('');\r\n    $form.find('[name=\"embed\"]').val('');\r\n    $form.find('[name=\"token\"]').val(randomString());\r\n  }\r\n  if(!dcxt.enabled) {\r\n    $('.captchawrap').stop();\r\n    clearTimeout(rottencaptcha);\r\n    rotCaptcha();\r\n  }\r\n}\r\n\r\nfunction resetForm(form) {\r\n  let fields = form.querySelectorAll('input[type=text]:not([name=name]), input[type=file], textarea')\r\n  Array.prototype.forEach.call(fields, field => field.value = null)\r\n}\r\n\r\nvar injector = {\r\n  inject: function(alias, css) {\r\n    var id = `injector:${alias}`\r\n    var existing = document.getElementById(id)\r\n    if (existing) {\r\n      existing.innerHTML = css\r\n      return\r\n    }\r\n    var head = document.head || document.getElementsByTagName('head')[0]\r\n    , style = document.createElement('style')\r\n    style.type = 'text/css'\r\n    style.id = id\r\n    if (style.styleSheet) {\r\n      style.styleSheet.cssText = css\r\n    } else {\r\n      style.appendChild(document.createTextNode(css))\r\n    }\r\n    head.appendChild(style)\r\n  },\r\n  remove: function(alias) {\r\n    var id = `injector:${alias}`\r\n    var style = document.getElementById(id)\r\n    if (style) {\r\n      var head = document.head || document.getElementsByTagName('head')[0]\r\n      if (head)\r\n        head.removeChild(document.getElementById(id))\r\n    }\r\n  }\r\n}\r\n\r\nfunction randomString() {\r\n  var result = '', chars = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ', length = 10;\r\n  for (var i = length; i > 0; --i) result += chars[Math.round(Math.random() * (chars.length - 1))];\r\n  return result;\r\n}\r\n\r\nvar cloud20 = {\r\n  init: function() {\r\n    $.getJSON(ku_cgipath + '/boards20.json', function(data) {\r\n      cloud20.allboards = data;\r\n      cloud20.filter('');\r\n    });\r\n  },\r\n  filter: function(query) {\r\n    var res = [];\r\n    if(typeof this.allboards === \"undefined\") return;\r\n    if(query == '') res = this.allboards;\r\n    else {\r\n      query = query.toLowerCase();\r\n      _.each(this.allboards, function(board) {\r\n        if(board.name.toLowerCase().search(query) !== -1 || board.desc.toLowerCase().search(query) !== -1)\r\n          res.push(board);\r\n      });\r\n    }\r\n    this.display(res);\r\n  },\r\n  display: function(list) {\r\n    var newhtml = '', opts = '';\r\n    _.each(list, function(item) {\r\n      newhtml += '<a class=\"menu-item\" title=\"'+ item.desc +'\" href=\"'+ku_boardsfolder+item.name+'/\">/'+item.name+'/ - '+ item.desc +'</a>';\r\n      opts += '<option value=\"'+item.name+'\">/'+item.name+'/ - '+ item.desc +'</option>';\r\n    });\r\n    $('#boards20').html(newhtml);\r\n    $('.boardsel20').append(opts);\r\n  }\r\n}\r\n\r\nvar countries = {\r\n  'A1': \"Anonymous Proxy\",\r\n  'A2': \"Satellite Provider\",\r\n  'O1': \"Other Country\",\r\n  'AD': \"Andorra\",\r\n  'AE': \"United Arab Emirates\",\r\n  'AF': \"Afghanistan\",\r\n  'AG': \"Antigua and Barbuda\",\r\n  'AI': \"Anguilla\",\r\n  'AL': \"Albania\",\r\n  'AM': \"Armenia\",\r\n  'AO': \"Angola\",\r\n  'AP': \"Asia/Pacific Region\",\r\n  'AQ': \"Antarctica\",\r\n  'AR': \"Argentina\",\r\n  'AS': \"American Samoa\",\r\n  'AT': \"Austria\",\r\n  'AU': \"Australia\",\r\n  'AW': \"Aruba\",\r\n  'AX': \"Aland Islands\",\r\n  'AZ': \"Azerbaijan\",\r\n  'BA': \"Bosnia and Herzegovina\",\r\n  'BB': \"Barbados\",\r\n  'BD': \"Bangladesh\",\r\n  'BE': \"Belgium\",\r\n  'BF': \"Burkina Faso\",\r\n  'BG': \"Bulgaria\",\r\n  'BH': \"Bahrain\",\r\n  'BI': \"Burundi\",\r\n  'BJ': \"Benin\",\r\n  'BL': \"Saint Bartelemey\",\r\n  'BM': \"Bermuda\",\r\n  'BN': \"Brunei Darussalam\",\r\n  'BO': \"Bolivia\",\r\n  'BQ': \"Bonaire, Saint Eustatius and Saba\",\r\n  'BR': \"Brazil\",\r\n  'BS': \"Bahamas\",\r\n  'BT': \"Bhutan\",\r\n  'BV': \"Bouvet Island\",\r\n  'BW': \"Botswana\",\r\n  'BY': \"Belarus\",\r\n  'BZ': \"Belize\",\r\n  'CA': \"Canada\",\r\n  'CC': \"Cocos (Keeling) Islands\",\r\n  'CD': \"Congo, The Democratic Republic of the\",\r\n  'CF': \"Central African Republic\",\r\n  'CG': \"Congo\",\r\n  'CH': \"Switzerland\",\r\n  'CI': \"Cote d'Ivoire\",\r\n  'CK': \"Cook Islands\",\r\n  'CL': \"Chile\",\r\n  'CM': \"Cameroon\",\r\n  'CN': \"China\",\r\n  'CO': \"Colombia\",\r\n  'CR': \"Costa Rica\",\r\n  'CU': \"Cuba\",\r\n  'CV': \"Cape Verde\",\r\n  'CW': \"Curacao\",\r\n  'CX': \"Christmas Island\",\r\n  'CY': \"Cyprus\",\r\n  'CZ': \"Czech Republic\",\r\n  'DE': \"Germany\",\r\n  'DJ': \"Djibouti\",\r\n  'DK': \"Denmark\",\r\n  'DM': \"Dominica\",\r\n  'DO': \"Dominican Republic\",\r\n  'DZ': \"Algeria\",\r\n  'EC': \"Ecuador\",\r\n  'EE': \"Estonia\",\r\n  'EG': \"Egypt\",\r\n  'EH': \"Western Sahara\",\r\n  'ER': \"Eritrea\",\r\n  'ES': \"Spain\",\r\n  'ET': \"Ethiopia\",\r\n  'EU': \"Europe\",\r\n  'FI': \"Finland\",\r\n  'FJ': \"Fiji\",\r\n  'FK': \"Falkland Islands (Malvinas)\",\r\n  'FM': \"Micronesia, Federated States of\",\r\n  'FO': \"Faroe Islands\",\r\n  'FR': \"France\",\r\n  'GA': \"Gabon\",\r\n  'GB': \"United Kingdom\",\r\n  'GD': \"Grenada\",\r\n  'GE': \"Georgia\",\r\n  'GF': \"French Guiana\",\r\n  'GG': \"Guernsey\",\r\n  'GH': \"Ghana\",\r\n  'GI': \"Gibraltar\",\r\n  'GL': \"Greenland\",\r\n  'GM': \"Gambia\",\r\n  'GN': \"Guinea\",\r\n  'GP': \"Guadeloupe\",\r\n  'GQ': \"Equatorial Guinea\",\r\n  'GR': \"Greece\",\r\n  'GS': \"South Georgia and the South Sandwich Islands\",\r\n  'GT': \"Guatemala\",\r\n  'GU': \"Guam\",\r\n  'GW': \"Guinea-Bissau\",\r\n  'GY': \"Guyana\",\r\n  'HK': \"Hong Kong\",\r\n  'HM': \"Heard Island and McDonald Islands\",\r\n  'HN': \"Honduras\",\r\n  'HR': \"Croatia\",\r\n  'HT': \"Haiti\",\r\n  'HU': \"Hungary\",\r\n  'ID': \"Indonesia\",\r\n  'IE': \"Ireland\",\r\n  'IL': \"Israel\",\r\n  'IM': \"Isle of Man\",\r\n  'IN': \"India\",\r\n  'IO': \"British Indian Ocean Territory\",\r\n  'IQ': \"Iraq\",\r\n  'IR': \"Iran, Islamic Republic of\",\r\n  'IS': \"Iceland\",\r\n  'IT': \"Italy\",\r\n  'JE': \"Jersey\",\r\n  'JM': \"Jamaica\",\r\n  'JO': \"Jordan\",\r\n  'JP': \"Japan\",\r\n  'KE': \"Kenya\",\r\n  'KG': \"Kyrgyzstan\",\r\n  'KH': \"Cambodia\",\r\n  'KI': \"Kiribati\",\r\n  'KM': \"Comoros\",\r\n  'KN': \"Saint Kitts and Nevis\",\r\n  'KP': \"Korea, Democratic People's Republic of\",\r\n  'KR': \"Korea, Republic of\",\r\n  'KW': \"Kuwait\",\r\n  'KY': \"Cayman Islands\",\r\n  'KZ': \"Kazakhstan\",\r\n  'LA': \"Lao People's Democratic Republic\",\r\n  'LB': \"Lebanon\",\r\n  'LC': \"Saint Lucia\",\r\n  'LI': \"Liechtenstein\",\r\n  'LK': \"Sri Lanka\",\r\n  'LR': \"Liberia\",\r\n  'LS': \"Lesotho\",\r\n  'LT': \"Lithuania\",\r\n  'LU': \"Luxembourg\",\r\n  'LV': \"Latvia\",\r\n  'LY': \"Libyan Arab Jamahiriya\",\r\n  'MA': \"Morocco\",\r\n  'MC': \"Monaco\",\r\n  'MD': \"Moldova, Republic of\",\r\n  'ME': \"Montenegro\",\r\n  'MF': \"Saint Martin\",\r\n  'MG': \"Madagascar\",\r\n  'MH': \"Marshall Islands\",\r\n  'MK': \"Macedonia\",\r\n  'ML': \"Mali\",\r\n  'MM': \"Myanmar\",\r\n  'MN': \"Mongolia\",\r\n  'MO': \"Macao\",\r\n  'MP': \"Northern Mariana Islands\",\r\n  'MQ': \"Martinique\",\r\n  'MR': \"Mauritania\",\r\n  'MS': \"Montserrat\",\r\n  'MT': \"Malta\",\r\n  'MU': \"Mauritius\",\r\n  'MV': \"Maldives\",\r\n  'MW': \"Malawi\",\r\n  'MX': \"Mexico\",\r\n  'MY': \"Malaysia\",\r\n  'MZ': \"Mozambique\",\r\n  'NA': \"Namibia\",\r\n  'NC': \"New Caledonia\",\r\n  'NE': \"Niger\",\r\n  'NF': \"Norfolk Island\",\r\n  'NG': \"Nigeria\",\r\n  'NI': \"Nicaragua\",\r\n  'NL': \"Netherlands\",\r\n  'NO': \"Norway\",\r\n  'NP': \"Nepal\",\r\n  'NR': \"Nauru\",\r\n  'NU': \"Niue\",\r\n  'NZ': \"New Zealand\",\r\n  'OM': \"Oman\",\r\n  'PA': \"Panama\",\r\n  'PE': \"Peru\",\r\n  'PF': \"French Polynesia\",\r\n  'PG': \"Papua New Guinea\",\r\n  'PH': \"Philippines\",\r\n  'PK': \"Pakistan\",\r\n  'PL': \"Poland\",\r\n  'PM': \"Saint Pierre and Miquelon\",\r\n  'PN': \"Pitcairn\",\r\n  'PR': \"Puerto Rico\",\r\n  'PS': \"Palestinian Territory\",\r\n  'PT': \"Portugal\",\r\n  'PW': \"Palau\",\r\n  'PY': \"Paraguay\",\r\n  'QA': \"Qatar\",\r\n  'RE': \"Reunion\",\r\n  'RO': \"Romania\",\r\n  'RS': \"Serbia\",\r\n  'RU': \"Russian Federation\",\r\n  'RW': \"Rwanda\",\r\n  'SA': \"Saudi Arabia\",\r\n  'SB': \"Solomon Islands\",\r\n  'SC': \"Seychelles\",\r\n  'SD': \"Sudan\",\r\n  'SE': \"Sweden\",\r\n  'SG': \"Singapore\",\r\n  'SH': \"Saint Helena\",\r\n  'SI': \"Slovenia\",\r\n  'SJ': \"Svalbard and Jan Mayen\",\r\n  'SK': \"Slovakia\",\r\n  'SL': \"Sierra Leone\",\r\n  'SM': \"San Marino\",\r\n  'SN': \"Senegal\",\r\n  'SO': \"Somalia\",\r\n  'SR': \"Suriname\",\r\n  'SS': \"South Sudan\",\r\n  'ST': \"Sao Tome and Principe\",\r\n  'SV': \"El Salvador\",\r\n  'SX': \"Sint Maarten\",\r\n  'SY': \"Syrian Arab Republic\",\r\n  'SZ': \"Swaziland\",\r\n  'TC': \"Turks and Caicos Islands\",\r\n  'TD': \"Chad\",\r\n  'TF': \"French Southern Territories\",\r\n  'TG': \"Togo\",\r\n  'TH': \"Thailand\",\r\n  'TJ': \"Tajikistan\",\r\n  'TK': \"Tokelau\",\r\n  'TL': \"Timor-Leste\",\r\n  'TM': \"Turkmenistan\",\r\n  'TN': \"Tunisia\",\r\n  'TO': \"Tonga\",\r\n  'TR': \"Turkey\",\r\n  'TT': \"Trinidad and Tobago\",\r\n  'TV': \"Tuvalu\",\r\n  'TW': \"Taiwan\",\r\n  'TZ': \"Tanzania, United Republic of\",\r\n  'UA': \"Ukraine\",\r\n  'UG': \"Uganda\",\r\n  'UM': \"United States Minor Outlying Islands\",\r\n  'US': \"United States\",\r\n  'UY': \"Uruguay\",\r\n  'UZ': \"Uzbekistan\",\r\n  'VA': \"Holy See (Vatican City State)\",\r\n  'VC': \"Saint Vincent and the Grenadines\",\r\n  'VE': \"Venezuela\",\r\n  'VG': \"Virgin Islands, British\",\r\n  'VI': \"Virgin Islands, U.S.\",\r\n  'VN': \"Vietnam\",\r\n  'VU': \"Vanuatu\",\r\n  'WF': \"Wallis and Futuna\",\r\n  'WS': \"Samoa\",\r\n  'YE': \"Yemen\",\r\n  'YT': \"Mayotte\",\r\n  'ZA': \"South Africa\",\r\n  'ZM': \"Zambia\",\r\n  'ZW': \"Zimbabwe\",\r\n  'XX': \"OMCK\",\r\n  'T1': \"Tor\"\r\n}\r\n\r\nvar bnrs = {\r\n  initiated: false,\r\n  init: function() {\r\n    $.getJSON(ku_boardspath+'/bnrs.json', function(data) { \r\n      var reduced = [];\r\n      if(data.length > 1) {\r\n        _.each(data, function(bnr) {\r\n          if(bnr.link !== this_board_dir) reduced.push(bnr);\r\n        });\r\n      }\r\n      else reduced = data;\r\n      bnrs.data = reduced;\r\n      bnrs.initiated = true;\r\n      bnrs.display();\r\n    });\r\n  },\r\n  display: function() {\r\n    if(!this.initiated) return;\r\n    if(!this.data.length) return;\r\n    var reduced = [];\r\n    if(typeof this.current !== 'undefined') {\r\n      _.each(this.data, function(item) {\r\n        if(item.path !== bnrs.current) reduced.push(item)\r\n      });\r\n    }\r\n    else reduced = this.data;\r\n    var toDisplay = randomItem(reduced);\r\n    this.current = toDisplay.path;\r\n    var link = (toDisplay.link.indexOf('http') === (-1)) ? ku_boardspath+'/'+toDisplay.link : toDisplay.link;\r\n    var newhtml = '<a class=\"bnrsupdate\" href=\"#\" onclick=\"javascript:bnrs.display();return false;\"></a><a href=\"'+link+'\"><img src=\"'+ku_boardspath+'/images/bnrs/'+toDisplay.path+'\" /></a>';\r\n    if($('.bnr').length) {\r\n      $('.bnr').html(newhtml);\r\n    }\r\n    else $('.logo').before('<div class=\"bnr-wrap\"><div class=\"bnr\">'+newhtml+'</div></div>');\r\n  },\r\n}\r\n\r\nfunction getRandomInt (min, max) {\r\n  return Math.floor(Math.random() * (max - min + 1)) + min;\r\n}\r\n\r\nfunction randomItem(array) {\r\n  return array[getRandomInt(0, array.length-1)];\r\n}\r\n\r\n// jQuery form plugin\r\n!function(e){\"use strict\";\"function\"==typeof define&&define.amd?define([\"jquery\"],e):e(\"undefined\"!=typeof jQuery?jQuery:window.Zepto)}(function(e){\"use strict\";function t(t){var r=t.data;t.isDefaultPrevented()||(t.preventDefault(),e(t.target).ajaxSubmit(r))}function r(t){var r=t.target,a=e(r);if(!a.is(\"[type=submit],[type=image]\")){var n=a.closest(\"[type=submit]\");if(0===n.length)return;r=n[0]}var i=this;if(i.clk=r,\"image\"==r.type)if(void 0!==t.offsetX)i.clk_x=t.offsetX,i.clk_y=t.offsetY;else if(\"function\"==typeof e.fn.offset){var o=a.offset();i.clk_x=t.pageX-o.left,i.clk_y=t.pageY-o.top}else i.clk_x=t.pageX-r.offsetLeft,i.clk_y=t.pageY-r.offsetTop;setTimeout(function(){i.clk=i.clk_x=i.clk_y=null},100)}function a(){if(e.fn.ajaxSubmit.debug){var t=\"[jquery.form] \"+Array.prototype.join.call(arguments,\"\");window.console&&window.console.log?window.console.log(t):window.opera&&window.opera.postError&&window.opera.postError(t)}}var n={};n.fileapi=void 0!==e(\"<input type='file'/>\").get(0).files,n.formdata=void 0!==window.FormData;var i=!!e.fn.prop;e.fn.attr2=function(){if(!i)return this.attr.apply(this,arguments);var e=this.prop.apply(this,arguments);return e&&e.jquery||\"string\"==typeof e?e:this.attr.apply(this,arguments)},e.fn.ajaxSubmit=function(t){function r(r){var a,n,i=e.param(r,t.traditional).split(\"&\"),o=i.length,s=[];for(a=0;o>a;a++)i[a]=i[a].replace(/\\+/g,\" \"),n=i[a].split(\"=\"),s.push([decodeURIComponent(n[0]),decodeURIComponent(n[1])]);return s}function o(a){for(var n=new FormData,i=0;i<a.length;i++)n.append(a[i].name,a[i].value);if(t.extraData){var o=r(t.extraData);for(i=0;i<o.length;i++)o[i]&&n.append(o[i][0],o[i][1])}t.data=null;var s=e.extend(!0,{},e.ajaxSettings,t,{contentType:!1,processData:!1,cache:!1,type:u||\"POST\"});t.uploadProgress&&(s.xhr=function(){var r=e.ajaxSettings.xhr();return r.upload&&r.upload.addEventListener(\"progress\",function(e){var r=0,a=e.loaded||e.position,n=e.total;e.lengthComputable&&(r=Math.ceil(a/n*100)),t.uploadProgress(e,a,n,r)},!1),r}),s.data=null;var c=s.beforeSend;return s.beforeSend=function(e,r){r.data=t.formData?t.formData:n,c&&c.call(this,e,r)},e.ajax(s)}function s(r){function n(e){var t=null;try{e.contentWindow&&(t=e.contentWindow.document)}catch(r){a(\"cannot get iframe.contentWindow document: \"+r)}if(t)return t;try{t=e.contentDocument?e.contentDocument:e.document}catch(r){a(\"cannot get iframe.contentDocument: \"+r),t=e.document}return t}function o(){function t(){try{var e=n(g).readyState;a(\"state = \"+e),e&&\"uninitialized\"==e.toLowerCase()&&setTimeout(t,50)}catch(r){a(\"Server abort: \",r,\" (\",r.name,\")\"),s(k),j&&clearTimeout(j),j=void 0}}var r=f.attr2(\"target\"),i=f.attr2(\"action\"),o=\"multipart/form-data\",c=f.attr(\"enctype\")||f.attr(\"encoding\")||o;w.setAttribute(\"target\",p),(!u||/post/i.test(u))&&w.setAttribute(\"method\",\"POST\"),i!=m.url&&w.setAttribute(\"action\",m.url),m.skipEncodingOverride||u&&!/post/i.test(u)||f.attr({encoding:\"multipart/form-data\",enctype:\"multipart/form-data\"}),m.timeout&&(j=setTimeout(function(){T=!0,s(D)},m.timeout));var l=[];try{if(m.extraData)for(var d in m.extraData)m.extraData.hasOwnProperty(d)&&l.push(e.isPlainObject(m.extraData[d])&&m.extraData[d].hasOwnProperty(\"name\")&&m.extraData[d].hasOwnProperty(\"value\")?e('<input type=\"hidden\" name=\"'+m.extraData[d].name+'\">').val(m.extraData[d].value).appendTo(w)[0]:e('<input type=\"hidden\" name=\"'+d+'\">').val(m.extraData[d]).appendTo(w)[0]);m.iframeTarget||v.appendTo(\"body\"),g.attachEvent?g.attachEvent(\"onload\",s):g.addEventListener(\"load\",s,!1),setTimeout(t,15);try{w.submit()}catch(h){var x=document.createElement(\"form\").submit;x.apply(w)}}finally{w.setAttribute(\"action\",i),w.setAttribute(\"enctype\",c),r?w.setAttribute(\"target\",r):f.removeAttr(\"target\"),e(l).remove()}}function s(t){if(!x.aborted&&!F){if(M=n(g),M||(a(\"cannot access response document\"),t=k),t===D&&x)return x.abort(\"timeout\"),void S.reject(x,\"timeout\");if(t==k&&x)return x.abort(\"server abort\"),void S.reject(x,\"error\",\"server abort\");if(M&&M.location.href!=m.iframeSrc||T){g.detachEvent?g.detachEvent(\"onload\",s):g.removeEventListener(\"load\",s,!1);var r,i=\"success\";try{if(T)throw\"timeout\";var o=\"xml\"==m.dataType||M.XMLDocument||e.isXMLDoc(M);if(a(\"isXml=\"+o),!o&&window.opera&&(null===M.body||!M.body.innerHTML)&&--O)return a(\"requeing onLoad callback, DOM not available\"),void setTimeout(s,250);var u=M.body?M.body:M.documentElement;x.responseText=u?u.innerHTML:null,x.responseXML=M.XMLDocument?M.XMLDocument:M,o&&(m.dataType=\"xml\"),x.getResponseHeader=function(e){var t={\"content-type\":m.dataType};return t[e.toLowerCase()]},u&&(x.status=Number(u.getAttribute(\"status\"))||x.status,x.statusText=u.getAttribute(\"statusText\")||x.statusText);var c=(m.dataType||\"\").toLowerCase(),l=/(json|script|text)/.test(c);if(l||m.textarea){var f=M.getElementsByTagName(\"textarea\")[0];if(f)x.responseText=f.value,x.status=Number(f.getAttribute(\"status\"))||x.status,x.statusText=f.getAttribute(\"statusText\")||x.statusText;else if(l){var p=M.getElementsByTagName(\"pre\")[0],h=M.getElementsByTagName(\"body\")[0];p?x.responseText=p.textContent?p.textContent:p.innerText:h&&(x.responseText=h.textContent?h.textContent:h.innerText)}}else\"xml\"==c&&!x.responseXML&&x.responseText&&(x.responseXML=X(x.responseText));try{E=_(x,c,m)}catch(y){i=\"parsererror\",x.error=r=y||i}}catch(y){a(\"error caught: \",y),i=\"error\",x.error=r=y||i}x.aborted&&(a(\"upload aborted\"),i=null),x.status&&(i=x.status>=200&&x.status<300||304===x.status?\"success\":\"error\"),\"success\"===i?(m.success&&m.success.call(m.context,E,\"success\",x),S.resolve(x.responseText,\"success\",x),d&&e.event.trigger(\"ajaxSuccess\",[x,m])):i&&(void 0===r&&(r=x.statusText),m.error&&m.error.call(m.context,x,i,r),S.reject(x,\"error\",r),d&&e.event.trigger(\"ajaxError\",[x,m,r])),d&&e.event.trigger(\"ajaxComplete\",[x,m]),d&&!--e.active&&e.event.trigger(\"ajaxStop\"),m.complete&&m.complete.call(m.context,x,i),F=!0,m.timeout&&clearTimeout(j),setTimeout(function(){m.iframeTarget?v.attr(\"src\",m.iframeSrc):v.remove(),x.responseXML=null},100)}}}var c,l,m,d,p,v,g,x,y,b,T,j,w=f[0],S=e.Deferred();if(S.abort=function(e){x.abort(e)},r)for(l=0;l<h.length;l++)c=e(h[l]),i?c.prop(\"disabled\",!1):c.removeAttr(\"disabled\");if(m=e.extend(!0,{},e.ajaxSettings,t),m.context=m.context||m,p=\"jqFormIO\"+(new Date).getTime(),m.iframeTarget?(v=e(m.iframeTarget),b=v.attr2(\"name\"),b?p=b:v.attr2(\"name\",p)):(v=e('<iframe name=\"'+p+'\" src=\"'+m.iframeSrc+'\" />'),v.css({position:\"absolute\",top:\"-1000px\",left:\"-1000px\"})),g=v[0],x={aborted:0,responseText:null,responseXML:null,status:0,statusText:\"n/a\",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(t){var r=\"timeout\"===t?\"timeout\":\"aborted\";a(\"aborting upload... \"+r),this.aborted=1;try{g.contentWindow.document.execCommand&&g.contentWindow.document.execCommand(\"Stop\")}catch(n){}v.attr(\"src\",m.iframeSrc),x.error=r,m.error&&m.error.call(m.context,x,r,t),d&&e.event.trigger(\"ajaxError\",[x,m,r]),m.complete&&m.complete.call(m.context,x,r)}},d=m.global,d&&0===e.active++&&e.event.trigger(\"ajaxStart\"),d&&e.event.trigger(\"ajaxSend\",[x,m]),m.beforeSend&&m.beforeSend.call(m.context,x,m)===!1)return m.global&&e.active--,S.reject(),S;if(x.aborted)return S.reject(),S;y=w.clk,y&&(b=y.name,b&&!y.disabled&&(m.extraData=m.extraData||{},m.extraData[b]=y.value,\"image\"==y.type&&(m.extraData[b+\".x\"]=w.clk_x,m.extraData[b+\".y\"]=w.clk_y)));var D=1,k=2,A=e(\"meta[name=csrf-token]\").attr(\"content\"),L=e(\"meta[name=csrf-param]\").attr(\"content\");L&&A&&(m.extraData=m.extraData||{},m.extraData[L]=A),m.forceSync?o():setTimeout(o,10);var E,M,F,O=50,X=e.parseXML||function(e,t){return window.ActiveXObject?(t=new ActiveXObject(\"Microsoft.XMLDOM\"),t.async=\"false\",t.loadXML(e)):t=(new DOMParser).parseFromString(e,\"text/xml\"),t&&t.documentElement&&\"parsererror\"!=t.documentElement.nodeName?t:null},C=e.parseJSON||function(e){return window.eval(\"(\"+e+\")\")},_=function(t,r,a){var n=t.getResponseHeader(\"content-type\")||\"\",i=\"xml\"===r||!r&&n.indexOf(\"xml\")>=0,o=i?t.responseXML:t.responseText;return i&&\"parsererror\"===o.documentElement.nodeName&&e.error&&e.error(\"parsererror\"),a&&a.dataFilter&&(o=a.dataFilter(o,r)),\"string\"==typeof o&&(\"json\"===r||!r&&n.indexOf(\"json\")>=0?o=C(o):(\"script\"===r||!r&&n.indexOf(\"javascript\")>=0)&&e.globalEval(o)),o};return S}if(!this.length)return a(\"ajaxSubmit: skipping submit process - no element selected\"),this;var u,c,l,f=this;\"function\"==typeof t?t={success:t}:void 0===t&&(t={}),u=t.type||this.attr2(\"method\"),c=t.url||this.attr2(\"action\"),l=\"string\"==typeof c?e.trim(c):\"\",l=l||window.location.href||\"\",l&&(l=(l.match(/^([^#]+)/)||[])[1]),t=e.extend(!0,{url:l,success:e.ajaxSettings.success,type:u||e.ajaxSettings.type,iframeSrc:/^https/i.test(window.location.href||\"\")?\"javascript:false\":\"about:blank\"},t);var m={};if(this.trigger(\"form-pre-serialize\",[this,t,m]),m.veto)return a(\"ajaxSubmit: submit vetoed via form-pre-serialize trigger\"),this;if(t.beforeSerialize&&t.beforeSerialize(this,t)===!1)return a(\"ajaxSubmit: submit aborted via beforeSerialize callback\"),this;var d=t.traditional;void 0===d&&(d=e.ajaxSettings.traditional);var p,h=[],v=this.formToArray(t.semantic,h);if(t.data&&(t.extraData=t.data,p=e.param(t.data,d)),t.beforeSubmit&&t.beforeSubmit(v,this,t)===!1)return a(\"ajaxSubmit: submit aborted via beforeSubmit callback\"),this;if(this.trigger(\"form-submit-validate\",[v,this,t,m]),m.veto)return a(\"ajaxSubmit: submit vetoed via form-submit-validate trigger\"),this;var g=e.param(v,d);p&&(g=g?g+\"&\"+p:p),\"GET\"==t.type.toUpperCase()?(t.url+=(t.url.indexOf(\"?\")>=0?\"&\":\"?\")+g,t.data=null):t.data=g;var x=[];if(t.resetForm&&x.push(function(){f.resetForm()}),t.clearForm&&x.push(function(){f.clearForm(t.includeHidden)}),!t.dataType&&t.target){var y=t.success||function(){};x.push(function(r){var a=t.replaceTarget?\"replaceWith\":\"html\";e(t.target)[a](r).each(y,arguments)})}else t.success&&x.push(t.success);if(t.success=function(e,r,a){for(var n=t.context||this,i=0,o=x.length;o>i;i++)x[i].apply(n,[e,r,a||f,f])},t.error){var b=t.error;t.error=function(e,r,a){var n=t.context||this;b.apply(n,[e,r,a,f])}}if(t.complete){var T=t.complete;t.complete=function(e,r){var a=t.context||this;T.apply(a,[e,r,f])}}var j=e(\"input[type=file]:enabled\",this).filter(function(){return\"\"!==e(this).val()}),w=j.length>0,S=\"multipart/form-data\",D=f.attr(\"enctype\")==S||f.attr(\"encoding\")==S,k=n.fileapi&&n.formdata;a(\"fileAPI :\"+k);var A,L=(w||D)&&!k;t.iframe!==!1&&(t.iframe||L)?t.closeKeepAlive?e.get(t.closeKeepAlive,function(){A=s(v)}):A=s(v):A=(w||D)&&k?o(v):e.ajax(t),f.removeData(\"jqxhr\").data(\"jqxhr\",A);for(var E=0;E<h.length;E++)h[E]=null;return this.trigger(\"form-submit-notify\",[this,t]),this},e.fn.ajaxForm=function(n){if(n=n||{},n.delegation=n.delegation&&e.isFunction(e.fn.on),!n.delegation&&0===this.length){var i={s:this.selector,c:this.context};return!e.isReady&&i.s?(a(\"DOM not ready, queuing ajaxForm\"),e(function(){e(i.s,i.c).ajaxForm(n)}),this):(a(\"terminating; zero elements found by selector\"+(e.isReady?\"\":\" (DOM not ready)\")),this)}return n.delegation?(e(document).off(\"submit.form-plugin\",this.selector,t).off(\"click.form-plugin\",this.selector,r).on(\"submit.form-plugin\",this.selector,n,t).on(\"click.form-plugin\",this.selector,n,r),this):this.ajaxFormUnbind().bind(\"submit.form-plugin\",n,t).bind(\"click.form-plugin\",n,r)},e.fn.ajaxFormUnbind=function(){return this.unbind(\"submit.form-plugin click.form-plugin\")},e.fn.formToArray=function(t,r){var a=[];if(0===this.length)return a;var i,o=this[0],s=this.attr(\"id\"),u=t?o.getElementsByTagName(\"*\"):o.elements;if(u&&!/MSIE [678]/.test(navigator.userAgent)&&(u=e(u).get()),s&&(i=e(':input[form=\"'+s+'\"]').get(),i.length&&(u=(u||[]).concat(i))),!u||!u.length)return a;var c,l,f,m,d,p,h;for(c=0,p=u.length;p>c;c++)if(d=u[c],f=d.name,f&&!d.disabled)if(t&&o.clk&&\"image\"==d.type)o.clk==d&&(a.push({name:f,value:e(d).val(),type:d.type}),a.push({name:f+\".x\",value:o.clk_x},{name:f+\".y\",value:o.clk_y}));else if(m=e.fieldValue(d,!0),m&&m.constructor==Array)for(r&&r.push(d),l=0,h=m.length;h>l;l++)a.push({name:f,value:m[l]});else if(n.fileapi&&\"file\"==d.type){r&&r.push(d);var v=d.files;if(v.length)for(l=0;l<v.length;l++)a.push({name:f,value:v[l],type:d.type});else a.push({name:f,value:\"\",type:d.type})}else null!==m&&\"undefined\"!=typeof m&&(r&&r.push(d),a.push({name:f,value:m,type:d.type,required:d.required}));if(!t&&o.clk){var g=e(o.clk),x=g[0];f=x.name,f&&!x.disabled&&\"image\"==x.type&&(a.push({name:f,value:g.val()}),a.push({name:f+\".x\",value:o.clk_x},{name:f+\".y\",value:o.clk_y}))}return a},e.fn.formSerialize=function(t){return e.param(this.formToArray(t))},e.fn.fieldSerialize=function(t){var r=[];return this.each(function(){var a=this.name;if(a){var n=e.fieldValue(this,t);if(n&&n.constructor==Array)for(var i=0,o=n.length;o>i;i++)r.push({name:a,value:n[i]});else null!==n&&\"undefined\"!=typeof n&&r.push({name:this.name,value:n})}}),e.param(r)},e.fn.fieldValue=function(t){for(var r=[],a=0,n=this.length;n>a;a++){var i=this[a],o=e.fieldValue(i,t);null===o||\"undefined\"==typeof o||o.constructor==Array&&!o.length||(o.constructor==Array?e.merge(r,o):r.push(o))}return r},e.fieldValue=function(t,r){var a=t.name,n=t.type,i=t.tagName.toLowerCase();if(void 0===r&&(r=!0),r&&(!a||t.disabled||\"reset\"==n||\"button\"==n||(\"checkbox\"==n||\"radio\"==n)&&!t.checked||(\"submit\"==n||\"image\"==n)&&t.form&&t.form.clk!=t||\"select\"==i&&-1==t.selectedIndex))return null;if(\"select\"==i){var o=t.selectedIndex;if(0>o)return null;for(var s=[],u=t.options,c=\"select-one\"==n,l=c?o+1:u.length,f=c?o:0;l>f;f++){var m=u[f];if(m.selected){var d=m.value;if(d||(d=m.attributes&&m.attributes.value&&!m.attributes.value.specified?m.text:m.value),c)return d;s.push(d)}}return s}return e(t).val()},e.fn.clearForm=function(t){return this.each(function(){e(\"input,select,textarea\",this).clearFields(t)})},e.fn.clearFields=e.fn.clearInputs=function(t){var r=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var a=this.type,n=this.tagName.toLowerCase();r.test(a)||\"textarea\"==n?this.value=\"\":\"checkbox\"==a||\"radio\"==a?this.checked=!1:\"select\"==n?this.selectedIndex=-1:\"file\"==a?/MSIE/.test(navigator.userAgent)?e(this).replaceWith(e(this).clone(!0)):e(this).val(\"\"):t&&(t===!0&&/hidden/.test(a)||\"string\"==typeof t&&e(this).is(t))&&(this.value=\"\")})},e.fn.resetForm=function(){return this.each(function(){(\"function\"==typeof this.reset||\"object\"==typeof this.reset&&!this.reset.nodeType)&&this.reset()})},e.fn.enable=function(e){return void 0===e&&(e=!0),this.each(function(){this.disabled=!e})},e.fn.selected=function(t){return void 0===t&&(t=!0),this.each(function(){var r=this.type;if(\"checkbox\"==r||\"radio\"==r)this.checked=t;else if(\"option\"==this.tagName.toLowerCase()){var a=e(this).parent(\"select\");t&&a[0]&&\"select-one\"==a[0].type&&a.find(\"option\").selected(!1),this.selected=t}})},e.fn.ajaxSubmit.debug=!1});\r\n\r\n/* not losing floating form data */\r\nvar ffdata = {\r\n  pos: ['top', 'left'],\r\n  save: function() {\r\n    var data = {};\r\n    _.each(ffdata.pos, function(pos) {\r\n      data[pos] = $('#postclone').css(pos);\r\n    });\r\n    var savedOn = new Date().getTime();\r\n    data.savedon = savedOn;\r\n    ffdata.savedOn = savedOn;\r\n    $('#postform [name=ffdata_savedon]').val(savedOn);\r\n    localStorage.setItem('ffdata_'+this_board_dir+'_'+(ispage ? 'page' : $('#postform [name=replythread]').val()), JSON.stringify(data));\r\n    return true;\r\n  },\r\n  savedOn: false,\r\n  unload: function() {\r\n    $('#postform [name=ffdata_savedon]').val(ffdata.savedOn || new Date().getTime());\r\n  },\r\n  load: function() {\r\n    var key = 'ffdata_'+this_board_dir+'_'+(ispage ? 'page' : $('#postform [name=replythread]').val());\r\n    if(!localStorage[key]) return;\r\n    try {\r\n      let data = JSON.parse(localStorage[key]);\r\n      if(data.savedon && data.savedon == $('#postform [name=ffdata_savedon]').val()) {\r\n        _.each(ffdata.pos, function(pos) {\r\n          if(data.hasOwnProperty(pos)) $('#postclone').css(pos, data[pos]);\r\n        });\r\n        $('#postclone').show();\r\n      }\r\n      else localStorage.removeItem(key);\r\n      \r\n    }\r\n    catch(e) {\r\n      localStorage.removeItem(key);\r\n      console.log('unable to load form data', e)\r\n    }\r\n  }\r\n}\r\n\r\nvar embedLinks = {\r\n  sites: [\r\n    {id: 'youtube', rx: /(?:youtu(?:\\.be|be\\.com)\\/(?:.*v(?:\\/|=)|(?:.*\\/)?)([\\w'-]+))/ },\r\n    {id: 'vimeo',   rx: /[\\w\\W]*vimeo\\.com\\/(?:.*?)([0-9]+)(?:.*)?/ },\r\n    {id: 'coub',    rx: /[\\w\\W]*coub\\.com\\/view\\/([\\w\\W]*)[\\w\\W]*/ }\r\n  ],\r\n  process: function(val) {\r\n    var result = null;\r\n    _.each(this.sites, function(site) {\r\n      var fruit = site.rx.exec(val);\r\n      if(fruit != null) {\r\n        result = {\r\n          site: site.id,\r\n          code: fruit[1]\r\n        }\r\n      }\r\n    })\r\n    return result;\r\n  }\r\n}\r\n\r\nwindow.onbeforeunload = ffdata.unload;\r\n\r\nvar catalog = {\r\n  conf: {\r\n    sortBy: 'bumped',\r\n    layout: 'text',\r\n    respectStickied: true,\r\n    showHidden: true,\r\n    expandOnHover: true\r\n  },\r\n  saveConfig: function() {\r\n    localStorage['catalogSettings'] = JSON.stringify(this.conf);\r\n  },\r\n  init: function() {\r\n    // apply settings\r\n    if(localStorage['catalogSettings']) {\r\n      try {\r\n        var myConf = JSON.parse(localStorage['catalogSettings']);\r\n        _.each(myConf, function(val, key) {\r\n          this.conf[key] = val\r\n        }, this)\r\n      }\r\n      catch(e) {\r\n        console.error('Invalid catalog config');\r\n        localStorage.removeItem('catalogSettings');\r\n      }\r\n    }\r\n\r\n    var sortOptionElements = '';\r\n    _.each([\r\n      ['bumped', 'bumpOrder'],\r\n      ['replied', 'lastReply'],\r\n      ['timestamp', 'creationDate'],\r\n      ['reply_count', 'replyCount']\r\n    ], (function(val_desc) {\r\n      sortOptionElements += '<option value=\"'+val_desc[0]+'\"'+(val_desc[0]==this.conf.sortBy ? ' selected' : '')+'>'+_l[val_desc[1]]+'</option>';\r\n    }).bind(this));\r\n\r\n    // catalog control buttons\r\n    var sortBtns = '<div class=\"button-group\" data-select=\"sortBy\">';\r\n    _.each([\r\n      ['bumped', 'bumpOrder', 'bump', 'i-20'],\r\n      ['timestamp', 'creationDate', 'creation', 'i-20'],\r\n      ['replied', 'lastReply', 'reply', 'i-16in20'],\r\n      ['reply_count', 'replyCount', 'replies', 'i-20']\r\n    ], (function(v_d_i) {\r\n      sortBtns += '<div class=\"bg-button'+(v_d_i[0]==this.conf.sortBy ? ' bgb-selected' : '')+\r\n      '\" data-val=\"'+v_d_i[0]+'\" title=\"'+_l.sortBy+' '+_l[v_d_i[1]]+'\">\\\r\n      <svg class=\"icon '+v_d_i[3]+'\"><use xlink:href=\"#i-'+v_d_i[2]+'\"></use></svg></div>'\r\n    }).bind(this));\r\n    sortBtns += '</div>';\r\n    var pinBtns = '<div class=\"button-group'+(this.conf.sortBy !== 'bumped' ? ' disabled' : '')+'\" data-select=\"respectStickied\" id=\"pinControl\">';\r\n    _.each([\r\n      [1, 'doStick', 'pin', 'i-16in20'],\r\n      [0, 'doNotStick', 'unpin', 'i-16in20']\r\n    ], (function(v_d_i) {\r\n      pinBtns += '<div class=\"bg-button'+(v_d_i[0]==this.conf.respectStickied ? ' bgb-selected' : '')+\r\n      '\" data-val=\"'+v_d_i[0]+'\" title=\"'+_l[v_d_i[1]]+'\">\\\r\n      <svg class=\"icon '+v_d_i[3]+'\"><use xlink:href=\"#i-'+v_d_i[2]+'\"></use></svg></div>'\r\n    }).bind(this));\r\n    pinBtns += '</div>';\r\n    var hideBtns = '<div class=\"button-group\" data-select=\"showHidden\">';\r\n    _.each([\r\n      [0, 'hideHidden', 'hide', 'i-16in20'],\r\n      [1, 'showHidden', 'unhide', 'i-16in20']\r\n    ], (function(v_d_i) {\r\n      hideBtns += '<div class=\"bg-button'+(v_d_i[0]==this.conf.showHidden ? ' bgb-selected' : '')+\r\n      '\" data-val=\"'+v_d_i[0]+'\" title=\"'+_l[v_d_i[1]]+'\">\\\r\n      <svg class=\"icon '+v_d_i[3]+'\"><use xlink:href=\"#i-'+v_d_i[2]+'\"></use></svg></div>'\r\n    }).bind(this));\r\n    hideBtns += '</div>';\r\n    var layoutBtns = '<div class=\"button-group\" data-select=\"layout\">';\r\n    _.each([\r\n      ['text', 'smallPics', 'grid-small', 'i-20'],\r\n      ['gallery', 'largePics', 'gallery-grid', 'i-20'],\r\n      /*['legacy', 'legacyMode', 'legacy-grid', 'i-20']*/\r\n    ], (function(v_d_i) {\r\n      layoutBtns += '<div class=\"bg-button'+(v_d_i[0]==this.conf.layout ? ' bgb-selected' : '')+\r\n      '\" data-val=\"'+v_d_i[0]+'\" title=\"'+_l[v_d_i[1]]+'\">\\\r\n      <svg class=\"icon '+v_d_i[3]+'\"><use xlink:href=\"#i-'+v_d_i[2]+'\"></use></svg></div>'\r\n    }).bind(this));\r\n    layoutBtns += '</div>';\r\n    // searck input\r\n    var searchInput = '<input name=\"subject\" autocomplete=\"false\" class=\"button-group\" type=\"text\" id=\"cat-search\" placeholder=\"'+_l.search+'...\" /><input type=\"text\" name=\"FUCKYOUCHROMEFUCKYOU\" style=\"display:none;\"/>'\r\n\r\n    $('#catalog-controls').html(\r\n      sortBtns+pinBtns+searchInput+hideBtns+layoutBtns\r\n    );\r\n    this.load();\r\n    if(this.conf.expandOnHover)\r\n      $('#catalog-contents').addClass('expand-on-hover-enabled');\r\n    // Card events\r\n    $('#catalog-contents')\r\n    .on('click', '.namedate-overlay', function() {\r\n      $(this).toggleClass('date-on name-on');\r\n    })\r\n    .on('click', '.ce-text .bigThumb', function(ev) {\r\n      ev.stopPropagation(); ev.preventDefault(); \r\n      var $card = $(this).parents('.cat-entry');\r\n      $card.toggleClass('thumbExpanded');\r\n    })\r\n    .on('click', '.bigThumb audio, .bigThumb video', function(ev) {\r\n      ev.stopPropagation();\r\n    })\r\n    .on('animationstart webkitAnimationStart MSAnimationStart oanimationstart', (function(event) {\r\n      var $target = $(event.target);\r\n      if (event.originalEvent.animationName == \"embed-image-insert\" && !$target.hasClass('_inserted_')) \r\n        this.getEmbedThumb($target);\r\n    }).bind(this))\r\n    .on('mousedown', '.cat-prv', function(ev) {\r\n      ev.preventDefault();\r\n      PostPreviews._mouseover.bind(this)(ev);\r\n    })\r\n    .on('click', '.cat-prv', function(ev) {\r\n      ev.stopPropagation();\r\n      ev.preventDefault();\r\n    })\r\n    .on('mouseleave', '.cat-prv', function(ev) {\r\n      PostPreviews._mouseout.bind(this)(ev);\r\n    })\r\n    .on('click', '.i-hide', (function(ev) {\r\n      var $target = $(ev.currentTarget)\r\n      , $card = $target.parents('.cat-entry')\r\n      , threadID = $card.data('id')\r\n      , threadIX = _.findIndex(this.model, {'id': threadID})\r\n      , thread = this.model[threadIX];\r\n      thread.hidden = !thread.hidden;\r\n      // addClass won't work here for some reason\r\n      if(thread.hidden) {\r\n        $target[0].classList.add('hidden-on');\r\n        $target.html('<use xmlns:xlink=\"http://www.w3.org/1999/xlink\" xlink:href=\"#i-unhide\"></use>');\r\n        HiddenThreads.hide(threadID);\r\n        $card.addClass('thread-hidden')\r\n      } \r\n      else {\r\n        $target[0].classList.remove('hidden-on');\r\n        $target.html('<use xmlns:xlink=\"http://www.w3.org/1999/xlink\" xlink:href=\"#i-hide\"></use>');\r\n        HiddenThreads.unhide(threadID);\r\n        $card.removeClass('thread-hidden')\r\n      }\r\n      //invalidate rendered cache\r\n      this.model[threadIX] = thread;\r\n      delete this.rendered[this.conf.layout][threadID];\r\n    }).bind(this))\r\n    // catalog configuration\r\n    $('.bg-button').click((function(ev) {\r\n      var $target = $(ev.currentTarget);\r\n      if($target.hasClass('bgb-selected')) return;\r\n      var $group = $target.parent()\r\n      , val = $target.data('val')\r\n      , key = $group.data('select');\r\n      $group.find('.bg-button').removeClass('bgb-selected');\r\n      $target.addClass('bgb-selected');\r\n      if(key !== 'sortBy' && key !== 'layout') val = !!val;\r\n      else {\r\n        if(val == 'bumped') $('#pinControl').removeClass('disabled');\r\n        else $('#pinControl').addClass('disabled');\r\n      }\r\n      this.conf[key] = val;\r\n      this.saveConfig();\r\n      if(key !== 'showHidden') this.build();\r\n      else {\r\n        if(val) $('#catalog-contents').removeClass('hideHidden');\r\n        else $('#catalog-contents').addClass('hideHidden');\r\n      }\r\n    }).bind(this))\r\n    $('#refresh_catalog').click((function(ev) {\r\n      ev.preventDefault();\r\n      this.load();\r\n    }).bind(this));\r\n    //search\r\n    $('#cat-search').on('input', function() {\r\n      var query = $(this).val().toLowerCase().replace(/\\\"/, '\\\\\"');\r\n      try {\r\n        injector.remove('cat-search');\r\n      } catch(e) {}\r\n      if(query.length)\r\n        injector.inject('cat-search', '#catalog-contents .cat-entry:not([data-search *= \"'+query+'\"]) { display:none; }');\r\n      else injector.remove('cat-search');\r\n    }).trigger('input');\r\n  },\r\n  load: function() {\r\n    // clear data\r\n    this.rendered = {text: {}, gallery: {}};\r\n    this.model = null;\r\n    // get contents\r\n    $.getJSON('catalog.json?v='+(new Date().getTime()))\r\n    .done(this.build.bind(this))\r\n    .fail(function(err) {\r\n      throw err;\r\n    })\r\n  },\r\n  fileTypes: {\r\n    image: ['jpg', 'gif', 'png', 'webm'],\r\n    iconsAvailable: ['swf', 'mp3', 'ogg', 'cob', 'vim', 'you'],\r\n    audio: ['mp3', 'ogg'],\r\n    embed: ['cob', 'vim', 'you']\r\n  },\r\n  authorities: ['', 'Admin', 'Mod', '?', 'God'],\r\n  formatDate: function(timestamp, short) {\r\n    if(typeof short === 'undefined') short = false;\r\n    var date = new Date(timestamp * 1000)\r\n    , Dow = this.dateLocal.dows.hasOwnProperty(locale) ? this.dateLocal.dows[locale][date.getDay()] : this.dateLocal.dows.en[date.getDay()]\r\n    , yy = _.padLeft(date.getFullYear() % 100, 2, 0)\r\n    , mo = _.padLeft(date.getMonth()+1, 2, 0)\r\n    , Mon = (locale === 'ru') ? this.dateLocal.mons.ru[date.getMonth()] : date.getMonth()+1\r\n    , dd = _.padLeft(date.getDate(), 2, 0)\r\n    , hh = _.padLeft(date.getHours(), 2, 0)\r\n    , mm = _.padLeft(date.getMinutes(), 2, 0)\r\n    , ss = _.padLeft(date.getSeconds(), 2, 0);\r\n    return (short\r\n      ? ( (locale === 'ru')\r\n        ? (dd+'.'+mo+'.'+yy+' в ')\r\n        : (mo+'/'+dd+'/'+yy+' @ ') )\r\n      : ( (locale === 'ru') \r\n        ? (Dow+' '+dd+' '+Mon+'’'+yy+' в ')\r\n        : (mo+'/'+dd+'/'+yy+' ('+Dow+') @ ') )\r\n    ) + hh+':'+mm+':'+ss;\r\n  },\r\n  dateLocal: {\r\n    dows: {\r\n      ru: ['Пнд','Втр','Срд','Чтв','Птн','Сбт','Вск'],\r\n      en: ['Sun','Mon','Tue','Wen','Thu','Fri','Sat']\r\n    },\r\n    mons: {\r\n      ru: ['Янв','Фев','Мар','Апр','Май','Июн','Июл','Авг','Сен','Окт','Ноя','Дек']\r\n    }\r\n  },\r\n  build: function(data) {\r\n    if(typeof data === 'undefined') data = this.model;\r\n    if(!data) return;\r\n    // normalize\r\n    _.each(data, function(entry, i) {\r\n      _.each(['id', 'reply_count', 'bumped', 'replied', 'reply_count', 'timestamp', 'page', 'locked', 'stickied', 'deleted_timestamp'], function(prop) {\r\n        entry[prop] = ~~entry[prop];\r\n      })\r\n      data[i] = entry;\r\n    })\r\n    // Sort threads\r\n    if(this.conf.sortBy === 'bumped' && this.conf.respectStickied)\r\n      this.model = _.sortByOrder(data, ['stickied', 'bumped'], ['desc', 'desc']);\r\n    else {\r\n      var sby = [this.conf.sortBy];\r\n      if(this.conf.sortBy !== 'bumped')\r\n        sby.push('bumped')\r\n      this.model = _.sortByOrder(data, sby, _.repeat('desc', sby.length));\r\n    }\r\n\r\n    var html = '';\r\n\r\n    _.each(this.model, function(thread) {\r\n      html += this.buildEntry(thread);\r\n    }, this);\r\n\r\n    $('#catalog-contents').html(html);\r\n  },\r\n  getEmbedThumb: function($el) {\r\n    var site = $el.data('site'), id = $el.data('id'), img\r\n    , $thread = $el.parents('.cat-entry')\r\n    , threadID = $thread.data('id');\r\n    if(site == 'cob')\r\n      $.get(ku_boardspath+'/corpsy.php?code='+id, (function(res) {\r\n        $el.replaceWith('<img src=\"'+res.thumbnail_url+'\">');\r\n        this.rendered[this.conf.layout][threadID] = $thread[0].outerHTML;\r\n      }).bind(this));\r\n    if(site == 'vim')\r\n      $.get('http://vimeo.com/api/v2/video/'+id+'.json', (function(res) {\r\n        $el.replaceWith('<img src=\"'+res[0].thumbnail_medium+'\">');\r\n        this.rendered[this.conf.layout][threadID] = $thread[0].outerHTML\r\n      }).bind(this));\r\n  },\r\n\r\n  buildEntry: function(thread) {\r\n    if(this.rendered[this.conf.layout].hasOwnProperty(thread.id))\r\n      return this.rendered[this.conf.layout][thread.id];\r\n\r\n    if(!thread.processed) {\r\n      thread.url = '/'+this_board_dir+'/res/'+thread.id+'.html';\r\n      // --- Building blocks ---\r\n      // Thumbnails\r\n      var expanderBtn = '<svg class=\"actor icon cat-thumb-expand\"><use xlink:href=\"#i-expand\"></use></svg>',\r\n      playerBtn = '<svg class=\"actor icon cat-thumb-expand\"><use xlink:href=\"#i-play\"></use></svg>';\r\n      //  for images\r\n      if(!thread.file || thread.file === 'removed') {\r\n        thread.smallThumb = \r\n        '<a href=\"'+thread.url+'\" class=\"smallThumb\">\\\r\n          <div class=\"nofile-removed ctx\">'+(thread.file ? 'Удален' : 'No File')+'</div>'\r\n        +'</a>';\r\n      }\r\n      else {\r\n        if(_.includes(this.fileTypes.image, thread.file_type)) {\r\n          thread.fileTypeClass = 'image';\r\n          thread.smallThumb = \r\n          '<a href=\"'+thread.url+'\" class=\"smallThumb\">\\\r\n            <img src=\"thumb/'+thread.file+'c.'+(thread.file_type === 'webm' ? 'jpg' : thread.file_type)+'\">'\r\n          +'</a>';\r\n          thread.bigThumb = \r\n          '<img src=\"thumb/'+thread.file+'s.'+(thread.file_type === 'webm' ? 'jpg' : thread.file_type)+'\">';\r\n        }\r\n        //  small thumbnail for embeds and generic files\r\n        else {\r\n          var smallSrc = (_.includes(this.fileTypes.iconsAvailable, thread.file_type))\r\n          ? '/inc/filetypes/'+thread.file_type+'.png'\r\n          : '/inc/filetypes/generic'+(_.includes(this.fileTypes.embed, thread.file_type) ? '-embed' : '')+'.png';\r\n          var expandable = _.includes(this.fileTypes.embed, thread.file_type) || _.includes(this.fileTypes.audio, thread.file_type);\r\n          thread.smallThumb = \r\n          '<a href=\"'+thread.url+'\" class=\"smallThumb\">\\\r\n            <img src=\"'+smallSrc+'\">' +\r\n            /*+ ''+(expandable ? playerBtn : '') +*/\r\n          '</a>';\r\n        }\r\n        //  for embeds\r\n        if(_.includes(this.fileTypes.embed, thread.file_type)) {\r\n          thread.bigThumb = (thread.file_type == 'you')\r\n          ? '<img src=\"http://i.ytimg.com/vi/'+thread.file+'/mqdefault.jpg\">'\r\n          : '<div class=\"cat-bt-embed\" data-site=\"'+thread.file_type+'\" data-id=\"'+thread.file+'\"></div>';\r\n        }\r\n        //  for audios\r\n        if(_.includes(this.fileTypes.audio, thread.file_type)) {\r\n          thread.bigThumb = \r\n          '<audio src=\"src/'+thread.file+'.'+thread.file_type+'\" controls></audio>';\r\n        }\r\n      }\r\n      if(thread.file && thread.file !== 'removed')\r\n        thread.bigThumb = '<a target=\"_blank\" href=\"'+thread.url+'\" class=\"bigThumb\">'+thread.bigThumb+'</a>';\r\n\r\n      //OP\r\n      thread.op = '<a target=\"_blank\" title=\"'+_l.goToThread+'\" target=\"_blank\" href=\"'+thread.url+'\" class=\"op-number ctx\">#'+thread.id+'</a>';\r\n            \r\n      //preview\r\n      thread.preview = \r\n      '<a href=\"'+thread.url+'#'+thread.id+'\" class=\"actor cat-prv\">\\\r\n        <svg class=\"icon\"><use xlink:href=\"#i-eye\"></use></svg>\\\r\n      </a>';\r\n      \r\n      //counters\r\n      var repliesLabel = \r\n      '<svg class=\"icon\"><use xlink:href=\"#i-reply\"></use></svg>\\\r\n      <span class=\"ctx reply-count\">'+thread.reply_count+'</span>';\r\n      if(thread.last_reply)\r\n        repliesLabel = '<a href=\"'+thread.url+'#'+thread.last_reply+'\" class=\"actor cat-prv\">'+repliesLabel+'</a>';\r\n      var replies = \r\n      '<div class=\"infolabel\">'+repliesLabel+'</div>',\r\n      images = \r\n      '<div class=\"infolabel\">\\\r\n        <svg class=\"icon\"><use xlink:href=\"#i-picture\"></use></svg>\\\r\n        <span class=\"ctx image-count\">'+thread.images+'</span>\\\r\n      </div>',\r\n      page = \r\n      '<div class=\"infolabel il-page\">\\\r\n        <a title=\"'+_l.threadOnPage+' '+thread.page+'\" target=\"_blank\" href=\"/'+this_board_dir+'/' + ((thread.page > 0) ? thread.page+'.html' : '')+'#'+thread.id+'\" class=\"actor\">\\\r\n          <svg class=\"icon\"><use xlink:href=\"#i-page\"></use></svg>\\\r\n          <span class=\"ctx page-number\">'+thread.page+'</span>\\\r\n        </a>\\\r\n      </div>';\r\n      thread.countersCombined = replies+images+page;\r\n\r\n      //Poster name+date\r\n      thread.posterauthority = +thread.posterauthority;\r\n      thread.nameDatePriority = 'date';\r\n      if(localStorage['cat_nameDatePriority'] == 'name' || \r\n          (localStorage['cat_nameDatePriority'] != 'date' && \r\n            (thread.name || thread.tripcode || thread.posterauthority) \r\n          ) \r\n        ) thread.nameDatePriority = 'name';\r\n      \r\n      // Poster name\r\n      var poster = \r\n      (thread.name ? '<span class=\"ctx postername\">'+thread.name+'</span>' : '') + \r\n      (thread.tripcode ? '<span class=\"ctx postertrip\">!'+thread.tripcode+'</span>' : '') + \r\n      (thread.posterauthority ? '<span class=\"ctx admin\">&nbsp;##'+this.authorities[thread.posterauthority]+'##</span>' : '');\r\n      thread.poster = '<div class=\"cat-poster\"><span class=\"ctx\">by&nbsp;</span>'+ (poster || '<span class=\"ctx c-postername\">'+(this_board_defaultName || _l.anonymous)+'</span>')+'</div>';\r\n\r\n      // Date\r\n      var dn = ' style=\"display:none\"';\r\n      thread.date = '<div class=\"ctx cat-date cat-date-long\">'+this.formatDate(thread.timestamp)+'</div>';\r\n      thread.dateCompact = '<div class=\"ctx cat-date cat-date-short\">'+this.formatDate(thread.timestamp, 1)+'</div>';\r\n\r\n      //search data\r\n      thread.searchData = _.escape(stripHTML(thread.subject + ' ' + thread.message).toLowerCase());\r\n\r\n      thread.message = thread.message.replace(/\\\\\"/mg, '\"');\r\n\r\n      thread.processed = true;\r\n      this.model[_.findIndex(this.model, {id: thread.id})] = thread;\r\n    }\r\n    //indicators\r\n    thread = this.buildIndicators(thread);\r\n    \r\n    var html = this.layouts[this.conf.layout].bind(this)(thread);\r\n    this.rendered[this.conf.layout][thread.id] = html;\r\n    return html\r\n  },\r\n  buildIndicators: function(thread) {\r\n    // if(!thread.hasOwnProperty('hidden')) \r\n    thread.hidden =  _.includes((localStorage['hiddenThreads.'+this_board_dir] || '').split(','), ''+thread.id);\r\n    var pin = thread.stickied ? '<svg class=\"foradmin-act icon i-layer-1 i-pin\"><use xlink:href=\"#i-pin\"></use></svg>' : '',\r\n    lock = thread.locked ? '<svg class=\"foradmin-act icon i-layer-1 i-lock\"><use xlink:href=\"#i-lock\"></use></svg>' : '',\r\n    deathmark = thread.deleted_timestamp ? '<svg class=\"foradmin-act icon i-layer-1 i-deathmark\"><use xlink:href=\"#i-skull\"></use></svg>' : '',\r\n    hide = '<svg class=\"actor icon i-layer-1 i-hide'+(thread.hidden ? ' hidden-on' : '')+'\"><use xlink:href=\"#i-'+(thread.hidden ? 'unhide' : 'hide')+'\"></use></svg>',\r\n    burger = '<svg class=\"actor icon i-burger foradmin-show\"><use xlink:href=\"#i-burger\"></use></svg>',\r\n    del = '<svg class=\"actor icon i-layer-2 i-delete foradmin-show\"><use xlink:href=\"#i-x\"></use></svg>',\r\n    and = '<svg class=\"actor icon i-layer-2 i-dnb foradmin-show\"><use xlink:href=\"#i-and\"></use></svg>',\r\n    ban = '<svg class=\"actor icon i-layer-2 i-ban foradmin-show\"><use xlink:href=\"#i-ban\"></use></svg>';\r\n    thread.indicatorsCombined = '<div class=\"indicators\">'+burger+'<span class=\"i-layer-1\">'+deathmark+pin+lock+hide+'</span><span class=\"i-layer-2\">'+del+and+ban+'</span></div>';\r\n    return thread;\r\n  },\r\n  layouts: {\r\n    text: function(thread) {\r\n      return ''+\r\n      '<div data-id=\"'+thread.id+'\" class=\"cat-entry ce-text'+(thread.hidden ? ' thread-hidden' : '')+'\" data-search=\"'+thread.searchData+'\">\\\r\n        <div class=\"cat-card\">\\\r\n          <div class=\"ce-heda\">'\r\n            +thread.smallThumb+\r\n            '<div class=\"cat-infoline ci-op-link\">'\r\n              +thread.op\r\n              +thread.indicatorsCombined+\r\n            '</div>\\\r\n            <div class=\"cat-infoline namedate-overlay '+thread.nameDatePriority+'-on\">'\r\n              +thread.poster\r\n              +thread.date\r\n            +'</div>\\\r\n            <div class=\"cat-infoline\">'\r\n              +thread.preview\r\n              +thread.countersCombined+\r\n            '</div>\\\r\n          </div>\\\r\n          <div class=\"ce-opcontent ctx\">\\\r\n            <h5>'+thread.subject+'</h5>'+\r\n            thread.message+\r\n          '</div>\\\r\n        </div>'\r\n        +thread.bigThumb+\r\n      '</div>'\r\n    },\r\n    gallery: function(thread) {\r\n      return ''+\r\n      '<div data-id=\"'+thread.id+'\" class=\"cat-entry ce-gallery'+(thread.hidden ? ' thread-hidden' : '')+'\" data-search=\"'+thread.searchData+'\">\\\r\n        <div class=\"cat-card\">'+\r\n          thread.bigThumb+\r\n          '<div class=\"cat-infoline\">\\\r\n            <div class=\"ci-op-link\">'+thread.op+'</div>\\\r\n            <div class=\"counters\">'+thread.countersCombined+'</div>\\\r\n          </div>\\\r\n          <div class=\"cat-infoline\">'\r\n            +thread.preview+\r\n            '<div class=\"namedate-overlay '+thread.nameDatePriority+'-on\">'\r\n              +thread.poster\r\n              +thread.dateCompact\r\n            +'</div>'\r\n            +thread.indicatorsCombined+\r\n          '</div>\\\r\n          <div class=\"ce-opcontent ctx\">\\\r\n            <h5>'+thread.subject+'</h5>'+\r\n            thread.message+\r\n          '</div>\\\r\n        </div>\\\r\n      </div>'\r\n    }\r\n  }\r\n}\r\n\r\nfunction stripHTML(html) {\r\n  var tmp = document.implementation.createHTMLDocument(\"New\").body;\r\n  tmp.innerHTML = html;\r\n  return tmp.textContent || tmp.innerText || \"\";\r\n}\r\n\r\nfunction localMod() {\r\n  delandbanlinks($('*'), 1);\r\n}\r\n\r\nvar unreadCounter = {\r\n  init: function(built) {\r\n    if (!built) {\r\n      built = + document.querySelector('meta[property=\"i0:buildtime\"]').content\r\n    }\r\n    this.lastvisits = localStorage['lastvisits'] ? (JSON.parse(localStorage['lastvisits']) || { }) : { }\r\n    let last_ts = this.lastvisits.hasOwnProperty(boardid) ? parseInt(this.lastvisits[boardid]) : 0;\r\n    if(last_ts < built) {\r\n      this.lastvisits[boardid] = built\r\n      localStorage.setItem('lastvisits', JSON.stringify(this.lastvisits))\r\n    }\r\n  },\r\n  update: function() {\r\n    if (!this.lastvisits) {\r\n      this.init()\r\n    }\r\n    $.ajax({\r\n      url: '/newpostscount.php',\r\n      data: this.lastvisits,\r\n      dataType: 'json',\r\n      success: function(data) {\r\n        $('.newposts-counter').remove()\r\n        $('.got-updates').removeClass('got-updates')\r\n        _.each(data, function(val, brd) {\r\n          if ((+val) > 0) {\r\n            let valstr = `<span class=\"newposts-counter\"> (${val})</span>`\r\n            , $brd = $(`.menu-item[href=\"/${brd}/\"]`)\r\n            if ($brd.length) {\r\n              $brd.append(valstr)\r\n              $(`.sect-exr[data-toexpand=\"${$brd.parents('.menu-sect').attr('id').split('ms-')[1]}\"]`).parent().addClass('got-updates')\r\n            }\r\n            $(`.mobile-nav option[value=\"${brd}\"]`).append(valstr)\r\n          }\r\n        })\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nvar HTMLoader = {\r\n  loadThread: function(boardID, threadID, done, postID) {\r\n    $.get(threadID === '?' \r\n      ? `${ku_boardspath}/postbynumber.php?b=${boardID}&p=${postID}` \r\n      : `${ku_boardspath}/${boardID}/res/${threadID}.html`)\r\n    .then(data => {\r\n      let $data = $.parseHTML(data)\r\n      /* //unfinished\r\n      if (boardID === this_board_dir) {\r\n        let builtMeta = _.find($data, el => el.tagName==='META' && el.getAttribute('property')===\"i0:buildtime\")\r\n        if (builtMeta) {\r\n          unreadCounter.init(+builtMeta.content)\r\n        }\r\n      }*/\r\n      if (threadID === '?') {\r\n        let metaURL = _.find($data, el => el.tagName==='META' && el.getAttribute('property')===\"i0:thrno\")\r\n        if (metaURL) {\r\n          threadID = +metaURL.getAttribute('content')\r\n        }\r\n      }\r\n      let maintable = _.find($.parseHTML(data), {className: 'maintable'})\r\n      if (maintable && maintable instanceof Node) {\r\n        let posts = maintable.querySelectorAll('.postnode')\r\n        , postMap = []\r\n        if (posts.length) posts.forEach(post => {\r\n          let postID = + post.querySelector('input[type=checkbox]').value\r\n          postMap.push(postID)\r\n          this.cached[`${boardID}_${postID}`] = post.outerHTML\r\n        })\r\n        if (threadID !== '?') {\r\n          this.threadMaps[`${boardID}_${threadID}`] = postMap\r\n        }\r\n      }\r\n      done()\r\n    })\r\n    .fail(err => {\r\n      done(err.status || 'null')\r\n    })\r\n  },\r\n  getPost: function(boardID, threadID, postID, callback, secondTry) {\r\n    let cachedPost = this.cached[`${boardID}_${postID}`]\r\n    if (cachedPost) {\r\n      callback(false, cachedPost)\r\n      return\r\n    }\r\n    else {\r\n      if (!secondTry) {\r\n        let found = false\r\n        if (boardID === this_board_dir) {\r\n          let $post = $(`a[name=${postID}]`)\r\n          if ($post.length) {\r\n            let post = $post.parents('.postnode')[0].outerHTML\r\n            this.cached[`${boardID}_${postID}`] = post\r\n            found = true\r\n            callback(false, post)\r\n          }\r\n        }\r\n        if (!found) {\r\n          this.loadThread(boardID, threadID, err => {\r\n            if (err) {\r\n              callback(err)\r\n            }\r\n            else {\r\n              this.getPost(boardID, threadID, postID, callback, true)\r\n            }\r\n          }, postID)\r\n        }\r\n      }\r\n      else {\r\n        callback(null)\r\n      }\r\n    }\r\n  },\r\n  getThread: function(boardID, threadID, range, callback, secondTry, force) {\r\n    let threadMap = force ? false : this.threadMaps[`${boardID}_${threadID}`]\r\n    if (threadMap) {\r\n      if (range) {\r\n        threadMap = threadMap.filter(n => n > range[0] && n < range[1])\r\n      }\r\n      callback(false, threadMap.reduce((htm, postID) => htm + this.cached[`${boardID}_${postID}`], ''))\r\n    }\r\n    else {\r\n      if (!secondTry) {\r\n        this.loadThread(boardID, threadID, err => {\r\n          if (err) {\r\n            callback(err)\r\n          }\r\n          else {\r\n            this.getThread(boardID, threadID, range, callback, true)\r\n          }\r\n        })\r\n      }\r\n      else {\r\n        callback(null)\r\n      }\r\n    }\r\n  },\r\n  cached: {},\r\n  threadMaps: {}\r\n}"]}