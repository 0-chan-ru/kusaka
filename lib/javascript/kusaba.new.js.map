{"version":3,"sources":["es6/src/kusaba.new.js"],"names":["style_cookie","style_cookie_txt","style_cookie_site","ispage","kumod_set","is_entering","_messages","en","noLocalStorage","oops","blankResponse","watchlistAdd","expandingThread","newThread","NewThread","replyTo","cancel","update","updatingCounts","couldntFetch","noNewPosts","replies","settings_fxEnabled","settings_showReplies","settings_sfwMode","settings_expandImgFull","settings_constrainWidth","deletePosts","deleteFiles","enterCaptcha","selectText","dcls","watchOn","captcharot","threadUpdationAutomatically","stopFuckingDolls","del","delandban","ban","stickthread","unstickthread","lockthread","unlockthread","returnDesktop","returnTouch","forceDesktop","okay","captchalang","reply","imageDownscaledBy","videoDownscaledBy","toFit","newReplies","newThreadsAvailable","loading","anonymous","sortBy","bumpOrder","lastReply","creationDate","replyCount","doStick","showHidden","doNotStick","hideHidden","search","threadOnPage","goToThread","smallPics","largePics","legacyMode","threads","comments","active_since","last_active","active_on","tryAgain","xhrError","details","post","posts","deleted","deletedMulti","reported","reportedMulti","fileRemoved","file","collapse","deleteAsMod","deleteAsModVerbose","historyEmpty","ru","watchlistRemove","odc","_l","locale","hasOwnProperty","trace","console","log","f","arguments","callee","caller","path","re","fname","exec","toString","args","i","length","push","join","Array","prototype","indexOf","elt","len","from","Math","ceil","floor","Utf8","encode","string","String","fromCharCode","replace","c","utftext","n","charCodeAt","decode","c2","c3","Cookie","name","regexp","RegExp","hit","document","cookie","unescape","replaceAll","value","days","expires","date","Date","setTime","getTime","toGMTString","str","to","idx","insert","text","textarea","$","css","find","createTextRange","caretPos","charAt","setSelectionRange","start","selectionStart","end","selectionEnd","substr","focus","markup","$target","istart","iend","element","get","startPos","endPos","selected","substring","bullets","bullet","$area","val","split","newtxt","quote","b","a","v","eval","checkhighlight","match","location","highlight","id","offTimeout","removeClass","$post","parents","addClass","setTimeout","bcr","getBoundingClientRect","docHeight","documentElement","clientHeight","bottom","top","postX","scrollTop","spaceAround","height","window","scrollTo","get_password","pass","getCookie","rnd","random","togglePassword","passwordbox_html","html","toLowerCase","newhtml","show","toggleOptions","set_cookie","Styles","all","titles","init","_","each","getElementsByTagName","link","getAttribute","_default","hasAttribute","custom","current","customBypass","this_board_dir","in_array","initiated","decide","testingCSS","LSfetchJSON","title","addStyle","url","setStyle","$clink","click","ev","preventDefault","quitTest","parent","slideUp","$cancelLink","append","setCustom","sc","setDefault","change","stylename","removeBypass","addBypass","oldcookie","newcookie","brd","scrollAnchor","save","sheet","disabled","restore","onTest","m","capitalize","escape","$link","testStyle","pups","succ","time","confirmLongTermTest","localStorage","setItem","JSON","stringify","removeItem","moddelcheckbox","enabled","is","delandbanlinks","$scope","dnbinfo","attr","ku_cgipath","HiddenThreads","list","getItem","isHidden","threadid","hide","alert","newlist","unhide","slice","concat","togglethread","slideDown","toggleblotter","slideToggle","hideblotter","expandthread","board","$thread","expandFrom","expandTo","$omitted","$msg","prependTo","HTMLoader","getThread","err","replaceWith","replyMap","showReplies","getnewposts","scrollToID","onError","$lastQrl","last","lastpost","data","replies_container","$newposts_get","querySelector","insertAdjacentHTML","allPosts","querySelectorAll","targetReply","call","info","showLinks","href","ku_boardspath","offset","left","fadeIn","goingExternal","quickreply","round","externalBoard","preferUnpinned","appearsNew","isTouch","position","opacity","width","getwatchedthreads","ajax","success","error","xhr","status","popupMessage","content","delay","warn","Captcha","refresh","bind","injector","inject","captchaTimeout","shownOnce","cColor","offsetWidth","forEach","input","refreshOnce","Ajax","submitPost","form","alertsToRemove","clone","shownErrors","closeByID","showError","captchafield","ffdata","classList","add","fd","FormData","xr","XMLHttpRequest","open","action","onload","remove","el","res","parse","response","e","error_verbose","error_type","badatt","error_data","attachmenttype","resetForm","noko","checked","thread_replyto","post_id","reload","send","deletePost","confirm","postsDeleted","postErrors","item","$reply","prev","next","msg","map","message","reportPost","postsReported","deleteFile","field","fileErrors","modThread","$a","$posthead","$extrabtns","prepend","inspectFormData","formData","pair","entries","expandimg","postnum","imgurl","thumburl","imgw","imgh","thumbw","thumbh","getElementById","fc_width","$element","$postbody","$fc_filename","event","which","Settings","expandImgFull","img","max_w","clientWidth","body","offset_el","offsetLeft","offsetParent","new_w","ratio","zoom","notice","createElement","setAttribute","style","textDecoration","textNode","createTextNode","appendChild","insertBefore","innerHTML","maxWidth","PostPreviews","zindex","cached","_parseURL","matches","_mouseover","stopPropagation","isCatalog","hasClass","parsedURL","parentid","postid","previewid","preview","children","first","before","mouseleave","_mouseout","mouseover","onMouseOver","transformOrigin","clientY","pageY","clientX","pageX","right","zIndex","cursor","getPost","clearTimeout","fadeout","predelay","pre","_timings","transition","fade","postpreview","set_inputs","em","postpassword","set_delpass","special","load","callback","nodeType","tagName","src","complete","readyState","handler","apply","trigger","jQuery","_checkbox","clicked","settingName","defaultValue","removeAttr","fxEnabled","changed","fx","off","sfwMode","constrainWidth","rswap","swap","after","DocumentTouch","setCaptchaLang","lang","readyset","on","LatexIT","checkgotothread","checknamesave","bnrs","cloud20","filter","processNodeInsertion","menu_show","mouseenter","toggleClass","hideTimeout","target","head","js","OpenLatexEditor","expandwebm","newid","hover","dragsOff","drags","pinnerState","pinner","appendTo","$this","dataset","s","textbox","onfocus","onblur","xl","animate","htm","stripHTML","select","unwrapEmbed","wrapEmbed","originalEvent","animationName","countries","toUpperCase","dcxt","performTasks","$fig","$fsz","pause","embedLinks","process","code","site","nextCheckbox","prop","is_catalog","catalog","trip","getJSON","done","formatDate","fail","cssLink","styleName","unreadCounter","$node","prettyPrint","render","processEmbeds","tries","tasks","openSettings","closeSettings","addTask","fn","task","updater","ajaxPosting","newThreads","showNewThreads","thread","token","clearfields","lastvisits","timestamp","boardid","bpageNotify","room","newthread","$label","$form","xsend","container","vidID","ku_youtube_apikey","items","videotitle","snippet","thumbnail","thumbnail_large","thumbnail_url","kumod","mp3playerid","expandmp3","display","swfplayerid","expandswf","w","h","$mov","movieurl","dt","uid","makeid","video","play","promise","checkd","doc","navigatepages","ctrlKey","docloc","keyCode","submit","page","docloc_trimmed","lastIndexOf","docloc_valid","relativepost","maxthreads","getElementsByName","newrelativepost","addEventListener","attachEvent","NodeList","root","repliesContainer","links","linkData","className","linkN","includes","skip","elements","dimensions","mid","innerWidth","innerHeight","elMap","parentBCR","elems","abs","pos","relativeVisibleWidth","relativeVisibleHeight","dx","dy","primaryVisibility","secondaryVisibility","primaryOffset","secondaryOffset","sort","anchor","bcrBefore","saved","loaded","requestAnimationFrame","bcrAfter","scrollBy","x","lastTime","vendors","cancelAnimationFrame","currTime","timeToCall","max","menu_current","menu_last","dl","queue","clearQueue","menu_pin","toggle_oldmenu","innerText","mode","implementation","hasFeature","eqn","txt","atxt","extxt","r","g","replaceWithSrc","scope","normalizergb","toFixed","normalizergba","needle","haystack","triggerNativeEvent","eventName","fireEvent","evt","createEvent","initEvent","dispatchEvent","opt","extend","handle","$el","$drag","z_idx","drg_h","outerHeight","drg_w","outerWidth","pos_y","pos_x","pin","scrollLeft","triggerNative","$iw","paddingBottom","$ew","empty","onlycaptcha","randomString","stop","rottencaptcha","rotCaptcha","fields","alias","existing","type","styleSheet","cssText","removeChild","result","allboards","query","desc","opts","ku_boardsfolder","reduced","bnr","toDisplay","randomItem","getRandomInt","min","array","savedOn","savedon","unload","key","sites","rx","fruit","onbeforeunload","conf","layout","respectStickied","expandOnHover","saveConfig","myConf","val_desc","sortBtns","v_d_i","pinBtns","hideBtns","layoutBtns","searchInput","$card","getEmbedThumb","currentTarget","threadID","threadIX","findIndex","model","hidden","rendered","$group","build","gallery","fileTypes","image","jpgThumb","iconsAvailable","audio","embed","authorities","short","Dow","dateLocal","dows","getDay","yy","padLeft","getFullYear","mo","getMonth","Mon","mons","dd","getDate","hh","getHours","mm","getMinutes","ss","getSeconds","entry","sortByOrder","sby","repeat","buildEntry","outerHTML","thumbnail_medium","processed","embeds","smallThumb","file_type","thumb_w","thumb_h","ftype","thumbURL","vartype","bigThumb","smallSrc","expandable","op","repliesLabel","reply_count","last_reply","images","countersCombined","posterauthority","nameDatePriority","tripcode","poster","this_board_defaultName","dateCompact","searchData","subject","buildIndicators","layouts","stickied","lock","locked","deathmark","deleted_timestamp","indicatorsCombined","tmp","createHTMLDocument","textContent","built","last_ts","parseInt","dataType","valstr","$brd","loadThread","boardID","postID","force_html_nocache","then","thrno","postMap","threadMaps","secondTry","cachedPost","found","range","force","threadMap","reduce","switchFileType","exp","exts","uniqueId","now","buildAlert","marginTop","onclick","timeout","onHold","old","onmouseenter","stack","reverse","ar","onmouseleave","ae","holdOffTimeout","scheduleClose","aid","byID","busy","Promise","resolve","cooldown","shift","upd","cls","contentsOnly","contents","iconMap","historyToggle","destroy","toggle","overflow","defaultTimeout","container_id","contains","pupclass","options","historySize","cloneDeep","junkProperty"],"mappings":"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","file":"kusaba.new.js","sourcesContent":["'use strict';\n\nvar style_cookie;\nvar style_cookie_txt;\nvar style_cookie_site;\nvar kumod_set=false;\nvar ispage;\nvar is_entering=false;\n\nvar _messages = {\n  en: {\n    noLocalStorage: \"Your browser does not support LocalStorage\",\n    oops: \"Something went wrong...\",\n    blankResponse: \"blank response\",\n    watchlistAdd: \"Тред добавлен в список избранных.\",\n    expandingThread: \"Expanding thread...\",\n    newThread: \"new thread\",\n    NewThread: \"New thread\",\n    replyTo: \"reply to\",\n    cancel: \"Cancel\",\n    update: \"Update\",\n    updatingCounts: \"Updating...\",\n    couldntFetch: \"Cold not fetch this post\",\n    noNewPosts: \"No new posts\",\n    replies: \"Replies\",\n    settings_fxEnabled: \"Animation effects\",\n    settings_showReplies: \"Show replies inside posts\",\n    settings_sfwMode: \"NSFW mode\",\n    settings_expandImgFull: \"Expand images to full size\",\n    settings_constrainWidth: \"Constrain content width\",\n    deletePosts: \"Delete post(s)\",\n    deleteFiles: \"Delete file(s)\",\n    enterCaptcha: \"Please enter captcha.\",\n    selectText: \"Select some text\",\n    dcls: \"Double click to show source\",\n    watchOn: \"Watch on\",\n    captcharot: \"Captcha has rotted\",\n    threadUpdationAutomatically: \"Tread is being updated automatically.\",\n    stopFuckingDolls: \"<b>Отключите AJAX-отправку постов и AJAX-обновление треда.</b><br />(Кликните, чтобы закрыть)\",\n    del: \"Delete\",\n    delandban: \"Delete and ban\",\n    ban: \"Ban\",\n    stickthread: \"Stick thread\",\n    unstickthread: \"Unstick thread\",\n    lockthread: \"Lock thread\",\n    unlockthread: \"Unlock thread\",\n    returnDesktop: \"Switch to desktop interface\",\n    returnTouch: \"Switch to touch interface\",\n    forceDesktop: \"Force Desktop interface\",\n    okay: \"Okay\",\n    captchalang: \"Captcha language\",\n    reply: \"Reply\",\n    imageDownscaledBy: \"Image was downscaled by\",\n    videoDownscaledBy: \"Video was downscaled by\",\n    toFit: \"to feet screen\",\n    newReplies: \"New replies\",\n    newThreadsAvailable: \"New threads available.\",\n    loading: \"Loading\",\n    anonymous: \"Anonymous\",\n    sortBy: \"Sort by\",\n    bumpOrder: \"Bump order\",\n    lastReply: \"Last reply\",\n    creationDate: \"Creation date\",\n    replyCount: \"Reply count\",\n    doStick: \"Respect stickied\",\n    showHidden: \"Show hidden\",\n    doNotStick: \"Ignore stickied\",\n    hideHidden: \"Hide hidden\",\n    search: \"Search\",\n    threadOnPage: \"Thread is on page\",\n    goToThread: \"Go to thread\",\n    smallPics: \"Small pictures\",\n    largePics: \"Large pictures\",\n    legacyMode: \"Legacy mode\",\n    threads: \"Threads\",\n    comments: \"Replies\",\n    active_since: \"Active since\",\n    last_active: \"Last seen\",\n    active_on: \"Active on\",\n    tryAgain: \"Try again\",\n    xhrError: \"XHR error\",\n    details: \"details\",\n    post: 'Post',\n    posts: \"Posts\",\n    deleted:'has been deleted',\n    deletedMulti: 'have been deleted',\n    reported:'has been reported',\n    reportedMulti: 'have been reported',\n    fileRemoved: 'File<br>removed.',\n    file: 'File',\n    collapse: 'Collapse',\n    deleteAsMod: 'Delete as Mod',\n    deleteAsModVerbose: 'If the password does not match, delete posts using Moderator privelege',\n    historyEmpty: 'History is empty'\n  },\n  ru: {\n    noLocalStorage: \"localStorage не поддерживается браузером\",\n    oops: \"Что-то пошло не так...\",\n    blankResponse: \"пустой ответ\",\n    watchlistAdd: \"Тред добавлен в список избранных.\",\n    watchlistRemove: \"Тред удален из списка избранных.\",\n    expandingThread: \"Разворачиваем тред...\",\n    newThread: \"новый тред\",\n    NewThread: \"Создать тред\",\n    replyTo: \"ответ на\",\n    cancel: \"Отмена\",\n    update: \"Обновить\",\n    updatingCounts: \"Ищем новые посты...\",\n    couldntFetch: \"Не удалось загрузить этот пост\",\n    noNewPosts: \"Нет новых постов\",\n    replies: \"Ответы\",\n    settings_fxEnabled: \"Анимированные эффекты\",\n    settings_showReplies: \"Показывать ответы внутри поста\",\n    settings_sfwMode: \"Мамка в комнате\",\n    settings_expandImgFull: \"Разворачивать картинки до исходного размера\",\n    settings_constrainWidth: \"Ограничивать ширину контента\",\n    deletePosts: \"Удалить пост(ы)\",\n    deleteFiles: \"Удалить файл(ы)\",\n    enterCaptcha: \"Пожалуйста, введите капчу.\",\n    selectText: \"Текст не выделен\",\n    dcls: \"Double click to show source\",\n    watchOn: \"Смотреть на\",\n    odc: \"javascript:LatexIT.replaceWithSrc(this);\",\n    captcharot: \"Капча протухла\",\n    threadUpdationAutomatically: \"Тред обновляется автоматически\",\n    stopFuckingDolls: \"<b>Отключите AJAX-отправку постов и AJAX-обновление треда.</b><br />(Кликните, чтобы закрыть)\",\n    del: \"Удалить\",\n    delandban: \"Удалить и забанить\",\n    ban: \"Забанить\",\n    stickthread: \"Прикрепить тред\",\n    unstickthread: \"Отлепить тред\",\n    lockthread: \"Закрыть тред\",\n    unlockthread: \"Открыть тред\",\n    returnDesktop: \"Переключиться на десктопный интерфейс\",\n    returnTouch: \"Переключиться на тач-интерфейс\",\n    forceDesktop: \"Force Desktop interface\",\n    okay: \"Ясно\",\n    captchalang: \"Язык капчи\",\n    reply: \"Ответить\",\n    imageDownscaledBy: \"Картинка ужата на\",\n    videoDownscaledBy: \"Видео ужато на\",\n    toFit: \"по размеру окна\",\n    newReplies: \"Новых ответов\",\n    newThreadsAvailable: \"Доступны новые треды.\",\n    loading: \"Загружаем\",\n    anonymous: \"Аноним\",\n    sortBy: \"Сортировать по\",\n    bumpOrder: \"бампам\",\n    lastReply: \"дате ответов\",\n    creationDate: \"дате создания\",\n    replyCount: \"числу ответов\",\n    doStick: \"Прикреплять\",\n    showHidden: \"Показывать скрытые\",\n    doNotStick: \"Не прикреплять\",\n    hideHidden: \"Скрывать скрытые\",\n    search: \"Поиск\",\n    threadOnPage: \"Тред располагается на странице\",\n    goToThread: \"Перейти в тред\",\n    smallPics: \"Мелкие картинки\",\n    largePics: \"Большие картинки\",\n    legacyMode: \"Олдфажный режим\",\n    threads: \"Тредов\",\n    comments: \"Ответов\",\n    active_since: \"Присоединился\",\n    last_active: \"Был активен\",\n    active_on: \"Активен на\",\n    tryAgain: \"Попробовать снова\",\n    xhrError: \"Ошибка XHR\",\n    details: \"подробности\",\n    post: 'Пост',\n    posts: 'Посты',\n    deleted:'удален',\n    deletedMulti: 'удалены',\n    reported:': жалоба отправлена',\n    reportedMulti: ': жалобы отправлены',\n    fileRemoved: 'Файл<br>удален.',\n    file: 'Файл',\n    collapse: 'Свернуть',\n    deleteAsMod: 'Удалять от лица модератора',\n    deleteAsModVerbose: 'Если пароль не совпадает, удалять чужие посты с использованием административных привелегий',\n    historyEmpty: 'История пуста'\n  }\n}\n\nvar _l = (typeof locale !== 'undefined' && _messages.hasOwnProperty(locale)) ? _messages[locale] : _messages.ru;\n\nfunction trace() {\n  if (!console.log) return;\n\n  var f = arguments.callee.caller;\n  var path = arguments[0];\n  if (path == '') path += \"trace()\";\n\n  while (f != null) {\n    var re = /function ([^\\(]+)/;\n    var fname = re.exec(f.toString());\n    if (fname == null) fname = ''; else fname = fname[1];\n    var args = [];\n    for (var i = 0; i < f.arguments.length; i++) args.push(f.arguments[i]);\n    fname += \"(\" + args.join(', ') + \")\";\n    path += ' <- ' + fname;\n    f = f.caller;\n  }\n  console.log(path);\n}\n\n/* IE/Opera fix, because they need to go learn a book on how to use indexOf with arrays */\nif (!Array.prototype.indexOf) {\n  Array.prototype.indexOf = function(elt /*, from*/) {\n  var len = this.length;\n\n  var from = Number(arguments[1]) || 0;\n  from = (from < 0)\n     ? Math.ceil(from)\n     : Math.floor(from);\n  if (from < 0)\n    from += len;\n\n  for (; from < len; from++) {\n    if (from in this &&\n      this[from] === elt)\n    return from;\n  }\n  return -1;\n  };\n}\n\n/* Utf8 strings de-/encoder */\nvar Utf8 = {\n  // public method for url encoding\n  encode : function (string) {\n    string = string.replace(/\\r\\n/g,\"\\n\");\n    var utftext = \"\";\n    for (var n = 0; n < string.length; n++) {\n      var c = string.charCodeAt(n);\n      if (c < 128) {\n        utftext += String.fromCharCode(c);\n      }\n      else if((c > 127) && (c < 2048)) {\n        utftext += String.fromCharCode((c >> 6) | 192);\n        utftext += String.fromCharCode((c & 63) | 128);\n      }\n      else {\n        utftext += String.fromCharCode((c >> 12) | 224);\n        utftext += String.fromCharCode(((c >> 6) & 63) | 128);\n        utftext += String.fromCharCode((c & 63) | 128);\n      }\n    }\n    return utftext;\n  },\n  // public method for url decoding\n  decode : function (utftext) {\n    var string = \"\", i = 0, c = 0, c1 = 0, c2 = 0, c3 = 0\n    while ( i < utftext.length ) {\n      c = utftext.charCodeAt(i);\n      if (c < 128) {\n        string += String.fromCharCode(c);\n        i++;\n      }\n      else if((c > 191) && (c < 224)) {\n        c2 = utftext.charCodeAt(i+1);\n        string += String.fromCharCode(((c & 31) << 6) | (c2 & 63));\n        i += 2;\n      }\n      else {\n        c2 = utftext.charCodeAt(i+1);\n        c3 = utftext.charCodeAt(i+2);\n        string += String.fromCharCode(((c & 15) << 12) | ((c2 & 63) << 6) | (c3 & 63));\n        i += 3;\n      }\n    }\n    return string;\n  }\n}\n\nfunction Cookie(name) {\n  if (arguments.length == 1) {\n    // with(document.cookie) {\n      var regexp=new RegExp(\"(^|;\\\\s+)\"+name+\"=(.*?)(;|$)\");\n      var hit=regexp.exec(document.cookie);\n      if(hit&&hit.length>2) return Utf8.decode(unescape(replaceAll(hit[2],'+','%20')));\n      else return '';\n    // }\n  } else {\n    var value = arguments[1]\n    , days = arguments[2]\n    , expires=\"\"\n    if(days) {\n      var date=new Date();\n      date.setTime(date.getTime()+(days*24*60*60*1000));\n      expires=\"; expires=\"+date.toGMTString();\n    }\n    document.cookie=name+\"=\"+value+expires+\"; path=/\";\n  }\n}\n\n\nfunction replaceAll(str, from, to) {\n  var idx = str.indexOf( from );\n  while ( idx > -1 ) {\n    str = str.replace( from, to );\n    idx = str.indexOf( from );\n  }\n  return str;\n}\n\n\nfunction insert(text) {\n  var textarea = (($('#postclone').length && $('#postclone').css('display') !== 'none') ? $('#postclone') : $('#postform')).find('textarea')[0];\n  if(textarea) {\n    if(textarea.createTextRange && textarea.caretPos) { // IE\n      var caretPos=textarea.caretPos;\n      caretPos.text=caretPos.text.charAt(caretPos.text.length-1)==\" \"?text+\" \":text;\n    } else if(textarea.setSelectionRange) { // Firefox\n      var start=textarea.selectionStart;\n      var end=textarea.selectionEnd;\n      textarea.value=textarea.value.substr(0,start)+text+textarea.value.substr(end);\n      textarea.setSelectionRange(start+text.length,start+text.length);\n    } else {\n      textarea.value+=text+\" \";\n    }\n    textarea.focus();\n  }\n  if($('#postclone').css('display') !== 'none') return false;\n}\n\nfunction markup($target, start, end, istart, iend) {\n  let element = $target.find('textarea').get(0);\n  if (element.selectionStart || element.selectionStart == '0') {\n    element.focus();\n    let startPos = element.selectionStart\n    , endPos = element.selectionEnd\n    , selected = element.value.substring(startPos, endPos);\n    if(selected.indexOf('\\n') === (-1) && typeof istart !== \"undefined\" && typeof iend !== \"undefined\") {\n      start = istart; end = iend;\n    }\n    element.value = element.value.substring(0, startPos) + start + element.value.substring(startPos, endPos) + end + element.value.substring(endPos, element.value.length);\n  } else {\n    element.value += start + end;\n  }\n}\n\nfunction bullets($target, bullet, istart, iend) {\n  let $area = $target.find('textarea')\n  , element = $area.get(0)\n  , startPos = element.selectionStart\n  , endPos = element.selectionEnd\n  , selected = $area.val().substring(startPos, endPos)\n  if(selected.indexOf('\\n') === (-1) && typeof istart !== \"undefined\" && typeof iend !== \"undefined\") {\n    element.value = element.value.substring(0, startPos) + istart + element.value.substring(startPos, endPos) + iend + element.value.substring(endPos, element.value.length);\n  }\n  else {\n    selected = $area.val().substring(startPos, endPos).split('\\n');\n    var newtxt = \"\";\n    for(var i=0; i<selected.length; i++) {\n      newtxt += (bullet + selected[i]);\n      if(i < (selected.length - 1)) newtxt += '\\n';\n    }\n    $area.val(\n      $area.val().substring(0, startPos)\n      + newtxt +\n      $area.val().substring(endPos)\n    );\n  }\n}\n\nfunction quote(b, a) {\n  var v = eval(\"document.\" + a + \".message\");\n  v.value += \">>\" + b + \"\\n\";\n  v.focus();\n}\n\nfunction checkhighlight() {\n  var match;\n  if(match=/#i([0-9]+)/.exec(document.location.toString()))\n    if(!$('#postform textarea').val())\n      insert(\">>\"+match[1]);\n  if(match=/#([0-9]+)/.exec(document.location.toString()))\n    highlight(match[1]);\n}\n\nfunction highlight(id, offTimeout=0) {\n  $('.highlight').removeClass('highlight');\n  let $post = $(`#delform a[name=\"${id}\"]`).parents('.reply, .op')\n  , post = $post[0]\n  if (! post) return 'not-found';\n  $post.addClass('highlight');\n  if (offTimeout) {\n    setTimeout(() => $post.removeClass('highlight'), offTimeout)\n  }\n  // Scroll to post\n  let bcr = post.getBoundingClientRect()\n  , docHeight = document.documentElement.clientHeight\n  if (bcr.bottom > docHeight || bcr.top < 0) {\n    let postX = bcr.top + document.documentElement.scrollTop\n    , spaceAround = docHeight - bcr.height\n    window.scrollTo(0, postX - (spaceAround ? Math.ceil(spaceAround/2) : 0))\n  }\n}\n\nfunction get_password(name) {\n  var pass = getCookie(name);\n  if(pass) return pass;\n\n  var chars=\"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789\";\n  pass='';\n\n  for(var i=0;i<8;i++) {\n    var rnd = Math.floor(Math.random()*chars.length);\n    pass += chars.substring(rnd, rnd+1);\n  }\n  Cookie(name, pass, 365);\n  return(pass);\n}\n\nfunction togglePassword() {\n  var passwordbox_html = $(\"#passwordbox\").html().toLowerCase();\n  var newhtml = '<td></td><td></td>';\n  if (passwordbox_html == newhtml) {\n    newhtml = '<td class=\"postblock\">Mod</td><td><input type=\"text\" name=\"modpassword\" size=\"28\" maxlength=\"75\">&nbsp;<acronym title=\"Display staff status (Mod/Admin)\">D</acronym>:&nbsp;<input type=\"checkbox\" name=\"displaystaffstatus\" checked>&nbsp;<acronym title=\"Lock\">L</acronym>:&nbsp;<input type=\"checkbox\" name=\"lockonpost\">&nbsp;&nbsp;<acronym title=\"Sticky\">S</acronym>:&nbsp;<input type=\"checkbox\" name=\"stickyonpost\">&nbsp;&nbsp;<acronym title=\"Raw HTML\">RH</acronym>:&nbsp;<input type=\"checkbox\" name=\"rawhtml\">&nbsp;&nbsp;<acronym title=\"Name\">N</acronym>:&nbsp;<input type=\"checkbox\" name=\"usestaffname\"></td>';\n  }\n  $(\"#passwordbox\").html(newhtml).show();\n  return false;\n}\n\n/* used for textboards only, deleted, src in clean */\nfunction toggleOptions(D,C,B){ trace('deprecated!') }\n\n// proxied functions\nfunction getCookie(name)                {   return Cookie(name)                     }\nfunction set_cookie(name,value,days)    {   return Cookie(name,value,days)          }\n\nvar Styles = {\n  all: [], titles: [],\n  init: function() {\n    _.each(document.getElementsByTagName(\"link\"), function(link) {\n      if(link.getAttribute(\"rel\").indexOf(\"style\")!=-1 && link.getAttribute(\"title\")) {\n        this.all.push(link);\n        this.titles.push(link.getAttribute(\"title\"));\n        if(link.getAttribute(\"rel\").indexOf(\"alternate\")===-1) {\n          this._default = link.getAttribute(\"title\");\n        }\n        if(link.hasAttribute(\"data-custom\")) {\n          this.custom = link.getAttribute(\"title\");\n        }\n      }\n    }, this);\n    this.current = this._default;\n    var customBypass = getCookie('bypasscustom');\n    this.customBypass = (customBypass.length && typeof this_board_dir !== 'undefined' && in_array(this_board_dir, customBypass.split('|'))) ? true : false;\n    this.initiated = true\n  },\n  decide: function() {\n    this.init();\n    var testingCSS = LSfetchJSON('testing-css')\n    if(testingCSS) {\n      let title = this.addStyle(testingCSS.url, testingCSS.title)\n      this.setStyle(title)\n      var $clink = $('<a href=\"#\">Отключить тестирование '+title+'.css</a>')\n      $clink.click(function(ev) {\n        ev.preventDefault()\n        Styles.quitTest()\n        $(this).parent().slideUp()\n      })\n      this.$cancelLink = $('<div style=\"font-weight: bold\"></div>').append($clink)\n      return\n    }\n    if(this.hasOwnProperty('custom') && !this.customBypass)\n      return this.setCustom();\n    var sc = getCookie(style_cookie);\n    if(sc && in_array(sc, this.titles))\n      this.setStyle(sc);\n    else {\n      this.setDefault();\n      set_cookie(\"kustyle_site\",this._default,365);\n      set_cookie(\"kustyle\",this._default,365);\n    }\n  },\n  change: function(stylename) {\n    if(!in_array(stylename, this.titles) || this.current === stylename) return;\n    this.setStyle(stylename);\n    if(this.hasOwnProperty('custom') && this.custom === stylename) {\n      this.removeBypass();\n    }\n    else {\n      if(this.hasOwnProperty('custom'))\n        this.addBypass();\n      set_cookie(\"kustyle_site\",stylename,365);\n      set_cookie(\"kustyle\",stylename,365);\n    }\n  },\n  removeBypass: function() {\n    if(!this.customBypass || typeof this_board_dir === 'undefined') return;\n    this.customBypass = false;\n    var oldcookie = getCookie('bypasscustom').split('|'), newcookie = [];\n    _.each(oldcookie, function(brd) {\n      if(brd !== this_board_dir) newcookie.push(brd);\n    });\n    newcookie = newcookie.length ? newcookie.join('|') : '';\n    set_cookie(\"bypasscustom\",newcookie,365);\n  },\n  addBypass: function() {\n    if(this.customBypass || typeof this_board_dir === 'undefined') return;\n    this.customBypass = true;\n    var cookie = getCookie('bypasscustom').split('|');\n    if(!in_array(this_board_dir, cookie)) {\n      cookie.push(this_board_dir);\n      set_cookie(\"bypasscustom\",cookie.join('|'),365);\n    }\n  },\n  setDefault: function() {\n    if(this.hasOwnProperty('_default') && this.current !== this._default)\n      this.setStyle(this._default);\n  },\n  setCustom: function() {\n    if(this.hasOwnProperty('custom'))\n      this.setStyle(this.custom);\n  },\n  setStyle: function(stylename) {\n    if(!in_array(stylename, this.titles)) return;\n    if (scrollAnchor && scrollAnchor.save)\n      scrollAnchor.save('setstyle', '.postnode', window, 'v');\n    _.each(this.all, function(sheet) {\n      sheet.disabled=true;    // Hello IE\n      if(sheet.getAttribute(\"title\") === stylename)\n        sheet.disabled=false;\n    });\n    if (scrollAnchor && scrollAnchor.restore)\n      scrollAnchor.restore('setstyle');\n    this.current = stylename;\n  },\n  onTest: null,\n  addStyle: function(url, title='') {\n    if (! title) {\n      let m = /(?:.+\\/)?(.+)\\.css/i.exec(url)\n      if(!m) return;\n      title = m[1]\n    }\n    title = _.capitalize(_.escape(title))\n    if(!in_array(title, this.titles)) {\n      var $link = $('<link rel=\"stylesheet\" type=\"text/css\" href=\"'+url+'\" title=\"'+title+'\" disabled>')\n      $('head').append($link);\n      this.titles.push(title)\n      this.all.push($link[0])\n    }\n    return title\n  },\n  testStyle: function(url, title) {\n    title = this.addStyle(url, title)\n    this.setStyle(title)\n    this.onTest = {\n      url: url,\n      title: title\n    }\n    pups.succ(`Установлен стиль ${title}.\n      <div class=\"styletest-form\">\n        <button onclick=\"Styles.confirmLongTermTest()\">OK</button>\n        <button onclick=\"Styles.quitTest()\">${_l.cancel}</button>\n      </div>`, {time: 0, save: true})\n  },\n  confirmLongTermTest: function() {\n    if(this.onTest)\n      localStorage.setItem('testing-css', JSON.stringify(this.onTest))\n  },\n  quitTest: function() {\n    localStorage.removeItem('testing-css')\n    this.decide()\n  }\n}\n\nif(style_cookie) Styles.decide();\n\nfunction moddelcheckbox() {\n  $('.userdelete').append(`<label for=\"delasmod\" title=\"${_l.deleteAsModVerbose}\"><input${(+localStorage['deleteasmod']) ? ' checked' : ''} id=\"delasmod\" type=\"checkbox\" name=\"moddelete\" val=\"1\">&nbsp;${_l.deleteAsMod}</label>`)\n  $('#delasmod').change(function() {\n    let enabled = $(this).is(':checked')\n    localStorage['deleteasmod'] = +enabled\n  })\n}\n\nfunction delandbanlinks($scope=$('body')) {\n  $scope.find('span[id^=dnb]').each(function(index,element) {\n    let dnbinfo = $(this).attr('id').split('-')\n    /*, newhtml = `\n      <span class=\"btngroup\">\n        <a href=\"${ku_cgipath}/manage_page.php?action=delposts&amp;boarddir=${dnbinfo[1]}&amp;del${dnbinfo[3] == 'y' ? 'thread' : 'post'}id=${dnbinfo[2]}\" title=\"${_l.del}\"\n        onclick=\"return confirm('${_l.delPost}?');\">\n          <svg class=\"icon b-icon sb-l\">\n            <use xmlns:xlink=\"http://www.w3.org/1999/xlink\" xlink:href=\"#i-x\"></use>\n          </svg>\n        </a>\n        <a href=\"${ku_cgipath}/manage_page.php?action=delposts&amp;boarddir=${dnbinfo[1]}&amp;del${dnbinfo[3] == 'y' ? 'thread' : 'post'}id=${dnbinfo[2]}&amp;postid=${dnbinfo[2]}\"\n        title=\"Удалить и забанить\" onclick=\"return confirm('${_l.delAndBan}?');\">\n          <svg class=\"icon b-icon sb-c\">\n            <use xmlns:xlink=\"http://www.w3.org/1999/xlink\" xlink:href=\"#i-and\"></use>\n          </svg>\n        </a>\n        <a href=\"${ku_cgipath}/manage_page.php?action=bans&amp;banboard=${dnbinfo[1]}&amp;banpost=${dnbinfo[2]}\" title=\"Забанить\">\n          <svg class=\"icon b-icon sb-r\">\n            <use xmlns:xlink=\"http://www.w3.org/1999/xlink\" xlink:href=\"#i-ban\"></use>\n          </svg>\n        </a>\n      </span>\n    `*/\n    , newhtml = `\n      <a href=\"${ku_cgipath}/manage_page.php?action=bans&amp;banboard=${dnbinfo[1]}&amp;banpost=${dnbinfo[2]}\" title=\"${_l.ban}\">\n        <svg class=\"icon b-icon\">\n          <use xmlns:xlink=\"http://www.w3.org/1999/xlink\" xlink:href=\"#i-ban\"></use>\n        </svg>\n      </a>\n    `\n\n    if (dnbinfo[3] == 'y') {\n      newhtml += `\n        <a class=\"stickypost-btn\" onclick=\"Ajax.modThread(this, 'stickypost'); return false\"\n        href=\"${ku_cgipath}/manage_page.php?action=stickypost&amp;board=${dnbinfo[1]}&amp;postid=${dnbinfo[2]}\" title=\"${_l.stickthread}\">\n          <svg class=\"icon b-icon\">\n            <use xmlns:xlink=\"http://www.w3.org/1999/xlink\" xlink:href=\"#i-pin\"></use>\n          </svg>\n        </a>\n        <a class=\"unstickypost-btn\" onclick=\"Ajax.modThread(this, 'unstickypost'); return false\"\n        href=\"${ku_cgipath}/manage_page.php?action=unstickypost&amp;board=${dnbinfo[1]}&amp;postid=${dnbinfo[2]}\" title=\"${_l.unstickthread}\">\n          <svg class=\"icon b-icon\">\n            <use xmlns:xlink=\"http://www.w3.org/1999/xlink\" xlink:href=\"#i-unpin\"></use>\n          </svg>\n        </a>\n        <a class=\"lockpost-btn\" onclick=\"Ajax.modThread(this, 'lockpost'); return false\"\n        href=\"${ku_cgipath}/manage_page.php?action=lockpost&amp;board=${dnbinfo[1]}&amp;postid=${dnbinfo[2]}\" title=\"${_l.lockthread}\">\n          <svg class=\"icon b-icon\">\n            <use xmlns:xlink=\"http://www.w3.org/1999/xlink\" xlink:href=\"#i-lock\"></use>\n          </svg>\n        </a>\n        <a class=\"unlockpost-btn\" onclick=\"Ajax.modThread(this, 'unlockpost'); return false\"\n        href=\"${ku_cgipath}/manage_page.php?action=unlockpost&amp;board=${dnbinfo[1]}&amp;postid=${dnbinfo[2]}\" title=\"${_l.unlockthread}\">\n          <svg class=\"icon b-icon\">\n            <use xmlns:xlink=\"http://www.w3.org/1999/xlink\" xlink:href=\"#i-unlock\"></use>\n          </svg>\n        </a>\n      `\n    }\n\n    $(this).html(newhtml);\n  });\n}\n\nvar HiddenThreads = {\n  list: function() {\n    if (localStorage == null) {\n      trace(_l.noLocalStorage);\n      return [];\n    }\n    var list = localStorage.getItem('hiddenThreads.' + this_board_dir);\n    if (list == null) return [];\n    return list.split(',');\n  },\n  isHidden: function(threadid) { return HiddenThreads.list().indexOf(threadid) != -1 },\n  hide: function(threadid) {\n    if (localStorage == null) alert(_l.noLocalStorage);\n    else {\n      var newlist = HiddenThreads.list();\n      newlist.push(threadid.toString());\n      localStorage.setItem('hiddenThreads.' + this_board_dir, newlist.join(','));\n    }\n  },\n  unhide: function(threadid) {\n    if (localStorage == null) alert(_l.noLocalStorage);\n    else {\n      var list = HiddenThreads.list();\n      var i = list.indexOf(threadid.toString());\n      if (i == -1) return;\n      var newlist = list.slice(0,i);\n      newlist = newlist.concat(list.slice(i+1));\n      localStorage.setItem('hiddenThreads.' + this_board_dir, newlist.join(','));\n    }\n  }\n}\n\nfunction togglethread(threadid) {\n  if (HiddenThreads.isHidden(threadid)) {\n    $('#unhidethread' + threadid + this_board_dir).slideUp();\n    $('#thread' + threadid + this_board_dir).slideDown();\n    HiddenThreads.unhide(threadid);\n  } else {\n    $('#unhidethread' + threadid + this_board_dir).slideDown();\n    $('#thread' + threadid + this_board_dir).slideUp();\n    HiddenThreads.hide(threadid);\n  }\n  return false;\n}\n\nfunction toggleblotter() {\n  $('.blotter-entries').each(function(index,element) {\n    $(this).slideToggle(function() {\n      if($(this).is(\":hidden\")) {\n        Cookie('ku_showblotter', '0', 365);\n      } else {\n        Cookie('ku_showblotter', '1', 365);\n      }\n    });\n  });\n}\n\nfunction hideblotter() {\n   $('.blotter-entries').each(function(index,element) {\n    $(this).hide();\n  });\n}\n\nfunction expandthread(threadid, board, ev) {\n  ev.preventDefault()\n  let $thread = $(`#thread${threadid}${board}`)\n  if ($thread.length) {\n    let expandFrom = + $thread.find('.postnode.op').find('input[type=checkbox]').val()\n    , expandTo = + $thread.find('.postnode:not(.op):first').find('input[type=checkbox]').val()\n    , $omitted = $thread.find('.omittedposts')\n    $omitted.find('a').hide()\n    let $msg = $omitted.find('span')\n    if (!$msg.length) {\n      $msg = $(`<span></span>`).prependTo($omitted)\n    }\n    $msg.text(`${_l.loading}...`)\n    HTMLoader.getThread(board, +threadid, [expandFrom, expandTo], (err, posts) => {\n      if (posts) {\n        $thread.find('.omittedposts').replaceWith(posts)\n        replyMap.showReplies()\n      }\n      else {\n        $msg.text(_l.oops + (err !== false ? ` (${err})` : ''))\n        $omitted.find('a').text(_l.tryAgain).show()\n      }\n    })\n  }\n  return false;\n}\n\nfunction getnewposts(threadid=null, scrollToID=null, onError = () => 'error') {\n  if(threadid===null) {\n    if (ispage) return onError();\n    threadid = $('input[name=replythread]').val()\n  }\n  let $lastQrl = $(`.qrl[data-parent=\"${threadid}\"]`).last()\n  , lastpost = $lastQrl.data('postnum') || $lastQrl.data('parent')\n  if (! lastpost) return onError();\n  let replies_container, $newposts_get, $msg\n  if (!ispage) {\n    $newposts_get = $('#newposts_get')\n    $newposts_get.removeClass('upd-counting').addClass('upd-updating')\n    replies_container = document.querySelector('.replies')\n  }\n  else {\n    replies_container = document.querySelector(`#thread${threadid}${this_board_dir} .replies`)\n    if (!replies_container) return onError();\n  }\n  HTMLoader.getThread(this_board_dir, +threadid, [+lastpost,Infinity], (err, posts) => {\n    if (!ispage) {\n      $newposts_get.removeClass('upd-updating')\n    }\n    if (posts) {\n      replies_container.insertAdjacentHTML('beforeend', posts)\n      if (scrollToID) {\n        let allPosts = replies_container.querySelectorAll('.reply')\n        , targetReply = scrollToID=='last'\n          ? allPosts[allPosts.length-1]\n          : Array.prototype.find.call(allPosts, post => post.querySelector(`a[name=\"${scrollToID}\"]`))\n        if (! targetReply) {\n          return onError();\n        }\n        highlight(scrollToID, 5000)\n      }\n      replyMap.showReplies()\n    }\n    else {\n      if (scrollToID) {\n        return onError();\n      }\n      pups.info(posts === '' ? _l.noNewPosts : _l.oops + (err !== false ? ` (${err})` : ''), {time: 1})\n    }\n  }, false, true)\n  return false;\n}\n\nfunction showLinks(ev) {\n  var href = $(this).attr('href');\n  $('#directLink').val(ku_boardspath+href);\n  $('#quoteLink').val('>>'+href.split('/res/')[0]+'/'+href.split('#')[1]);\n  $('#viewlink').css({\n    top: $(this).offset().top + $(this).height(),\n    left: $(this).offset().left\n  }).fadeIn('fast');\n  return false;\n}\nif(localStorage['pinPreference'] === 'pinned')\n  localStorage['pinForm'] = 0;\nif(localStorage['pinPreference'] === 'unpinned')\n  localStorage['pinForm'] = 1;\nlocalStorage.removeItem('pinPreference');\n\nvar goingExternal = false;\nfunction quickreply(ev) {\n  var externalBoard = $(this).data('boardname');\n  if(externalBoard === this_board_dir) externalBoard = false;\n  var parent = $(this).data('parent'), current = $(this).data('postnum') || parent;\n  var preferUnpinned = !!+localStorage['pinForm'];\n  var appearsNew = ($('#postclone').css('display') === 'none');\n  $('#postclone').show();\n  if(isTouch) {\n    $('#postclone').css({\n      bottom: '0px',\n      left: '0px',\n      position: 'fixed',\n      opacity: 1\n    });\n  }\n  else {\n    if(preferUnpinned) {\n      $('#postclone').css({\n        top: $(this).offset().top + $(this).height(),\n        left: Math.round(($(window).width() / 2) - ($('#postclone').width() / 2)),\n        position: 'absolute'\n      });\n    }\n    else if(appearsNew) {\n      $('#postclone').css({\n        top: $(this).offset().top + $(this).height() - $(document).scrollTop(),\n        left: Math.round(($(window).width() / 2) - ($('#postclone').width() / 2)),\n        position: 'fixed'\n      });\n    }\n  }\n  $('#postclone input[name=\"replythread\"]').val(parent);\n  if(externalBoard) {\n    $('#postclone input[name=\"board\"]').val(externalBoard);\n    $('#postclone .posttypeindicator').html('<a href=\"'+ku_boardspath+'/'+externalBoard+'/res/'+parent+'.html?i#'+current+'\"> &gt;&gt;/'+externalBoard+'/'+parent+'</a>');\n  }\n  else {\n    $('#postclone .posttypeindicator').html('<a class=\"xlink\" href=\"#'+current+'\"> &gt;&gt;'+parent+'</a>');\n  }\n  insert('>>'+current+'\\n');\n  return false;\n}\n\nfunction getwatchedthreads(threadid, board) {\n  if ($('#watchedthreadlist').get()!='') {\n    $('#watchedthreadlist').html(_l.loading + '...');\n    $.ajax({\n      url: ku_boardspath + '/threadwatch.php?board=' + board + '&threadid=' + threadid,\n      success: function(data) {\n        $('#watchedthreadlist').html(data || (_l.oops + \" (\"+_l.blankResponse+\")\"));\n      },\n      error: function(xhr, status) {\n        $('#watchedthreadlist').html(_l.oops + \" (\" + status + \")\");\n      }\n    });\n  }\n}\n\nfunction popupMessage(content, delay=1000) {\n  pups.info(content, {time: delay/1000})\n  console.warn('popupMessage() is deprecated. Please use YOBA alerts instead.')\n}\n\nvar Captcha = {\n  init: function() {\n    $('.captchawrap').click(this.refresh.bind(this))\n    injector.inject('captcha-rotting',\n`.cw-running .rotting-indicator {\n  -webkit-animation-duration: ${captchaTimeout}s;\n       -o-animation-duration: ${captchaTimeout}s;\n          animation-duration: ${captchaTimeout}s;\n}\n.cw-running .captchaimage,\n.cw-running .rotten-msg {\n  -webkit-animation-delay: ${captchaTimeout}s;\n       -o-animation-delay: ${captchaTimeout}s;\n          animation-delay: ${captchaTimeout}s;}`)\n  },\n  refresh: function() {\n    if (!$('.captchawrap').length) return;\n    this.shownOnce = true\n    let cColor = $('.captchawrap').css('color').match(/([0-9]+(?:\\.[0-9]+)?)/g)\n    cColor = (cColor.length >= 3) ? '&color='+cColor.slice(0, 3).join(',') : ''\n    $('.captchaimage').attr('src', ku_boardspath+'/captcha.php?'+Math.random()+cColor)\n    $('.captchawrap')\n    .removeClass('cw-initial cw-running')\n    .each(function() {void this.offsetWidth}) //trigger a reflow\n    .addClass('cw-running')\n    Array.prototype.forEach.call(document.querySelectorAll('input[name=\"captcha\"]'), input => input.value = null)\n  },\n  refreshOnce: function() {\n    if (!this.shownOnce) {\n      this.refresh()\n    }\n    return false\n  },\n  shownOnce: false\n}\n\nconst Ajax = {\n  submitPost: function(form) {\n    let alertsToRemove = _.clone(this.shownErrors)\n    setTimeout(() => {\n      alertsToRemove.forEach(a => {\n        pups.closeByID(a)\n      })\n    }, 300)\n    this.shownErrors = []\n    let showError = (a, b={}) => this.shownErrors.push(pups.err(a, b))\n\n    //Moved from handleSubmit() and checkcaptcha()\n    let captchafield = form.querySelector('input[name=captcha]')\n    if (captchafield && !captchafield.value.length)\n      return showError(_l.enterCaptcha)\n    if(+$('.rotten-msg').css('opacity') > 0) {\n      return showError(_l.captcharot);\n    }\n    if (form.id === 'postclone')\n      ffdata.save()\n\n    form.classList.add('form-sending')\n    let fd = new FormData(form)\n    , xr = new XMLHttpRequest()\n    fd.append('AJAX', 1)\n    xr.open('POST', form.action)\n    xr.onload = e => {\n      form.classList.remove('form-sending')\n      if (xr.status !== 200) {\n        showError(_l.xhrError)\n        return\n      }\n      ;[].forEach.call(form.querySelectorAll('.error-in-attachment'), el => el.classList.remove('error-in-attachment'))\n      Captcha.refresh()\n      let res = null\n      try {\n        res = JSON.parse(xr.response)\n      }\n      catch(e) {\n        showError(_l.xhrError)\n        console.error('Malformed response (JSON expected):', xr.response)\n        return\n      }\n      if (res.error) {\n        if (res.error_verbose)\n          res.error = `${res.error}<br>${res.error_verbose}`\n        if (res.error_type) {\n          if (res.error_type == 'ban') {\n            showError(`${res.error} (<a href=\"${ku_cgipath}/banned.php\" target=\"_blank\">${_l.details}</a>)`, {time: 0, save: true})\n          }\n          if (res.error_type == 'duplicate_file') {\n            showError(res.error, {time: 0})\n            form.querySelector('input[name=\"imagefile\"]').value = null\n          }\n          if (res.error_type == 'upload_error') {\n            showError(res.error, {time: 0})\n            let badatt = form.querySelector(`.multiembedwrap[data-pos=\"${res.error_data.attachmenttype}-${res.error_data.position+1}\"]`)\n            if (badatt) {\n              badatt.classList.add('error-in-attachment')\n            }\n          }\n        }\n        else {\n          showError(res.error, {time: 0})\n        }\n        return\n      }\n      else {\n        resetForm(form)\n        if (form.id == \"postclone\") {\n          $(form).hide()\n        }\n        let noko = form.querySelector('input[name=\"redirecttothread\"]').checked\n        if (res.thread_replyto != 0) {\n          getnewposts(ispage ? res.thread_replyto : null, +res.post_id, () => {\n            document.location.href = `${ku_boardspath}/${res.board}/res/${res.thread_replyto}.html#${res.post_id}`\n            if (! ispage)\n              document.location.reload()\n          })\n        }\n        else {\n          if (noko) {\n            document.location.href = `${ku_boardspath}/${res.board}/res/${res.post_id}.html`\n          }\n          else {\n            document.location.href = `${ku_boardspath}/${res.board}`\n          }\n        }\n      }\n    }\n    xr.send(fd)\n  },\n  deletePost: function(form) {\n    if (!confirm(_l.deletePosts+'?')) return;\n    let fd = new FormData(form)\n    , xr = new XMLHttpRequest()\n    fd.append('AJAX', 1)\n    fd.append('deletepost', 1)\n    xr.open('POST', form.action)\n    xr.onload = e => {\n      if (xr.status !== 200) {\n        pups.err(_l.xhrError)\n        return\n      }\n      let res = null\n      try {\n        res = JSON.parse(xr.response)\n      }\n      catch(e) {\n        pups.err(_l.xhrError)\n        console.error('Malformed response (JSON expected):', xr.response)\n        return\n      }\n      if (res.error) {\n        if (res.error_verbose)\n          res.error = `${res.error}<br>${res.error_verbose}`\n        pups.err(res.error, {time: 0})\n        return\n      }\n      else {\n        let postsDeleted = []\n        , postErrors = []\n        res.data.forEach(item => {\n          if (!item.success) {\n            postErrors.push(item)\n            return\n          }\n          let $thread = $(`#delform [id^=thread${item.id}]`)\n          , $reply = $(`#delform [id^=reply${item.id}]`)\n          if ($thread.length) {\n            $thread.prev().remove() //unhidethread\n            $thread.next().remove() //br\n            $thread.next().remove() //hr\n            $thread.remove()\n          }\n          else if ($reply.length) {\n            let $reply = $(`#delform [id^=reply${item.id}]`)\n            if ($reply.length) {\n              $reply.parents('.postnode').remove()\n            }\n          }\n          postsDeleted.push(item.id)\n          if (! $('input[name=\"post[]\"]:checked').length)\n            $('.userdelete').removeClass('ud-active');\n        })\n        let msg = ''\n        if (postsDeleted.length) {\n          postsDeleted = postsDeleted.map(post => '#'+post)\n          msg += postsDeleted.length > 1 ?\n            `${_l.posts} ${postsDeleted.join(', ')} ${_l.deletedMulti}.`\n           :`${_l.post} ${postsDeleted[0]} ${_l.deleted}.`\n          pups.succ(msg, {time: 2 + postsDeleted.length})\n        }\n        postErrors.forEach(err => {\n          pups.err(`${_l.post} #${err.id}: ${err.message}`)\n        })\n      }\n    }\n    xr.send(fd)\n  },\n  reportPost: function(form) {\n    let fd = new FormData(form)\n    , xr = new XMLHttpRequest()\n    fd.append('AJAX', 1)\n    fd.append('reportpost', 1)\n    xr.open('POST', form.action)\n    xr.onload = e => {\n      if (xr.status !== 200) {\n        pups.err(_l.xhrError)\n        return\n      }\n      let res = null\n      try {\n        res = JSON.parse(xr.response)\n      }\n      catch(e) {\n        pups.err(_l.xhrError)\n        console.error('Malformed response (JSON expected):', xr.response)\n        return\n      }\n      if (res.error) {\n        if (res.error_verbose)\n          res.error = `${res.error}<br>${res.error_verbose}`\n        pups.err(res.error, {time: 0})\n        return\n      }\n      else {\n        let postsReported = []\n        , postErrors = []\n        res.data.forEach(item => {\n          if (!item.success) {\n            postErrors.push(item)\n            return\n          }\n          postsReported.push(item.id)\n          if (! $('input[name=\"post[]\"]:checked').length)\n            $('.userdelete').removeClass('ud-active');\n        })\n        let msg = ''\n        if (postsReported.length) {\n          postsReported = postsReported.map(post => '#'+post)\n          msg += postsReported.length > 1 ?\n            `${_l.posts} ${postsReported.join(', ')} ${_l.reportedMulti}.`\n           :`${_l.post} ${postsReported[0]} ${_l.reported}.`\n          pups.succ(msg, {time: 2 + postsReported.length})\n        }\n        postErrors.forEach(err => {\n          pups.err(`${_l.post} #${err.id}: ${err.message}`)\n        })\n      }\n    }\n    xr.send(fd)\n  },\n  deleteFile: function(id) {\n    if (!confirm(_l.deleteFiles+'?')) return;\n    let fd = new FormData()\n    , xr = new XMLHttpRequest()\n    fd.append('AJAX', 1)\n    fd.append('delete-file[]', id)\n    fd.append('moddelete', +$('input[name=\"moddelete\"]').is(':checked'));\n    ;['board', 'postpassword'].forEach(field => {\n      fd.append(field, $(`#delform input[name=\"${field}\"]`).val())\n    })\n    xr.open('POST', $('#delform').attr('action'))\n    xr.onload = e => {\n      if (xr.status !== 200) {\n        pups.err(_l.xhrError)\n        return\n      }\n      let res = null\n      try {\n        res = JSON.parse(xr.response)\n      }\n      catch(e) {\n        pups.err(_l.xhrError)\n        console.error('Malformed response (JSON expected):', xr.response)\n        return\n      }\n      if (res.error) {\n        if (res.error_verbose)\n          res.error = `${res.error}<br>${res.error_verbose}`\n        pups.err(res.error, {time: 0})\n        return\n      }\n      else {\n        let filesDeleted = []\n        , fileErrors = []\n        res.data.forEach(item => {\n          if (!item.success) {\n            fileErrors.push(item)\n            return\n          }\n          $(`figure[data-fileid=${item.id}]`)\n          .replaceWith(`<div class=\"nothumb\">${_l.fileRemoved}</div>`)\n        })\n        let msg = ''\n        fileErrors.forEach(err => {\n          pups.err(`${_l.file} #${err.id}: ${err.message}`)\n        })\n      }\n    }\n    xr.send(fd)\n  },\n  modThread: function(a, action) {\n    let $a = $(a)\n    , fd = new FormData()\n    , xr = new XMLHttpRequest()\n    $a.addClass('spin-around')\n    fd.append('AJAX', 1)\n    xr.open('POST', a.getAttribute('href'))\n    xr.onload = e => {\n      $a.removeClass('spin-around')\n      if (xr.status !== 200) {\n        pups.err(_l.xhrError)\n        return\n      }\n      let res = null\n      try {\n        res = JSON.parse(xr.response)\n      }\n      catch(e) {\n        pups.err(_l.xhrError)\n        console.error('Malformed response (JSON expected):', xr.response)\n        return\n      }\n      if (res.error) {\n        if (res.error_verbose)\n          res.error = `${res.error}<br>${res.error_verbose}`\n        pups.err(res.error, {time: 0})\n        return\n      }\n      else {\n        let $posthead = $a.parents('.posthead')\n        , $extrabtns = $posthead.find('.extrabtns')\n        if (action == 'stickypost') {\n          $extrabtns.prepend(`<svg class=\"icon i-icon i-pin\"><use xmlns:xlink=\"http://www.w3.org/1999/xlink\" xlink:href=\"#i-pin\"></use></svg>`);\n          $posthead.addClass('thread-stickied')\n        }\n        if (action == 'unstickypost') {\n          $extrabtns.find('svg.i-icon.i-pin').remove()\n          $posthead.removeClass('thread-stickied')\n        }\n        if (action == 'lockpost') {\n          $extrabtns.prepend(`<svg class=\"icon i-icon i-lock\"><use xmlns:xlink=\"http://www.w3.org/1999/xlink\" xlink:href=\"#i-lock\"></use></svg>`);\n          $posthead.addClass('thread-locked')\n        }\n        if (action == 'unlockpost') {\n          $extrabtns.find('svg.i-icon.i-lock').remove()\n          $posthead.removeClass('thread-locked')\n        }\n        pups.succ(res.message)\n      }\n    }\n    xr.send(fd)\n  },\n  shownErrors: []\n}\n\nfunction inspectFormData(formData) {\n  for (var pair of formData.entries()) {\n    console.log(pair[0]+ ', ' + pair[1]);\n  }\n}\n\nfunction expandimg(postnum, imgurl, thumburl, imgw, imgh, thumbw, thumbh) {\n  let element = document.getElementById(\"thumb\" + postnum);\n  if (element == null) return false;\n  let $element = $(element)\n  , $postbody = $element.parents('.postbody')\n  , $fc_filename = $element.parents('figure').find('.fc-filename')\n  , fc_width\n  if(typeof event !== 'undefined' && event.which === 2) return true;\n  if (element.getElementsByTagName('img')[0].getAttribute('alt').substring(0,4)!='full') {\n    $element.html('<img src=\"'+imgurl+'\" alt=\"full'+postnum+'\" class=\"thumb\" height=\"'+imgh+'\" width=\"'+imgw+'\">');\n    if (! Settings.expandImgFull()) {\n      let img = element.getElementsByTagName('img')[0]\n      , max_w = document.documentElement?document.documentElement.clientWidth : document.body.clientWidth\n      , offset = 50\n      , offset_el = img\n\n      while (offset_el != null) {\n        offset += offset_el.offsetLeft;\n        offset_el = offset_el.offsetParent;\n      }\n      var new_w = max_w - offset;\n      if (img.width > new_w) {\n        var ratio = img.width / img.height;\n        var zoom = 1 - new_w / img.width;\n        var new_h = new_w / ratio;\n        var notice = document.createElement('div');\n        notice.setAttribute('class', 'filesize');\n        notice.style.textDecoration = 'underline';\n        var textNode = document.createTextNode(_l.imageDownscaledBy + \" \" + Math.round(zoom*100) + \"% \"+_l.toFit);\n        notice.appendChild(textNode);\n        element.insertBefore(notice, img);\n        $(img).width(new_w);\n        $(img).height(new_h);\n      }\n      fc_width = new_w\n    }\n    else\n      fc_width = imgw\n    if ($postbody) $postbody.addClass('postbody-expanded')\n  }\n  else {\n    element.innerHTML = '<img src=\"' + thumburl + '\" alt=\"' + postnum + '\" class=\"thumb\" height=\"' + thumbh + '\" width=\"' + thumbw + '\">';\n    fc_width = thumbw\n    if ($postbody) $postbody.removeClass('postbody-expanded')\n  }\n  $fc_filename[0].style.maxWidth = `${fc_width - 50}px`\n  return false;\n}\n\n// YOBA previews w/#snivystuff\nvar PostPreviews = {\n  zindex:  3,\n  cached: {},\n  parent: {},\n\n  _parseURL: function(url) {\n    let matches = url.match(/\\/(.+)\\/res\\/([0-9]+)\\.html#([0-9]+)|postbynumber\\.php\\?b=(.+)&p=([0-9]+)/i)\n    if (!matches) return null;\n    return {\n      board: matches[1] || matches[4],\n      parent: matches[2] || '?',\n      post: matches[3] || matches[5],\n    }\n  },\n\n  _mouseover: function(e) {\n    e.stopPropagation();\n    var href = this.getAttribute(\"href\")\n    , isCatalog = $(this).hasClass('catalog-entry')\n    , parsedURL = PostPreviews._parseURL(href)\n    if (!parsedURL) return false;\n    let board = parsedURL['board']\n    , parentid = parsedURL['parent']\n    , postid = parsedURL['post']\n    , previewid = 'preview_'+board+'_'+postid\n    , preview = $('#' + previewid)\n    if (preview.length == 0) {\n      $('body').children().first().before('<div id=\"'+previewid+'\"></div>');\n      preview = $('#' + previewid);\n      preview.addClass('reflinkpreview content-background pre-hidden actual-reflinkpreview');\n      preview.mouseleave(PostPreviews._mouseout);\n      preview.mouseover(PostPreviews.onMouseOver);\n    }\n    var parent = $(this).parents('div[id^=preview]');\n    if (parent.length > 0) {\n      if (previewid == parent.attr('id')) return; // anti-recursion\n      for (var id in PostPreviews.parent) { if (id == previewid || PostPreviews.parent[id] == previewid) return }\n      PostPreviews.parent[previewid] = parent.attr('id');\n    }\n    else {\n      PostPreviews.parent = [];\n    }\n    let transformOrigin;\n    if(e.clientY < ($(window).height() / 1.5)) {\n      preview.css({top:e.pageY+5});\n      transformOrigin = \"top \"\n    } else {\n      preview.css({bottom:$(window).height()-e.pageY+5});\n      transformOrigin = \"bottom \"\n    }\n    if(e.clientX < ($(window).width() / 1.5)) {\n      preview.css({left:e.pageX+15});\n      transformOrigin += \"left\"\n    } else {\n      preview.css({right:$(window).width()-e.pageX+15});\n      transformOrigin += \"right\"\n    }\n    preview.css({zIndex: PostPreviews.zindex++, \"transform-origin\": transformOrigin});\n    this.style.cursor = \"progress\"\n    HTMLoader.getPost(board, parentid, postid, (err, post) => {\n      window.setTimeout(() => {\n        preview.html(post ? post : (_l.oops + (err !== false ? ` (${err})` : '')))\n        .removeClass('pre-hidden')\n        this.style.cursor = \"pointer\"\n      }, 0)\n    })\n    e.preventDefault();\n  },\n\n  onMouseOver: function() {\n    var preview = $(this);\n    if ($(this).is('a')) {\n      let parsedURL = PostPreviews._parseURL(this.getAttribute(\"href\"))\n      if (!parsedURL) return;\n      let board = parsedURL['board']\n      , postid = parsedURL['post']\n      preview = $('#preview_'+board+\"_\"+postid).first();\n    }\n    while (preview.length > 0) {\n      clearTimeout(preview[0].fadeout)\n      preview = $('#' + PostPreviews.parent[preview.attr('id')]);\n    }\n  },\n\n  _mouseout: function() {\n    var preview = $(this);\n    if ($(this).is('a')) {\n      if (this.predelay) {\n        clearTimeout(this.predelay)\n      }\n      let parsedURL = PostPreviews._parseURL(this.getAttribute(\"href\"))\n      if (!parsedURL) return;\n      let board = parsedURL['board']\n      , postid = parsedURL['post']\n      preview = $('#preview_'+board+\"_\"+postid).first();\n    }\n    while (preview.length > 0) {\n      clearTimeout(preview[0].fadeout)\n      let pre = preview\n      preview[0].fadeout = setTimeout(() => {\n        pre.addClass('pre-hidden')\n        setTimeout(() => {\n          delete PostPreviews.parent[pre.attr('id')];\n          pre.remove();\n        }, PostPreviews._timings.transition)\n      }, PostPreviews._timings.fade)\n      preview = $('#' + PostPreviews.parent[preview.attr('id')]);\n    }\n  },\n\n  _timings: {\n    predelay: 50,\n    transition: 200,\n    fade: 400\n  }\n}\n\n/* txt only. deleted. src in clean */\nfunction postpreview(D,A,C,B){}\n\nfunction set_inputs(id) {\n  let form = document.getElementById(id)\n  if (form) {\n    let name = form.querySelector('input[name=name]')\n    if(name && !name.value) name.value = getCookie(\"name\");\n    if(!form.em.value) form.em.value = getCookie(\"email\");\n    if(!form.postpassword.value) form.postpassword.value = get_password(\"postpassword\");\n  }\n}\n\nfunction set_delpass(id) {\n  let form = document.getElementById(id)\n  if (! form) return;\n  let postpassword = form.postpassword\n  if (postpassword && !postpassword.value) {\n    postpassword.value = get_password(\"postpassword\");\n  }\n}\n\n(function ($) {\n  $.event.special.load = {\n    add: function (callback) {\n      if ( this.nodeType === 1 && this.tagName.toLowerCase() === 'img' && this.src !== '' ) {\n        if ( this.complete || this.readyState === 4 ) {\n          callback.handler.apply(this);\n        }\n        else if ( this.readyState === 'uninitialized' && this.src.indexOf('data:') === 0 ) {\n          $(this).trigger('error');\n        }\n\n        else {\n          $(this).bind('load', callback.handler);\n        }\n      }\n    }\n  };\n}(jQuery));\n\nvar Settings = {\n  _checkbox: function(clicked, settingName, defaultValue) {\n    if (localStorage == null) {\n      trace(_l.noLocalStorage);\n      return;\n    }\n    if (localStorage[settingName] == null) {\n      localStorage[settingName] = defaultValue;\n    }\n    if (clicked == true) {\n      // save it\n      localStorage[settingName] = $('#settings_' + settingName).is(\":checked\");\n    } else {\n      // update checkbox (called on load)\n      if (localStorage[settingName] == 'true')\n        $('#settings_' + settingName).attr(\"checked\",\"checked\");\n      else\n        $('#settings_' + settingName).removeAttr(\"checked\");\n    }\n    return (localStorage[settingName] == 'true') || (localStorage[settingName] == true) ;\n  },\n\n  fxEnabled: function(changed) {\n    var enabled = Settings._checkbox(changed, 'fxEnabled', true);\n    if (changed != null) {\n      $.fx.off = !enabled;\n    }\n    return enabled;\n  },\n\n  showReplies: function(changed) {\n    var enabled = Settings._checkbox(changed, 'showReplies', true);\n    if (changed != null) {\n      scrollAnchor.save('replymap', '.postnode', window, 'v')\n      if (enabled) {\n        replyMap.showReplies()\n        injector.remove('hide-replies')\n      }\n      else {\n        injector.inject('hide-replies', '.replieslist {display: none}')\n      }\n      scrollAnchor.restore('replymap')\n    }\n    return enabled;\n  },\n\n  sfwMode: function(changed) {\n    var enabled = Settings._checkbox(changed, 'sfwMode', false);\n    if (enabled) {\n      injector.inject('sfwMode', '.thumb { opacity: 0.05;} .thumb:hover { opacity: 1;}');\n    }\n    else {\n      injector.remove('sfwMode');\n    }\n    return enabled;\n  },\n\n  expandImgFull: function(changed) {\n    return Settings._checkbox(changed, 'expandImgFull', false);\n  },\n\n  constrainWidth: function(changed) {\n    var enabled = Settings._checkbox(changed, 'constrainWidth', false);\n    if (enabled) {\n      injector.inject('constrainWidth', `body {\n        max-width: 960px;\n        margin: 0px auto;\n      }`)\n    }\n    else {\n      injector.remove('constrainWidth')\n    }\n  }\n}\n\nvar rswap = {\n  i: true,\n  swap: function() {\n    if(this.i) $('#delform').before($('#rswapper')).after($('.postarea'));\n    else $('#delform').before($('.postarea')).after($('#rswapper'));\n    this.i = !this.i;\n  }\n}\n\nvar isTouch = (('ontouchstart' in window) || window.DocumentTouch && document instanceof DocumentTouch) || false;\nif(localStorage['interfaceType'] == 'desktop')\n  isTouch = false;\nif(localStorage['interfaceType'] == 'touch')\n  isTouch = true;\n\nvar captchalang = getCookie('captchalang') || 'ru';\nfunction setCaptchaLang(lang) {\n  if(!in_array(lang, ['ru', 'en', 'num'])) return;\n  captchalang = lang;\n  set_cookie('captchalang', lang, 365);\n}\n\nfunction readyset() {\n  $('body').addClass('js-supported')\n  $('.make-me-readonly').each(function() {\n    $(this).attr('readonly', true)\n    .on('focus', function() {\n      $(this).removeAttr('readonly')\n    })\n  })\n\n  if(!ispage) $('.mgoback').show();\n  if(isTouch)\n    $('#js_settings').prepend('<a href=\"javascript: localStorage.setItem(\\'interfaceType\\', \\'desktop\\'); location.reload();\">'+_l.returnDesktop+'</a><br>');\n  else\n    $('#js_settings').prepend('<a href=\"javascript: localStorage.setItem(\\'interfaceType\\', \\'touch\\'); location.reload();\">'+_l.returnTouch+'</a><br>');\n\n  $('#js_settings').prepend(_l.captchalang+': <a href=\"javascript:setCaptchaLang(\\'ru\\');\">Cyrillic</a> | <a href=\"javascript:setCaptchaLang(\\'en\\');\">Latin</a> | <a href=\"javascript:setCaptchaLang(\\'num\\');\">Numeral</a><br />');\n\n  if(Styles.$cancelLink)\n    $('#js_settings').prepend(Styles.$cancelLink)\n\n  pups.init();\n\n  LatexIT.init();\n  checkhighlight();\n  checkgotothread();\n  checknamesave();\n\n  bnrs.init();\n\n  cloud20.init();\n  $('#boardselect').on('input', function() {\n    cloud20.filter($(this).val());\n  });\n\n  if(getCookie('ku_menutype')) {\n    var c = Cookie('ku_menutype');\n    if(c != 'default' && c != '')\n      document.getElementById('overlay_menu').style.position = c;\n  }\n\n  //initial post-process\n  processNodeInsertion()\n  if (kumod_set)\n    moddelcheckbox()\n\n  if(!isTouch) {\n    $('.mobile-nav').hide();\n    $('.sect-exr').mouseenter(function() { menu_show('ms-'+$(this).data('toexpand')); });\n    $('#overlay_menu').mouseleave(function() { menu_show('_off_'); });\n    $('body').on('mouseenter', \"a[class^='ref']\", function(ev) {\n      this.predelay = setTimeout(() => PostPreviews._mouseover.bind(this)(ev), PostPreviews._timings.predelay)\n    });\n    $('body').on('mouseleave', \"a[class^='ref']\", PostPreviews._mouseout);\n    $('body').on('click', \"a[class^='ref']\", function(e) {\n      e.preventDefault()\n      let href = this.getAttribute('href')\n      if (highlight(href.split('#')[1]) == 'not-found') {\n        document.location.href = href\n      }\n    })\n  }\n  else {\n    $('body').addClass('touch-mode');\n    $('.sect-exr:not([data-toexpand=\"_options\"])').parent().hide();\n    $('.sect-exr').click(function() {\n      if($('#js_settings').is(':visible')) {\n        menu_show('_off_');\n      }\n      else {\n        menu_show('ms-_options');\n      }\n      return false;\n    });\n    $('body').click(function(event) {\n      menu_show('_off_');\n      $('[id^=preview]').addClass('pre-hidden')\n      setTimeout(() => {\n        $('[id^=preview]').remove();\n      }, PostPreviews._timings.transition)\n    });\n    $('.mobile-nav').show();\n    $('body').on('click', \"a[class^='ref']\", PostPreviews._mouseover);\n\n    injector.inject('mb', 'body {margin-bottom: 350px;}')\n  }\n\n  // new markup\n  $('body').on('click', '.uib-mup', function() {\n    markup($(this).parents('form'), $(this).data('mups'), $(this).data('mupe'), $(this).data('imups'), $(this).data('imupe'));\n    return false;\n  })\n  $('.opt-exp').click(function(ev) {\n    ev.preventDefault()\n    $(this).find('.expandee').toggleClass('expanded');\n  })\n  .mouseleave(function() {\n    this.hideTimeout = setTimeout(() => $(this).find('.expandee').removeClass('expanded'), 250)\n  })\n  .mouseenter(function() {\n    clearTimeout(this.hideTimeout)\n  })\n  $('.code_markup_select').change(function() {\n    markup($(this).parents('form'), '[code='+$(this).val()+']', '[/code]');\n  })\n  $('body').on('click', '.uib-bul', function() {\n    bullets($(this).parents('form'), $(this).data('bul'), $(this).data('imups'), $(this).data('imupe'));\n    return false;\n  });\n  $('body').on('click', '.uib-tx', function() {\n    var target = $(this).data('target');\n    head.js('http://latex.codecogs.com/editor3.js', function() {\n      OpenLatexEditor(target,'phpBB','en-us', false, '','full');\n    });\n    return false;\n  });\n  //Webm expanding\n  $('body').on('click', '.movie', function(event) {expandwebm($(this), event)});\n  //new quick reply\n  $('body').on('click', '.qrl', quickreply);\n  $('#postclone label').each(function() {\n    let id =$(this).attr('for')\n    , newid = id+'_clone'\n    $(this).parents('form').find('#'+id).attr('id', newid);\n    $(this).attr('for', newid);\n  });\n  $('#postform textarea').attr('id', 'top-textarea'); $('#postform .uib-tx').data('target', 'top-textarea');\n  $('#postclone textarea').attr('id', 'pop-textarea'); $('#postclone .uib-tx').data('target', 'pop-textarea');\n  if(!isTouch) {\n    $('input, textarea, select, label').hover(function() {\n      $('#postclone').dragsOff();\n    }, function() {\n      $('#postclone').drags();\n    });\n    var pinnerState = !!+localStorage['pinForm'] ? 'pinned' : 'unpinned';\n    var pinner = '<a href=\"#\" class=\"pinner '+pinnerState+'\" onclick=\"javascript:$(\\'#postclone\\').pin();return false;\" title=\"Прикрепить / Открепить\"><svg class=\"icon b-icon\"><use class=\"use-pin\" xlink:href=\"#i-pin\"></use><use class=\"use-unpin\" xlink:href=\"#i-unpin\"></use></svg></a>';\n  }\n  else {\n    var pinner = '';\n  }\n\n  /* not losing floating form data */\n  ffdata.load();\n\n  $('<span class=\"extrabtns postboxcontrol\">'+ pinner +\n  '&nbsp;<a href=\"#\" onclick=\"javascript:$(\\'#postclone\\').hide();return false;\" title=\"Закрыть\"><svg class=\"icon b-icon\"><use xlink:href=\"#i-x\"></use></svg></a>'+\n  '</span>').appendTo('#postclone');\n\n  //Dollscript rape begins\n  //Switch captcha language\n  /*dcxt.addTask(function() {\n    dcxt.openSettings();\n    //Switch to \"form\" tab\n    $('.de-cfg-tab[info=form]')[0].click();\n    //Switch language if it's set wrong\n    if(captchalang == 'ru' && $('select[info=captchaLang] option:selected').val() !== $('select[info=captchaLang] option:contains(Rus)').val()) {\n      $('select[info=captchaLang]').val($('select[info=captchaLang] option:contains(Rus)').val()).triggerNative('change');\n    }\n    if(captchalang == 'en' && $('select[info=captchaLang] option:selected').val() !== $('select[info=captchaLang] option:contains(Eng)').val()) {\n      $('select[info=captchaLang]').val($('select[info=captchaLang] option:contains(Eng)').val()).triggerNative('change');\n    }\n    dcxt.closeSettings();\n  });*/\n\n  /*if(liveupd_ena && typeof io !== 'undefined') {\n    // Remove malfunctioning post counter\n    injector.inject('dcxt-nocount', '.de-ppanel-cnt:after {display: none}');\n    $(\"#postform, #postclone\").each(function() { $(this).append($('<input type=\"hidden\" name=\"token\">').val(randomString())) } );\n    $('#postform input[type=\"submit\"]').after('<img class=\"sending-loading\" src=\"'+ku_boardspath+'/images/loading.gif\">')\n    var socket = io.connect(liveupd_api);\n    if(ispage) {\n      var subscribeTo = [liveupd_sitename+this_board_dir+':newthreads'];\n      $('.op .reflink').children(':last-child').each(function() {\n        subscribeTo.push(liveupd_sitename+this_board_dir+':'+$(this).text());\n      });\n      socket.on('update', updater.bpageNotify)\n      .emit('subscribe', subscribeTo);\n    }\n    else {\n      dcxt.addTask(function() {\n        dcxt.openSettings();\n        $('.de-cfg-tab[info=form]')[0].click();\n        //Detect if AJAX posting enabled.\n        if(+$('select[info=ajaxReply]').val()) {\n          updater.ajaxPosting = true;\n        }\n        //Switch to \"posts\" tab\n        $('.de-cfg-tab[info=posts]')[0].click();\n        //Turn off AJAX thread update\n        if($('input[info=ajaxUpdThr]:checked').length) {\n          $('input[info=ajaxUpdThr]:checked')[0].click();\n          dcxt.changed++;\n        }\n        dcxt.closeSettings();\n      });\n      _l.noNewPosts += (\"<br>\" + _l.threadUpdationAutomatically);\n      socket.emit('subscribe', liveupd_sitename+$('input[name=board]').val()+':'+$('input[name=replythread]').val());\n      socket.on('update', function(data) {\n        updater.update(data);\n      });\n      $('body').on('submit', '#postform, #postclone', function(e) {\n        e.preventDefault();\n        if (!dcxt.enabled || checkcaptcha($(this).attr('id')))\n        updater.send($(this));\n      });\n    }\n  }*/\n\n  $('body').on('submit', '#postform, #postclone', function(e) {\n    e.preventDefault()\n    Ajax.submitPost(this)\n  });\n\n  $('#delform').on('submit', function(e) {\n    e.preventDefault()\n    Ajax.deletePost(this)\n  });\n\n  $('input[name=reportpost]').click(function(e) {\n    e.preventDefault()\n    Ajax.reportPost($(this).parents('form')[0])\n  })\n\n  $('body').on('click', '.delete-file', function(e) {\n    e.preventDefault()\n    e.stopPropagation()\n    let $this = $(this)\n    Ajax.deleteFile($this.parents('figure')[0].dataset['fileid'])\n  })\n\n\n\n  $('#delform').after('<div id=\"rswapper\">[<a onclick=\"javascript:rswap.swap();return false;\" href=\"#\">'+(ispage ? _l.NewThread : _l.reply)+'</a>]<hr /></div>');\n\n\n  /*dcxt.addTask(function() {\n    $('#rswapper').remove();\n  })*/\n\n  Settings.sfwMode(false);\n  if (localStorage) {\n    for(var s in Settings) {\n      if (s.substring(0,1) == \"_\") continue;\n      $(\"#js_settings\").append('<label><input type=\"checkbox\" onchange=\"javascript:Settings.'+s+'(true)\" name=\"settings_'+s+'\" id=\"settings_'+s+'\" value=\"true\"> '+_l['settings_'+s]+'</label><br />');\n      Settings[s](false);\n    }\n  } else {\n    $(\"#js_settings\").append(\"<span style=\\\"color:#F00\\\">\"+_l.noLocalStorage+\"</span><br />Твой браузер — говно. Скачай <a href=\\\"/web/20110329072959/http://google.com/chrome\\\" target=\\\"_blank\\\">Chome</a>, например.\");\n  }\n\n  var textbox = document.getElementById('message');\n  if(textbox)\n  {\n    textbox.onfocus=function(){is_entering = true;}\n    textbox.onblur=function(){is_entering = false;}\n  }\n\n  $('body').on('click', '.posttypeindicator a', function() {\n    var xl = $(this);\n    var offset = $('[name=\"' + xl.attr('href').substr(1) + '\"]').offset() || $('[name=\"' + xl.text().split('>>')[1] + '\"]').offset() || false;\n    if(offset) {\n      $('html, body').animate({\n        scrollTop: offset.top - ( $('#overlay_menu').height() + 10 )\n      }, 250);\n    }\n    return false;\n  });\n\n  $('body').on('click', '.dice', function() {\n    if(typeof $(this).data('html') === 'undefined') $(this).data('html', $(this).html());\n    var htm = stripHTML($(this).html());\n    $(this).html($(this).attr('title'));\n    $(this).attr('title', htm);\n  });\n\n  //Permalinks and stuff\n  $('<div id=\"viewlink\"></div>').addClass('content-background reflinkpreview qreplyform').html(\n    '<a style=\"float:left;\" href=\"#\" onclick=\"javascript:$(\\'#viewlink\\').hide();return false;\"><svg style=\"margin-left:0\" class=\"icon b-icon\"><use xlink:href=\"#i-x\"></use></svg></a>'+\n    '<div style=\"display:inline-block\"><input type=\"text\" id=\"directLink\"><br /><input type=\"text\" id=\"quoteLink\"></div>'\n  ).hide().appendTo('body');\n  $('body').on('click', '.shl', showLinks);\n  $('#directLink, #quoteLink').on(\"click\", function() { $(this).select(); });\n\n  //Ultimate YOBA Youtube embeds\n  $('body').on('click','.embed-play-button', function(ev) {\n    ev.preventDefault()\n    unwrapEmbed($(this).parents('figure'))\n  });\n  $('body').on('click','.collapse-video', function(ev) {\n    ev.preventDefault()\n    wrapEmbed($(this).parents('figure'))\n  });\n  // $('body').on('click','.embed', function() {$(this).unwrap() });\n  //detect node insertions and process them\n  $(document).on('animationstart webkitAnimationStart MSAnimationStart oanimationstart', function(event) {\n    var $target = $(event.target);\n    if (event.originalEvent.animationName == \"nodeInserted\" && !$target.hasClass('_inserted_'))\n      processNodeInsertion($target);\n  });\n  $('body').on('mouseenter', '._country_', function() {\n    if(typeof $(this).attr('title') === \"undefined\") {\n      $(this).attr('title', countries[$(this).attr('src').split('flags/')[1].split('.png')[0].toUpperCase()]);\n    }\n  });\n  dcxt.performTasks();\n\n  $('body').on('click', '.audiowrap', function(ev) {\n    ev.preventDefault();\n    let $this = $(this)\n    var src = $this.attr('href');\n    let $fig = $this.parents('figure')\n    if (! $fig.hasClass('unwrapped')) {\n      $fig.addClass('unwrapped unwrapped-audio')\n    }\n    let $fsz = $fig.find('.filesize');\n    if (! $fsz.find('.collapse-btn').length)\n      $fsz.append(`\n        <button title=\"${_l.collapse}\" class=\"emb-button collapse-video\">\n          <svg class=\"icon b-icon\"><use xmlns:xlink=\"http://www.w3.org/1999/xlink\" xlink:href=\"#i-shrink\"></use></svg>\n        </button>`);\n    if (! $this.find('audio').length)\n      $this.append('<audio src=\"'+src+'\" controls autoplay=\"true\"></audio>')\n    $fsz.find('.collapse-video').click(function() {\n      $fig.removeClass('unwrapped unwrapped-audio')\n      .find('audio')[0].pause()\n    })\n  })\n\n  $('input[name^=embed]').on('input', function() {\n    var match = embedLinks.process($(this).val());\n    if(match) {\n      $(this).val(match.code)\n      .parents('.multiembedwrap').find('[name^=embedtype]').val(match.site);\n    }\n  });\n\n  $('input[name^=imagefile]').on('change', function() {\n    let $this = $(this)\n    if ($this.val()) {\n      let nextCheckbox = $this.parent().next()\n      if (nextCheckbox.length)\n        nextCheckbox.prop('checked', true)\n    }\n  })\n\n  if(typeof is_catalog !== 'undefined' && is_catalog) catalog.init();\n\n  $('.userdelete').addClass('content-background reflinkpreview');\n  $('body').on('change', 'input[name=\"post[]\"]', function() {\n    if (!$('.userdelete').hasClass('ud-active'))\n      $('.userdelete').addClass('ud-active');\n    else if (!($('input[name=\"post[]\"]').is(\":checked\")))\n      $('.userdelete').removeClass('ud-active');\n  })\n\n  $('<div id=\"tripinfo\"></div>').addClass('content-background reflinkpreview qreplyform').hide().appendTo('body');\n\n  $('#delform').on('click', '.postertrip', function(ev) {\n    ev.preventDefault()\n    var trip = $(this).text().split('!')[1]\n    , offset = $(this).offset(), height = $(this).height()\n    $.getJSON('/tripinfo.php', { trip: trip })\n    .done(function(data) {\n      var active_on = [];\n      _.each(data.active_on, function(board) {\n        active_on.push('<a target=\"_blank\" href=\"'+ku_boardspath+'/'+board+'/\">'+'/'+board+'/</a>');\n      })\n      $('#tripinfo')\n      .html(\n        '<div><b class=\"postertrip\">!'+trip+'</b> ['+'<a href=\"https://www.google.com/search?q=!'+trip+'\" target=\"_blank\">G</a>]</div>'+\n        '<a style=\"float:left;\" href=\"#\" onclick=\"javascript:$(\\'#tripinfo\\').hide();return false;\"><svg style=\"position: absolute; top: 3px; right: 3px;\" class=\"icon b-icon\"><use xlink:href=\"#i-x\"></use></svg></a>'+\n        '<div class=\"trip-info-line\">'+_l.threads+': '+data.threads+', '+_l.comments+': '+data.comments+'</div>'+\n        '<div class=\"trip-info-line\">'+_l.active_since+': '+catalog.formatDate(data.active_since, true)+'</div>'+\n        '<div class=\"trip-info-line\">'+_l.last_active+': '+catalog.formatDate(data.last_active, true)+'</div>'+\n        (active_on.length ? '<div class=\"trip-info-line\">'+_l.active_on+': '+active_on.join(', ')+'</div>' : '')\n      )\n      .css({\n         top: offset.top + height,\n         left: offset.left\n       })\n      .fadeIn('fast');\n    })\n    .fail(function(error) {\n      console.error(error)\n    })\n  })\n  $('body').on('click', '.csswrap', function(ev) {\n    ev.preventDefault()\n    let cssLink = $(this).attr('href')\n    , styleName = $(this).parent().find('.fc-filename').text()\n    Styles.testStyle(cssLink, styleName)\n  })\n\n  $('input[name=disable_name]').on('change', function() {\n    var off = $(this).is(':checked')\n    $(this).parents('form').find('input[name=name]').attr('disabled', off)\n    localStorage.setItem('post_anonymously', +off)\n  })\n  .prop('checked', !!+localStorage['post_anonymously']).trigger('change')\n\n  unreadCounter.update()\n\n  Captcha.init()\n}\n\n// this will be applied to every new inserted node (post)\nfunction processNodeInsertion($node) {\n  if(typeof $node === 'undefined')\n    $node = $('body');\n  else {\n    $node.addClass('_inserted_');\n    $node = $node.parents(\":eq(1)\");\n  }\n  if($node.find('.prettyprint').length)\n    prettyPrint.apply(window);\n  LatexIT.render($node);\n  processEmbeds($node);\n  if (kumod_set) {\n    delandbanlinks($node);\n  }\n}\n\nvar dcxt = {\n  tries: 10,\n  enabled: false,\n  tasks: [],\n  changed: 0,\n  openSettings: function() {\n    if($('#de-content-cfg').length) return;\n    injector.inject('dcxt-hide', '#de-content-cfg {opacity: 0!important}');\n    $('#de-btn-settings')[0].click();\n  },\n  closeSettings: function() {\n    if(!$('#de-content-cfg').length) return;\n    $('#de-btn-settings')[0].click();\n    injector.remove('dcxt-hide');\n  },\n  addTask: function(fn) {\n    if(this.enabled) fn();\n    else this.tasks.push(fn);\n  },\n  performTasks: function() {\n    if(!this.enabled && $('#de-btn-settings').length) {\n      this.enabled = true;\n      $('#gotothread').prop('checked', true);\n      _.each(this.tasks, function(task) {\n        task();\n      });\n      this.tasks = [];\n      if(this.changed) location.reload();\n    }\n    else if(this.tries) {\n      setTimeout(function() {\n        dcxt.performTasks();\n      }, 500);\n      this.tries--;\n    }\n  }\n}\n\nvar updater = {\n  ajaxPosting: false,\n  newThreads: [],\n  showNewThreads: function() {\n    $('#wild_thread_appeared').remove();\n    _.each(this.newThreads, function(thread) {\n      $.get(ku_boardspath+'/read.php?b='+this_board_dir+'&t='+this_board_dir+'&p='+thread+'&single&replink=1', function(data) {\n        $('#delform').prepend(data+'<br clear=\"left\" /><hr />');\n      });\n    });\n    this.newThreads = [];\n  },\n  update: function(data) {\n    if(typeof data.token !== undefined) {\n      if($('input[name=token][value='+ data.token +']').length) {\n        // This is my post\n        clearfields($('input[name=token][value='+ data.token +']').parents('form'));\n        if(!this.ajaxPosting) getnewposts();\n      }\n      else {\n        getnewposts();\n      }\n    }\n    var lastvisits = localStorage['lastvisits'] ? (JSON.parse(localStorage['lastvisits']) || { }) : { };\n    if(typeof data.timestamp !== 'undefined') {\n      lastvisits[boardid] = data.timestamp;\n      localStorage.setItem('lastvisits', JSON.stringify(lastvisits));\n    }\n  },\n  bpageNotify: function(data) {\n    if($('input[name=token][value='+ data.token +']').length) return;\n    if(data.room == 'newthreads') {\n      if(dcxt.enabled) return;\n      updater.newThreads.push(data.newthread);\n      if(!$('#wild_thread_appeared').length)\n      $('.postarea').after('<a class=\"xlink\" href=\"javascript:updater.showNewThreads();return false;\" id=\"wild_thread_appeared\">'+_l.newThreadsAvailable+'<hr /></a>');\n    }\n    else {\n      var $target = $('[id^=replies'+data.room+']');\n      if(!$target.find('.fresh-replies').text(_l.newReplies+': '+(Number(($target.find('.fresh-replies').text().split(':')[1]))+1)).length)\n        $target.append('<a href=\"/'+ this_board_dir +'/res/'+data.room+'.html\" class=\"xlink fresh-replies\">'+_l.newReplies+': 1</a>').find('.fresh-replies').click(function(e) {\n          e.preventDefault();\n          var $label = $(this);\n          var after = /\\d+/.exec($target.find('.reply').last().attr('id'));\n          $.ajax({\n            url: ku_boardspath + '/expand.php?after=' + after + '&board=' + this_board_dir + '&threadid=' + data.room,\n            success: function(data) {\n              if (data) {\n                $target.append($(data));\n                replyMap.showReplies()\n\n              } else {\n                pups.info(_l.noNewPosts, {time: 1});\n              }\n              $label.remove();\n            },\n            error: function(xhr, status) {\n              pups.err(_l.oops + \" (\" + status + \")\");\n            }\n          });\n        });\n    }\n  },\n  send: function($form) {\n    if(!this.ajaxPosting) {\n      xsend($form.attr('id'));\n    }\n    return false;\n  }\n}\n\nfunction processEmbeds($scope) {\n  $scope.find('.embed:not(.title-given)').each(function() {\n    var container = $(this);\n    var vidID = container.data('id');\n    if(container.data('site') === 'youtube') {\n      $.get('https://www.googleapis.com/youtube/v3/videos?part=id%2Csnippet&id='+vidID+'&key='+ku_youtube_apikey, function(res) {\n        if(!res.error && res.items.length) {\n          var videotitle = res.items[0].snippet.title;\n          container.append($('<a target=\"_blank\" title=\"'+_l.watchOn+' Youtube\"></a>').addClass('yt-title-overlay').text(videotitle).attr('href', 'http://www.youtube.com/watch?v='+vidID)\n          .click(function(ev) { ev.stopPropagation(); }));\n        }\n      });\n      container.addClass('title-given');\n    }\n    if(container.data('site') === 'vimeo') {\n      $.get('http://vimeo.com/api/v2/video/'+vidID+'.json', function(res) {\n        var videotitle = res[0].title, thumbnail = res[0].thumbnail_large;\n        container.css({'background-image': 'url('+thumbnail+')'})\n        .append($('<a target=\"_blank\" title=\"'+_l.watchOn+' Vimeo\"></a>').addClass('vi-title-overlay').text(videotitle).attr('href', 'http://vimeo.com/'+vidID)\n        .click(function(ev) { ev.stopPropagation(); }));\n      });\n      container.addClass('title-given');\n    }\n    if(container.data('site') === 'coub') {\n      $.get(ku_boardspath+'/corpsy.php?code='+vidID, function(res) {\n        var videotitle = res.title, thumbnail = res.thumbnail_url;\n        container.css({'background-image': 'url('+thumbnail+')'})\n        .append($('<a target=\"_blank\" title=\"'+_l.watchOn+' Coub\"></a>').addClass('co-title-overlay').text(videotitle).attr('href', 'http://coub.com/view/'+vidID)\n        .click(function(ev) { ev.stopPropagation(); }));\n      });\n      container.addClass('title-given');\n    }\n  });\n}\n\nif (+localStorage['localmod']) {\n  kumod_set = true\n}\nelse {\n  let kumod = getCookie('kumod');\n  if (kumod !== '') {\n    if (kumod === 'allboards')\n      kumod_set = true\n    else\n      kumod_set = in_array(this_board_dir, kumod.split('|'));\n  }\n}\n\n\n\nvar mp3playerid = 0;\nfunction expandmp3(id, path){\n  if (mp3playerid == id)\n  {\n    document.getElementById('player'+id).innerHTML = '';\n    document.getElementById('player'+id).style.display = 'none';\n    mp3playerid = 0;\n  } else {\n    if(mp3playerid != 0)\n    {\n      document.getElementById('player'+mp3playerid).innerHTML = '';\n      document.getElementById('player'+mp3playerid).style.display = 'none';\n    }\n\n    document.getElementById('player'+id).innerHTML = '<embed src=\"/web/20110329072959/http://www.0chan.ru/mediaplayer.swf?type=mp3&file='+path+'\" width=\"320\" height=\"20\">';\n    document.getElementById('player'+id).style.display = 'block';\n    mp3playerid = id;\n  }\n}\n\nvar swfplayerid = 0;\nfunction expandswf(id, path, w, h){\n  if (swfplayerid == id)\n  {\n    document.getElementById('swfplayer'+id).innerHTML = '';\n    document.getElementById('swfplayer'+id).style.display = 'none';\n    swfplayerid = 0;\n  } else {\n    if(swfplayerid != 0)\n    {\n      document.getElementById('swfplayer'+swfplayerid).innerHTML = '';\n      document.getElementById('swfplayer'+swfplayerid).style.display = 'none';\n    }\n\n    document.getElementById('swfplayer'+id).innerHTML = '<embed src=\"'+path+'\" width=\"'+w+'\" height=\"'+h+'\">';\n    document.getElementById('swfplayer'+id).style.display = 'block';\n    swfplayerid = id;\n  }\n}\n\n\nfunction expandwebm($mov, ev) {\n  //good luck understanding this shitcode :^)\n  let $reply = $mov.parents('.reply')\n  if($mov.data('expanded') !== '1') {\n    ev.preventDefault();\n    var movieurl = $mov.attr('href'), imgh = $mov.data('height'), imgw = $mov.data('width'), dt = $mov.data('thumb'), postnum = $mov.data('id');\n    var uid = '_vframe_'+makeid()+(new Date().getTime());\n    $mov.replaceWith(function() {\n      return '<span id=\"'+uid+'\" data-thumb=\"'+dt+'\" data-width=\"'+imgw+'\"\" data-height=\"'+imgh+'\" data-href=\"'+movieurl+'\">'+this.innerHTML + '</span>';\n    });\n    $mov = $(\"#\"+uid);\n    $mov.find('img').hide();\n    var video = $mov.find('video').show(), notice = '';\n    if(!video.length) {\n      $mov.find('.playable-thumb').append('<video class=\"thumb\" src=\"'+movieurl+'\" controls loop autoplay height=\"'+imgh+'\" width=\"'+imgw+'\"></video>').promise().done(function() {\n        video = $mov.find('video');\n      });\n    }\n    else video.get(0).play();\n    if(!Settings.expandImgFull()) {\n      var offset = 50, offset_el = video[0];\n      var max_w = document.documentElement?document.documentElement.clientWidth : document.body.clientWidth;\n      while (offset_el != null) {\n        offset += offset_el.offsetLeft;\n        offset_el = offset_el.offsetParent;\n      }\n      var new_w = max_w - offset;\n      if(imgw > new_w) {\n        var ratio = imgw / imgh;\n        var zoom = 1 - new_w / imgw;\n        var new_h = new_w / ratio;\n        video.width(new_w);\n        video.height(new_h);\n        notice = _l.videoDownscaledBy + \" \" + Math.round(zoom*100) + \"% \"+_l.toFit;\n      }\n    }\n    // $mov.parent().find('.filesize').append('<span class=\"videocloser\"><b> [<a href=\"#\"> x </a>]</b> '+notice+'</span>');\n    let $fig = $mov.parents('figure');\n    if (! $fig.hasClass('unwrapped')) {\n      $fig.addClass('unwrapped')\n    }\n    let $fsz = $mov.parent().find('.filesize');\n    if (! $fsz.find('.collapse-btn').length) {\n      $fsz.append(`\n        <button title=\"${_l.collapse}\" class=\"emb-button collapse-video\">\n          <svg class=\"icon b-icon\"><use xmlns:xlink=\"http://www.w3.org/1999/xlink\" xlink:href=\"#i-shrink\"></use></svg>\n        </button>`);\n      $mov.parent().find('.collapse-video').click(function() {\n        $fig.removeClass('unwrapped')\n        var uid = '_vframe_'+makeid()+(new Date().getTime());\n        $mov.replaceWith(function() {\n          return '<a class=\"movie\" id=\"'+uid+'\" data-thumb=\"'+dt+'\" data-width=\"'+imgw+'\"\" data-height=\"'+imgh+'\" href=\"'+movieurl+'\">'+this.innerHTML + '</a>';\n        }).data('expanded', '0');\n        $mov = $(\"#\"+uid);\n        $mov.find('video').hide()[0].pause();\n        $mov.find('img').show();\n        $(this).remove();\n        $mov.parents('.reply').removeClass('reply-expanded')\n        return false;\n      });\n    }\n    $mov.parents('.reply').addClass('reply-expanded')\n  }\n}\n\n\nfunction makeid()\n{\n  var text = \"\";\n  var possible = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\n\n  for( var i=0; i < 5; i++ )\n    text += possible.charAt(Math.floor(Math.random() * possible.length));\n\n  return text;\n}\n\nfunction checknamesave(){\n  var checkd;\n  if(getCookie('name') != '') {\n    checkd = true;\n  } else {\n    checkd = false;\n  }\n  var doc = document.getElementById('save');\n  if (doc != null) doc.checked = checkd;\n}\nfunction checkgotothread(){\n  var checkd;\n  if(getCookie('tothread') == 'on') {\n    checkd = true;\n  } else {\n    checkd = false;\n  }\n  $(\"#gotothread\").attr('checked', checkd);\n}\n\nfunction navigatepages (event)\n{\n  if (!document.getElementById) return;\n    if (is_entering) return;\n  if (window.event) event = window.event;\n\n  if (event.ctrlKey)\n  {\n\n    var link = null;\n    var href = null;\n\n        var docloc = document.location.toString();\n        if (docloc.indexOf('/res/') != -1) {\n          if( (event.keyCode ? event.keyCode : event.which ? event.which : null) == 13 )\n            $('textarea[name=\"message\"]:focus').parents('form').submit();\n        }\n        else {\n          if (docloc.indexOf('.html') == -1 || docloc.indexOf('board.html') != -1) {\n            var page = 0;\n            var docloc_trimmed = docloc.substr(0, docloc.lastIndexOf('/') + 1);\n          } else {\n            var page = docloc.substr((docloc.lastIndexOf('/') + 1));\n            page = (+page.substr(0, page.indexOf('.html')));\n            var docloc_trimmed = docloc.substr(0, docloc.lastIndexOf('/') + 1);\n          }\n          if (page == 0) {\n            var docloc_valid = docloc_trimmed;\n          } else {\n            var docloc_valid  = docloc_trimmed + page + '.html';\n          }\n          let match;\n          if(match=/#s([0-9]+)/.exec(docloc)) {\n            var relativepost = (+match[1]);\n          } else {\n            var relativepost = -1;\n          }\n          var maxthreads = 0;\n          while(document.getElementsByName('s'+(++maxthreads)).length>0){}\n          switch (event.keyCode ? event.keyCode : event.which ? event.which : null)\n          {\n            case 13: // ctrl+Enter\n              $('textarea[name=\"message\"]:focus').parents('form').submit();\n              break;\n\n            case 0x25: // ctrl+left\n              link = document.getElementById('prevPage');\n              break;\n            case 0x27: // ctrl+right\n              link = document.getElementById('nextPage');\n              break;\n\n            case 0x28: // ctrl+down\n              if (relativepost == maxthreads - 1) {\n                break; //var newrelativepost = 0;\n              } else {\n                var newrelativepost = relativepost + 1;\n              }\n              href = docloc_valid + '#s' + newrelativepost;\n              break;\n\n            case 0x26: // ctrl+up\n              if (relativepost == -1 || relativepost == 0) {\n                break; //var newrelativepost = maxthreads - 1;\n              } else {\n                var newrelativepost = relativepost - 1;\n              }\n              href = docloc_valid + '#s' + newrelativepost;\n              break;\n\n            case 0x24: // ctrl+home\n              document.location = docloc_trimmed;\n              break;\n          }\n\n          if (link && link.action) document.location = link.action;\n          if (href) document.location.href = href;\n        }\n  }\n}\n\n\nif (window.document.addEventListener) {\n   window.document.addEventListener(\"keydown\", navigatepages, false);\n} else {\n   window.document.attachEvent(\"onkeydown\", navigatepages);\n}\n\nNodeList.prototype.forEach = Array.prototype.forEach;\n\nvar replyMap = {\n  showReplies: function(root) {\n    ;(root || document).querySelectorAll('.postnode').forEach(post => {\n      let n = post.querySelector('.reflink a:last-child').innerHTML\n      , msg = post.querySelector('.postmessage')\n      , repliesContainer = post.querySelector('.replieslist')\n      if (this.posts[n]) {\n        this.posts[n].container = repliesContainer\n      }\n      else {\n        this.posts[n] = {\n          container: repliesContainer,\n          replies: []\n        }\n      }\n      let links = msg.querySelectorAll(`a[class^=ref\\\\|${this_board_dir}]`)\n      if (links.length) links.forEach(link => {\n        let linkData = link.className.split(' ')[0].split('|')\n        , linkN = linkData[3]\n        , href = linkData[2] !== ''\n          ? `/${linkData[1]}/res/${linkData[2]}.html#${n}`\n          : `${ku_boardspath}/postbynumber.php?b=${linkData[1]}&p=${linkData[3]}`\n        , htm = `<a class=\"ref-reply\" href=\"${href}\">&gt;&gt;${n}</a>`\n        if (this.posts[linkN]) {\n          if (! _.includes(this.posts[linkN].replies, htm)) {\n            this.posts[linkN].replies.push(htm)\n          }\n        }\n        else {\n          this.posts[linkN] = {\n            replies: [htm]\n          }\n        }\n        this.posts[linkN].skip = false\n      })\n    })\n    _.each(this.posts, post => {\n      if (!post.skip && post.replies.length && post.container) {\n        post.container.innerHTML = `${_l.replies}: ${post.replies.join(', ')}`\n        post.skip = true\n      }\n    })\n  },\n  posts: {}\n}\n\nvar scrollAnchor = {\n  save: function(id, elements, parent, dimensions) {\n    parent = parent || window\n    dimensions = dimensions || 'vh'\n    let mid = [window.innerWidth / 2, window.innerHeight / 2]\n    , elMap = []\n    , parentBCR = (parent != window)\n      ? parent.getBoundingClientRect()\n      : {\n        left: 0,\n        top: 0,\n        right: window.innerWidth,\n        bottom: window.innerHeight\n      }\n    if (\n      parent != window\n      &&\n      (\n        (parentBCR.left <= 0 && parentBCR.right <= 0)\n        ||\n        (parentBCR.top <= 0 && parentBCR.bottom <= 0)\n        ||\n        parentBCR.left >= window.innerWidth\n        ||\n        parentBCR.top >= window.innerHeight\n      )\n    ) {\n      mid = [parentBCR.left + parentBCR.width/2, parentBCR.top + parentBCR.height/2]\n    }\n    let elems = (parent == window ? document : parent).querySelectorAll(elements)\n    if (! elems.length) return;\n    elems.forEach(function (el) {\n      let bcr = el.getBoundingClientRect()\n      , relativeVisibleWidth = Math.pos(bcr.width - (Math.pos(parentBCR.left - bcr.left) + Math.pos(bcr.right - parentBCR.right))) / bcr.width\n      , relativeVisibleHeight = Math.pos(bcr.height - (Math.pos(parentBCR.top - bcr.top) + Math.pos(bcr.bottom - parentBCR.bottom))) / bcr.height\n      , dx = Math.abs(mid[0] - (bcr.left + bcr.width/2))\n      , dy = Math.abs(mid[1] - (bcr.top + bcr.height/2))\n      elMap.push({\n        el: el,\n        primaryVisibility: dimensions[0] == 'h' ? relativeVisibleWidth : relativeVisibleHeight,\n        secondaryVisibility: dimensions[0] == 'v' ? relativeVisibleWidth : relativeVisibleHeight,\n        primaryOffset: dimensions[0] == 'h' ? dx : dy,\n        secondaryOffset: dimensions[0] == 'v' ? dx : dy\n      })\n    })\n    elMap.sort((a, b) => {\n      if (b.primaryVisibility !== a.primaryVisibility) {\n        return b.primaryVisibility - a.primaryVisibility\n      }\n      else if (dimensions.length > 1 && b.secondaryVisibility !== a.secondaryVisibility) {\n        return b.secondaryVisibility - a.secondaryVisibility\n      }\n      else if (a.primaryOffset !== b.primaryOffset) {\n        return a.primaryOffset - b.primaryOffset\n      }\n      else if (dimensions.length > 1) {\n        return a.secondaryOffset - b.secondaryOffset\n      }\n    })\n    let anchor = elMap[0].el\n    , bcrBefore = anchor.getBoundingClientRect()\n    this.saved[id] = {\n      anchor: anchor,\n      left: bcrBefore.left,\n      top: bcrBefore.top,\n      parent: parent,\n      dimensions: dimensions\n    }\n  },\n  restore: function(id) {\n    let loaded = this.saved[id]\n    if (! loaded) return;\n    window.requestAnimationFrame(() => {\n      let bcrAfter = loaded.anchor.getBoundingClientRect()\n      loaded.parent.scrollBy(loaded.dimensions.indexOf('h') !== (-1) ? bcrAfter.left - loaded.left : 0, loaded.dimensions.indexOf('v') !== (-1) ? bcrAfter.top - loaded.top : 0)\n    })\n  },\n  saved: {}\n}\nMath.pos = x => x >= 0 ? x : 0;\n\n// requestAnimationFrame polyfill https://gist.github.com/paulirish/1579671\n(function() {\n  var lastTime = 0;\n  var vendors = ['ms', 'moz', 'webkit', 'o'];\n  for(var x = 0; x < vendors.length && !window.requestAnimationFrame; ++x) {\n    window.requestAnimationFrame = window[vendors[x]+'RequestAnimationFrame'];\n    window.cancelAnimationFrame = window[vendors[x]+'CancelAnimationFrame'] || window[vendors[x]+'CancelRequestAnimationFrame'];\n  }\n\n  if (!window.requestAnimationFrame)\n    window.requestAnimationFrame = function(callback, element) {\n      var currTime = new Date().getTime();\n      var timeToCall = Math.max(0, 16 - (currTime - lastTime));\n      var id = window.setTimeout(function() { callback(currTime + timeToCall); }, timeToCall);\n      lastTime = currTime + timeToCall;\n      return id;\n    };\n\n  if (!window.cancelAnimationFrame)\n    window.cancelAnimationFrame = function(id) {\n      clearTimeout(id);\n    };\n}());\n\n/// overlay menu\nvar menu_current = '';\nvar menu_last = '';\nfunction menu_show(id)\n{\n  if(menu_current != '')\n  {\n    var dl = (id == '_off_') ? 125 : 0;\n    $('#'+menu_current).delay(dl).slideUp(100);\n    menu_last = menu_current;\n  }\n  if (id != '') {\n    if (menu_last == id && typeof $('#' + id).queue() !== 'undefined' && $('#' + id).queue().length > 0) {\n      $('#' + id).clearQueue();\n    } else {\n      $('#' + id).slideDown(150);\n    }\n  }\n  menu_current = id;\n}\nfunction menu_pin(){\n  if(document.getElementById('overlay_menu').style.position == 'absolute') {\n    document.getElementById('overlay_menu').style.position = 'fixed';\n    Cookie('ku_menutype', 'fixed', 365);\n  } else {\n    document.getElementById('overlay_menu').style.position = 'absolute';\n    Cookie('ku_menutype', 'absolute', 365);\n  }\n}\n\nfunction toggle_oldmenu(on=null) {\n  if (on===null)\n    on = getCookie('ku_oldmenu') != 'yes'\n  injector.inject('oldmenu', `#${on ? 'overlay_menu' : 'head_oldmenu'} { display: none }`)\n  if (on && !document.getElementById('head_oldmenu')) {\n    document.getElementById('boardlist_header').insertAdjacentHTML('afterBegin', `<div id=\"head_oldmenu\" class=\"boardlist\">\n      ${document.getElementById('ns_oldmenu').innerText}\n      <a href=\\\"#\\\" onclick=\\\"javascript:toggle_oldmenu();\\\" class=\"bl-sect\" style=\"order:1\">[overlay]</a>\n    </div>`)\n  }\n  Cookie('ku_oldmenu', on ? 'yes' : 'no', 90); \n}\n\nvar LatexIT = {\n  mode : 'gif',\n  init : function() {\n  if(document.implementation.hasFeature(\"http://www.w3.org/TR/SVG11/feature#BasicStructure\", \"1.1\"))\n    this.mode='svg';\n  },\n  odc: \"javascript:LatexIT.replaceWithSrc(this);\",\n  dcls: \"Double click to show source\",\n\n  pre : function(eqn) {\n    var txt=eqn.innerHTML;\n    if ( !txt.match(/<img.*?>/i) && !txt.match(/<object.*?>/i))\n    {\n      //Clean code\n      txt=txt.replace(/<br>/gi,\"\").replace(/<br \\/>/gi,\"\").replace(/&amp;/mg,'&');\n      var atxt = \"[tex]\"+txt+\"[/tex]\";\n      txt=escape(txt.replace(/\\\\/mg,'\\\\'));\n      // Add coloring according to style of text\n      var c = eval(\"LatexIT.normalize\"+$(eqn).parent().css('color'));\n      var extxt = \"{\\\\color[rgb]{\"+c.r+','+c.g+','+c.b+\"}\"+txt+\"}\";\n      txt = \" <img src=\\\"http://latex.codecogs.com/\"+this.mode+\".latex?\"+ extxt +\"\\\" title=\\\"\"+this.dcls+\"\\\" alt=\\\"\"+atxt+\"\\\" ondblclick=\\\"\"+this.odc+\"\\\" border=\\\"0\\\" class=\\\"latex\\\" /> \";\n    }\n    return txt;\n  },\n\n  replaceWithSrc: function(eqn) {\n    var txt = $(eqn).attr('alt');\n    $(eqn).parent().html(txt);\n  },\n\n  render : function($scope) {\n    var scope = (typeof $scope === 'undefined') ? window.document : $scope[0];\n    var eqn = scope.getElementsByTagName(\"*\");\n    for (var i=0; i<eqn.length; i++) {\n      if(eqn[i].getAttribute(\"lang\") == \"latex\" || eqn[i].getAttribute(\"xml:lang\") == \"latex\")\n      eqn[i].innerHTML = this.pre(eqn[i]);\n    }\n  },\n\n  normalizergb : function(r, g, b) {\n    return {r: (r/255).toFixed(3), g: (g/255).toFixed(2), b: (b/255).toFixed(2) }\n  },\n  normalizergba : function(r, g, b, a) {\n    return this.normalizergb(r, g, b);\n  }\n};\n\nfunction in_array(needle, haystack) {\n  return (typeof haystack !== 'object') ? (needle === haystack) : _.includes(haystack, needle)\n}\n\n(function($) {\n  $.fn.drags = function(opt) {\n    opt = $.extend({handle:\"\",cursor:\"move\"}, opt);\n\n    if(opt.handle === \"\") {\n      var $el = this;\n    } else {\n      var $el = this.find(opt.handle);\n    }\n\n    return $el.css('cursor', opt.cursor).on(\"mousedown\", function(e) {\n      if(opt.handle === \"\") {\n        var $drag = $(this).addClass('draggable');\n      } else {\n        var $drag = $(this).addClass('active-handle').parent().addClass('draggable');\n      }\n      var z_idx = $drag.css('z-index'),\n        drg_h = $drag.outerHeight(),\n        drg_w = $drag.outerWidth(),\n        pos_y = $drag.offset().top + drg_h - e.pageY,\n        pos_x = $drag.offset().left + drg_w - e.pageX;\n      $drag.css('z-index', 1000).parents().on(\"mousemove\", function(e) {\n        $('.draggable').offset({\n          top:e.pageY + pos_y - drg_h,\n          left:e.pageX + pos_x - drg_w\n        }).on(\"mouseup\", function() {\n          $(this).removeClass('draggable').css('z-index', z_idx);\n        });\n      });\n      e.preventDefault(); // disable selection\n    }).on(\"mouseup\", function() {\n      if(opt.handle === \"\") {\n        $(this).removeClass('draggable');\n      } else {\n        $(this).removeClass('active-handle').parent().removeClass('draggable');\n      }\n    });\n  }\n  $.fn.dragsOff = function(opt) {\n    opt = $.extend({handle:\"\",cursor:\"default\"}, opt);\n\n    if(opt.handle === \"\") {\n     var $el = this;\n     $(this).removeClass('draggable');\n    } else {\n     var $el = this.find(opt.handle);\n     $(this).removeClass('active-handle')\n        .parent()\n        .removeClass('draggable');\n    }\n    return $el.css('cursor', \"default\")\n      .off(\"mousedown\")\n      .off(\"mouseup\")\n      .off(\"mousemove\");\n  }\n  $.fn.pin = function() {\n    if(this.css('position') !== 'fixed') {\n      var abs = {\n        top: this.position().top - $(document).scrollTop(),\n        left: this.position().left - $(document).scrollLeft()\n      }\n      this.css({\n        position: 'fixed',\n        left: abs.left,\n        top: abs.top\n      });\n      this.find('.pinner').removeClass('pinned').addClass('unpinned');\n      localStorage['pinForm'] = 0;\n      // localStorage['pinPreference'] = 'pinned';\n    }\n    else {\n      var abs = {\n        top: this.position().top + $(document).scrollTop(),\n        left: this.position().left + $(document).scrollLeft()\n      }\n      this.css({\n        position: 'absolute',\n        left: abs.left,\n        top: abs.top\n      });\n      this.find('.pinner').removeClass('unpinned').addClass('pinned');\n      localStorage['pinForm'] = 1;\n      // localStorage['pinPreference'] = 'unpinned';\n    }\n  }\n  $.fn.triggerNative = function(eventName) {\n    return this.each(function() {\n      var el = $(this).get(0);\n      triggerNativeEvent(el, eventName);\n    });\n  };\n  function triggerNativeEvent(el, eventName){\n    if (el.fireEvent) { // < IE9\n    (el.fireEvent('on' + eventName));\n    } else {\n    var evt = document.createEvent('Events');\n    evt.initEvent(eventName, true, false);\n    el.dispatchEvent(evt);\n    }\n  }\n})(jQuery);\n\nfunction unwrapEmbed($fig) {\n  $fig.addClass('unwrapped')\n  let $iw = $fig.find('.emb-iframe-wrapper')\n  if ($iw.data('h') > $iw.data('w'))\n    $iw.addClass('vertical-video');\n  $iw.css({\n    paddingBottom: `${($iw.data('h')/$iw.data('w'))*100}%`\n  })\n  let code = $iw.data('code')\n  , iframeOptions = `frameborder=\"0\" scrolling=\"no\" webkitallowfullscreen=\"\" mozallowfullscreen=\"\" allowfullscreen=\"\"`\n  if ($iw.data('site') == \"Youtube\")\n    $iw.append(`<iframe src=\"https://www.youtube.com/embed/${code}?autoplay=1\" ${iframeOptions}></iframe>`)\n  if ($iw.data('site') == \"Vimeo\")\n    $iw.append(`<iframe src=\"//player.vimeo.com/video/${code}?badge=0&autoplay=1\" ${iframeOptions}></iframe>`)\n  if ($iw.data('site') == \"Coub\")\n    $iw.append(`<iframe src=\"http://coub.com/embed/${code}?muted=false&autostart=true&originalSize=false&hideTopBar=false&noSiteButtons=false&startWithHD=false\" ${iframeOptions}></iframe>`)\n  let $ew = $fig.find('.embed-wrap')\n  if (! $ew.find('.collapse-video').length)\n    $fig.find('.embed-wrap').append(`\n      <button title=\"${_l.collapse}\" class=\"emb-button collapse-video\">\n        <svg class=\"icon\"><use xmlns:xlink=\"http://www.w3.org/1999/xlink\" xlink:href=\"#i-shrink\"></use></svg>\n      </button>`)\n}\n\nfunction wrapEmbed($fig) {\n  $fig.removeClass('unwrapped')\n  $fig.find('.emb-iframe-wrapper').empty()\n}\n\nfunction clearfields($form, onlycaptcha) {\n  if(typeof onlycaptcha === 'undefined') onlycaptcha = false;\n  if(!onlycaptcha) {\n    $form.find('[name=\"message\"]').val('');\n    $form.find('[name=\"captcha\"]').val('');\n    $form.find('[name=\"subject\"]').val('');\n    $form.find('[name=\"imagefile\"]').val('');\n    $form.find('[name=\"name\"]').val('');\n    $form.find('[name=\"embed\"]').val('');\n    $form.find('[name=\"token\"]').val(randomString());\n  }\n  if(!dcxt.enabled) {\n    $('.captchawrap').stop();\n    clearTimeout(rottencaptcha);\n    rotCaptcha();\n  }\n}\n\nfunction resetForm(form) {\n  let fields = form.querySelectorAll('input[type=text]:not([name=name]), input[type=file], textarea')\n  Array.prototype.forEach.call(fields, field => field.value = null)\n}\n\nvar injector = {\n  inject: function(alias, css) {\n    var id = `injector:${alias}`\n    var existing = document.getElementById(id)\n    if (existing) {\n      existing.innerHTML = css\n      return\n    }\n    var head = document.head || document.getElementsByTagName('head')[0]\n    , style = document.createElement('style')\n    style.type = 'text/css'\n    style.id = id\n    if (style.styleSheet) {\n      style.styleSheet.cssText = css\n    } else {\n      style.appendChild(document.createTextNode(css))\n    }\n    head.appendChild(style)\n  },\n  remove: function(alias) {\n    var id = `injector:${alias}`\n    var style = document.getElementById(id)\n    if (style) {\n      var head = document.head || document.getElementsByTagName('head')[0]\n      if (head)\n        head.removeChild(document.getElementById(id))\n    }\n  }\n}\n\nfunction randomString() {\n  var result = '', chars = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ', length = 10;\n  for (var i = length; i > 0; --i) result += chars[Math.round(Math.random() * (chars.length - 1))];\n  return result;\n}\n\nvar cloud20 = {\n  init: function() {\n    $.getJSON(ku_cgipath + '/boards20.json', function(data) {\n      cloud20.allboards = data;\n      cloud20.filter('');\n    });\n  },\n  filter: function(query) {\n    var res = [];\n    if(typeof this.allboards === \"undefined\") return;\n    if(query == '') res = this.allboards;\n    else {\n      query = query.toLowerCase();\n      _.each(this.allboards, function(board) {\n        if(board.name.toLowerCase().search(query) !== -1 || board.desc.toLowerCase().search(query) !== -1)\n          res.push(board);\n      });\n    }\n    this.display(res);\n  },\n  display: function(list) {\n    var newhtml = '', opts = '';\n    _.each(list, function(item) {\n      newhtml += '<a class=\"menu-item\" title=\"'+ item.desc +'\" href=\"'+ku_boardsfolder+item.name+'/\">/'+item.name+'/ - '+ item.desc +'</a>';\n      opts += '<option value=\"'+item.name+'\">/'+item.name+'/ - '+ item.desc +'</option>';\n    });\n    $('#boards20').html(newhtml);\n    $('.boardsel20').append(opts);\n  }\n}\n\nvar countries = {\n  'A1': \"Anonymous Proxy\",\n  'A2': \"Satellite Provider\",\n  'O1': \"Other Country\",\n  'AD': \"Andorra\",\n  'AE': \"United Arab Emirates\",\n  'AF': \"Afghanistan\",\n  'AG': \"Antigua and Barbuda\",\n  'AI': \"Anguilla\",\n  'AL': \"Albania\",\n  'AM': \"Armenia\",\n  'AO': \"Angola\",\n  'AP': \"Asia/Pacific Region\",\n  'AQ': \"Antarctica\",\n  'AR': \"Argentina\",\n  'AS': \"American Samoa\",\n  'AT': \"Austria\",\n  'AU': \"Australia\",\n  'AW': \"Aruba\",\n  'AX': \"Aland Islands\",\n  'AZ': \"Azerbaijan\",\n  'BA': \"Bosnia and Herzegovina\",\n  'BB': \"Barbados\",\n  'BD': \"Bangladesh\",\n  'BE': \"Belgium\",\n  'BF': \"Burkina Faso\",\n  'BG': \"Bulgaria\",\n  'BH': \"Bahrain\",\n  'BI': \"Burundi\",\n  'BJ': \"Benin\",\n  'BL': \"Saint Bartelemey\",\n  'BM': \"Bermuda\",\n  'BN': \"Brunei Darussalam\",\n  'BO': \"Bolivia\",\n  'BQ': \"Bonaire, Saint Eustatius and Saba\",\n  'BR': \"Brazil\",\n  'BS': \"Bahamas\",\n  'BT': \"Bhutan\",\n  'BV': \"Bouvet Island\",\n  'BW': \"Botswana\",\n  'BY': \"Belarus\",\n  'BZ': \"Belize\",\n  'CA': \"Canada\",\n  'CC': \"Cocos (Keeling) Islands\",\n  'CD': \"Congo, The Democratic Republic of the\",\n  'CF': \"Central African Republic\",\n  'CG': \"Congo\",\n  'CH': \"Switzerland\",\n  'CI': \"Cote d'Ivoire\",\n  'CK': \"Cook Islands\",\n  'CL': \"Chile\",\n  'CM': \"Cameroon\",\n  'CN': \"China\",\n  'CO': \"Colombia\",\n  'CR': \"Costa Rica\",\n  'CU': \"Cuba\",\n  'CV': \"Cape Verde\",\n  'CW': \"Curacao\",\n  'CX': \"Christmas Island\",\n  'CY': \"Cyprus\",\n  'CZ': \"Czech Republic\",\n  'DE': \"Germany\",\n  'DJ': \"Djibouti\",\n  'DK': \"Denmark\",\n  'DM': \"Dominica\",\n  'DO': \"Dominican Republic\",\n  'DZ': \"Algeria\",\n  'EC': \"Ecuador\",\n  'EE': \"Estonia\",\n  'EG': \"Egypt\",\n  'EH': \"Western Sahara\",\n  'ER': \"Eritrea\",\n  'ES': \"Spain\",\n  'ET': \"Ethiopia\",\n  'EU': \"Europe\",\n  'FI': \"Finland\",\n  'FJ': \"Fiji\",\n  'FK': \"Falkland Islands (Malvinas)\",\n  'FM': \"Micronesia, Federated States of\",\n  'FO': \"Faroe Islands\",\n  'FR': \"France\",\n  'GA': \"Gabon\",\n  'GB': \"United Kingdom\",\n  'GD': \"Grenada\",\n  'GE': \"Georgia\",\n  'GF': \"French Guiana\",\n  'GG': \"Guernsey\",\n  'GH': \"Ghana\",\n  'GI': \"Gibraltar\",\n  'GL': \"Greenland\",\n  'GM': \"Gambia\",\n  'GN': \"Guinea\",\n  'GP': \"Guadeloupe\",\n  'GQ': \"Equatorial Guinea\",\n  'GR': \"Greece\",\n  'GS': \"South Georgia and the South Sandwich Islands\",\n  'GT': \"Guatemala\",\n  'GU': \"Guam\",\n  'GW': \"Guinea-Bissau\",\n  'GY': \"Guyana\",\n  'HK': \"Hong Kong\",\n  'HM': \"Heard Island and McDonald Islands\",\n  'HN': \"Honduras\",\n  'HR': \"Croatia\",\n  'HT': \"Haiti\",\n  'HU': \"Hungary\",\n  'ID': \"Indonesia\",\n  'IE': \"Ireland\",\n  'IL': \"Israel\",\n  'IM': \"Isle of Man\",\n  'IN': \"India\",\n  'IO': \"British Indian Ocean Territory\",\n  'IQ': \"Iraq\",\n  'IR': \"Iran, Islamic Republic of\",\n  'IS': \"Iceland\",\n  'IT': \"Italy\",\n  'JE': \"Jersey\",\n  'JM': \"Jamaica\",\n  'JO': \"Jordan\",\n  'JP': \"Japan\",\n  'KE': \"Kenya\",\n  'KG': \"Kyrgyzstan\",\n  'KH': \"Cambodia\",\n  'KI': \"Kiribati\",\n  'KM': \"Comoros\",\n  'KN': \"Saint Kitts and Nevis\",\n  'KP': \"Korea, Democratic People's Republic of\",\n  'KR': \"Korea, Republic of\",\n  'KW': \"Kuwait\",\n  'KY': \"Cayman Islands\",\n  'KZ': \"Kazakhstan\",\n  'LA': \"Lao People's Democratic Republic\",\n  'LB': \"Lebanon\",\n  'LC': \"Saint Lucia\",\n  'LI': \"Liechtenstein\",\n  'LK': \"Sri Lanka\",\n  'LR': \"Liberia\",\n  'LS': \"Lesotho\",\n  'LT': \"Lithuania\",\n  'LU': \"Luxembourg\",\n  'LV': \"Latvia\",\n  'LY': \"Libyan Arab Jamahiriya\",\n  'MA': \"Morocco\",\n  'MC': \"Monaco\",\n  'MD': \"Moldova, Republic of\",\n  'ME': \"Montenegro\",\n  'MF': \"Saint Martin\",\n  'MG': \"Madagascar\",\n  'MH': \"Marshall Islands\",\n  'MK': \"Macedonia\",\n  'ML': \"Mali\",\n  'MM': \"Myanmar\",\n  'MN': \"Mongolia\",\n  'MO': \"Macao\",\n  'MP': \"Northern Mariana Islands\",\n  'MQ': \"Martinique\",\n  'MR': \"Mauritania\",\n  'MS': \"Montserrat\",\n  'MT': \"Malta\",\n  'MU': \"Mauritius\",\n  'MV': \"Maldives\",\n  'MW': \"Malawi\",\n  'MX': \"Mexico\",\n  'MY': \"Malaysia\",\n  'MZ': \"Mozambique\",\n  'NA': \"Namibia\",\n  'NC': \"New Caledonia\",\n  'NE': \"Niger\",\n  'NF': \"Norfolk Island\",\n  'NG': \"Nigeria\",\n  'NI': \"Nicaragua\",\n  'NL': \"Netherlands\",\n  'NO': \"Norway\",\n  'NP': \"Nepal\",\n  'NR': \"Nauru\",\n  'NU': \"Niue\",\n  'NZ': \"New Zealand\",\n  'OM': \"Oman\",\n  'PA': \"Panama\",\n  'PE': \"Peru\",\n  'PF': \"French Polynesia\",\n  'PG': \"Papua New Guinea\",\n  'PH': \"Philippines\",\n  'PK': \"Pakistan\",\n  'PL': \"Poland\",\n  'PM': \"Saint Pierre and Miquelon\",\n  'PN': \"Pitcairn\",\n  'PR': \"Puerto Rico\",\n  'PS': \"Palestinian Territory\",\n  'PT': \"Portugal\",\n  'PW': \"Palau\",\n  'PY': \"Paraguay\",\n  'QA': \"Qatar\",\n  'RE': \"Reunion\",\n  'RO': \"Romania\",\n  'RS': \"Serbia\",\n  'RU': \"Russian Federation\",\n  'RW': \"Rwanda\",\n  'SA': \"Saudi Arabia\",\n  'SB': \"Solomon Islands\",\n  'SC': \"Seychelles\",\n  'SD': \"Sudan\",\n  'SE': \"Sweden\",\n  'SG': \"Singapore\",\n  'SH': \"Saint Helena\",\n  'SI': \"Slovenia\",\n  'SJ': \"Svalbard and Jan Mayen\",\n  'SK': \"Slovakia\",\n  'SL': \"Sierra Leone\",\n  'SM': \"San Marino\",\n  'SN': \"Senegal\",\n  'SO': \"Somalia\",\n  'SR': \"Suriname\",\n  'SS': \"South Sudan\",\n  'ST': \"Sao Tome and Principe\",\n  'SV': \"El Salvador\",\n  'SX': \"Sint Maarten\",\n  'SY': \"Syrian Arab Republic\",\n  'SZ': \"Swaziland\",\n  'TC': \"Turks and Caicos Islands\",\n  'TD': \"Chad\",\n  'TF': \"French Southern Territories\",\n  'TG': \"Togo\",\n  'TH': \"Thailand\",\n  'TJ': \"Tajikistan\",\n  'TK': \"Tokelau\",\n  'TL': \"Timor-Leste\",\n  'TM': \"Turkmenistan\",\n  'TN': \"Tunisia\",\n  'TO': \"Tonga\",\n  'TR': \"Turkey\",\n  'TT': \"Trinidad and Tobago\",\n  'TV': \"Tuvalu\",\n  'TW': \"Taiwan\",\n  'TZ': \"Tanzania, United Republic of\",\n  'UA': \"Ukraine\",\n  'UG': \"Uganda\",\n  'UM': \"United States Minor Outlying Islands\",\n  'US': \"United States\",\n  'UY': \"Uruguay\",\n  'UZ': \"Uzbekistan\",\n  'VA': \"Holy See (Vatican City State)\",\n  'VC': \"Saint Vincent and the Grenadines\",\n  'VE': \"Venezuela\",\n  'VG': \"Virgin Islands, British\",\n  'VI': \"Virgin Islands, U.S.\",\n  'VN': \"Vietnam\",\n  'VU': \"Vanuatu\",\n  'WF': \"Wallis and Futuna\",\n  'WS': \"Samoa\",\n  'YE': \"Yemen\",\n  'YT': \"Mayotte\",\n  'ZA': \"South Africa\",\n  'ZM': \"Zambia\",\n  'ZW': \"Zimbabwe\",\n  'XX': \"OMCK\",\n  'T1': \"Tor\"\n}\n\nvar bnrs = {\n  initiated: false,\n  init: function() {\n    $.getJSON(ku_boardspath+'/bnrs.json', function(data) {\n      var reduced = [];\n      if(data.length > 1) {\n        _.each(data, function(bnr) {\n          if(bnr.link !== this_board_dir) reduced.push(bnr);\n        });\n      }\n      else reduced = data;\n      bnrs.data = reduced;\n      bnrs.initiated = true;\n      bnrs.display();\n    });\n  },\n  display: function() {\n    if(!this.initiated) return;\n    if(!this.data.length) return;\n    var reduced = [];\n    if(typeof this.current !== 'undefined') {\n      _.each(this.data, function(item) {\n        if(item.path !== bnrs.current) reduced.push(item)\n      });\n    }\n    else reduced = this.data;\n    var toDisplay = randomItem(reduced);\n    this.current = toDisplay.path;\n    var link = (toDisplay.link.indexOf('http') === (-1)) ? ku_boardspath+'/'+toDisplay.link : toDisplay.link;\n    var newhtml = '<a class=\"bnrsupdate\" href=\"#\" onclick=\"javascript:bnrs.display();return false;\"></a><a href=\"'+link+'\"><img src=\"'+ku_boardspath+'/images/bnrs/'+toDisplay.path+'\" /></a>';\n    if($('.bnr').length) {\n      $('.bnr').html(newhtml);\n    }\n    else $('.logo').before('<div class=\"bnr-wrap\"><div class=\"bnr\">'+newhtml+'</div></div>');\n  },\n}\n\nfunction getRandomInt (min, max) {\n  return Math.floor(Math.random() * (max - min + 1)) + min;\n}\n\nfunction randomItem(array) {\n  return array[getRandomInt(0, array.length-1)];\n}\n\n/* not losing floating form data */\nvar ffdata = {\n  pos: ['top', 'left'],\n  save: function() {\n    var data = {};\n    _.each(ffdata.pos, function(pos) {\n      data[pos] = $('#postclone').css(pos);\n    });\n    var savedOn = new Date().getTime();\n    data.savedon = savedOn;\n    ffdata.savedOn = savedOn;\n    $('#postform [name=ffdata_savedon]').val(savedOn);\n    localStorage.setItem('ffdata_'+this_board_dir+'_'+(ispage ? 'page' : $('#postform [name=replythread]').val()), JSON.stringify(data));\n    return true;\n  },\n  savedOn: false,\n  unload: function() {\n    $('#postform [name=ffdata_savedon]').val(ffdata.savedOn || new Date().getTime());\n  },\n  load: function() {\n    var key = 'ffdata_'+this_board_dir+'_'+(ispage ? 'page' : $('#postform [name=replythread]').val());\n    if(!localStorage[key]) return;\n    try {\n      let data = JSON.parse(localStorage[key]);\n      if(data.savedon && data.savedon == $('#postform [name=ffdata_savedon]').val()) {\n        _.each(ffdata.pos, function(pos) {\n          if(data.hasOwnProperty(pos)) $('#postclone').css(pos, data[pos]);\n        });\n        $('#postclone').show();\n      }\n      else localStorage.removeItem(key);\n\n    }\n    catch(e) {\n      localStorage.removeItem(key);\n      console.log('unable to load form data', e)\n    }\n  }\n}\n\nvar embedLinks = {\n  sites: [\n    {id: 'you', rx: /(?:youtu(?:\\.be|be\\.com)\\/(?:.*v(?:\\/|=)|(?:.*\\/)?)([\\w'-]+))/ },\n    {id: 'vim',   rx: /[\\w\\W]*vimeo\\.com\\/(?:.*?)([0-9]+)(?:.*)?/ },\n    {id: 'cob',    rx: /[\\w\\W]*coub\\.com\\/view\\/([\\w\\W]*)[\\w\\W]*/ }\n  ],\n  process: function(val) {\n    var result = null;\n    _.find(this.sites, function(site) {\n      var fruit = site.rx.exec(val);\n      if(fruit != null) {\n        result = {\n          site: site.id,\n          code: fruit[1]\n        }\n      }\n    })\n    return result;\n  }\n}\n\nwindow.onbeforeunload = ffdata.unload;\n\nvar catalog = {\n  conf: {\n    sortBy: 'bumped',\n    layout: 'text',\n    respectStickied: true,\n    showHidden: true,\n    expandOnHover: true\n  },\n  saveConfig: function() {\n    localStorage['catalogSettings'] = JSON.stringify(this.conf);\n  },\n  init: function() {\n    // apply settings\n    if(localStorage['catalogSettings']) {\n      try {\n        var myConf = JSON.parse(localStorage['catalogSettings']);\n        _.each(myConf, function(val, key) {\n          this.conf[key] = val\n        }, this)\n      }\n      catch(e) {\n        console.error('Invalid catalog config');\n        localStorage.removeItem('catalogSettings');\n      }\n    }\n\n    var sortOptionElements = '';\n    _.each([\n      ['bumped', 'bumpOrder'],\n      ['replied', 'lastReply'],\n      ['timestamp', 'creationDate'],\n      ['reply_count', 'replyCount']\n    ], (function(val_desc) {\n      sortOptionElements += '<option value=\"'+val_desc[0]+'\"'+(val_desc[0]==this.conf.sortBy ? ' selected' : '')+'>'+_l[val_desc[1]]+'</option>';\n    }).bind(this));\n\n    // catalog control buttons\n    var sortBtns = '<div class=\"button-group\" data-select=\"sortBy\">';\n    _.each([\n      ['bumped', 'bumpOrder', 'bump', 'i-20'],\n      ['timestamp', 'creationDate', 'creation', 'i-20'],\n      ['replied', 'lastReply', 'reply', 'i-16in20'],\n      ['reply_count', 'replyCount', 'replies', 'i-20']\n    ], (function(v_d_i) {\n      sortBtns += '<div class=\"bg-button'+(v_d_i[0]==this.conf.sortBy ? ' bgb-selected' : '')+\n      '\" data-val=\"'+v_d_i[0]+'\" title=\"'+_l.sortBy+' '+_l[v_d_i[1]]+'\">\\\n      <svg class=\"icon '+v_d_i[3]+'\"><use xlink:href=\"#i-'+v_d_i[2]+'\"></use></svg></div>'\n    }).bind(this));\n    sortBtns += '</div>';\n    var pinBtns = '<div class=\"button-group'+(this.conf.sortBy !== 'bumped' ? ' disabled' : '')+'\" data-select=\"respectStickied\" id=\"pinControl\">';\n    _.each([\n      [1, 'doStick', 'pin', 'i-16in20'],\n      [0, 'doNotStick', 'unpin', 'i-16in20']\n    ], (function(v_d_i) {\n      pinBtns += '<div class=\"bg-button'+(v_d_i[0]==this.conf.respectStickied ? ' bgb-selected' : '')+\n      '\" data-val=\"'+v_d_i[0]+'\" title=\"'+_l[v_d_i[1]]+'\">\\\n      <svg class=\"icon '+v_d_i[3]+'\"><use xlink:href=\"#i-'+v_d_i[2]+'\"></use></svg></div>'\n    }).bind(this));\n    pinBtns += '</div>';\n    var hideBtns = '<div class=\"button-group\" data-select=\"showHidden\">';\n    _.each([\n      [0, 'hideHidden', 'hide', 'i-16in20'],\n      [1, 'showHidden', 'unhide', 'i-16in20']\n    ], (function(v_d_i) {\n      hideBtns += '<div class=\"bg-button'+(v_d_i[0]==this.conf.showHidden ? ' bgb-selected' : '')+\n      '\" data-val=\"'+v_d_i[0]+'\" title=\"'+_l[v_d_i[1]]+'\">\\\n      <svg class=\"icon '+v_d_i[3]+'\"><use xlink:href=\"#i-'+v_d_i[2]+'\"></use></svg></div>'\n    }).bind(this));\n    hideBtns += '</div>';\n    var layoutBtns = '<div class=\"button-group\" data-select=\"layout\">';\n    _.each([\n      ['text', 'smallPics', 'grid-small', 'i-20'],\n      ['gallery', 'largePics', 'gallery-grid', 'i-20'],\n      /*['legacy', 'legacyMode', 'legacy-grid', 'i-20']*/\n    ], (function(v_d_i) {\n      layoutBtns += '<div class=\"bg-button'+(v_d_i[0]==this.conf.layout ? ' bgb-selected' : '')+\n      '\" data-val=\"'+v_d_i[0]+'\" title=\"'+_l[v_d_i[1]]+'\">\\\n      <svg class=\"icon '+v_d_i[3]+'\"><use xlink:href=\"#i-'+v_d_i[2]+'\"></use></svg></div>'\n    }).bind(this));\n    layoutBtns += '</div>';\n    // searck input\n    var searchInput = '<input name=\"subject\" autocomplete=\"false\" class=\"button-group\" type=\"text\" id=\"cat-search\" placeholder=\"'+_l.search+'...\" /><input type=\"text\" name=\"FUCKYOUCHROMEFUCKYOU\" style=\"display:none;\"/>'\n\n    $('#catalog-controls').html(\n      sortBtns+pinBtns+searchInput+hideBtns+layoutBtns\n    );\n    this.load();\n    if(this.conf.expandOnHover)\n      $('#catalog-contents').addClass('expand-on-hover-enabled');\n    // Card events\n    $('#catalog-contents')\n    .on('click', '.namedate-overlay', function() {\n      $(this).toggleClass('date-on name-on');\n    })\n    .on('click', '.ce-text .bigThumb', function(ev) {\n      ev.stopPropagation(); ev.preventDefault();\n      var $card = $(this).parents('.cat-entry');\n      $card.toggleClass('thumbExpanded');\n    })\n    .on('click', '.bigThumb audio, .bigThumb video', function(ev) {\n      ev.stopPropagation();\n    })\n    .on('animationstart webkitAnimationStart MSAnimationStart oanimationstart', (function(event) {\n      var $target = $(event.target);\n      if (event.originalEvent.animationName == \"embed-image-insert\" && !$target.hasClass('_inserted_'))\n        this.getEmbedThumb($target);\n    }).bind(this))\n    .on('mousedown', '.cat-prv', function(ev) {\n      ev.preventDefault();\n      PostPreviews._mouseover.bind(this)(ev);\n    })\n    .on('click', '.cat-prv', function(ev) {\n      ev.stopPropagation();\n      ev.preventDefault();\n    })\n    .on('mouseleave', '.cat-prv', function(ev) {\n      PostPreviews._mouseout.bind(this)(ev);\n    })\n    .on('click', '.i-hide', (function(ev) {\n      var $target = $(ev.currentTarget)\n      , $card = $target.parents('.cat-entry')\n      , threadID = $card.data('id')\n      , threadIX = _.findIndex(this.model, {'id': threadID})\n      , thread = this.model[threadIX];\n      thread.hidden = !thread.hidden;\n      // addClass won't work here for some reason\n      if(thread.hidden) {\n        $target[0].classList.add('hidden-on');\n        $target.html('<use xmlns:xlink=\"http://www.w3.org/1999/xlink\" xlink:href=\"#i-unhide\"></use>');\n        HiddenThreads.hide(threadID);\n        $card.addClass('thread-hidden')\n      }\n      else {\n        $target[0].classList.remove('hidden-on');\n        $target.html('<use xmlns:xlink=\"http://www.w3.org/1999/xlink\" xlink:href=\"#i-hide\"></use>');\n        HiddenThreads.unhide(threadID);\n        $card.removeClass('thread-hidden')\n      }\n      //invalidate rendered cache\n      this.model[threadIX] = thread;\n      delete this.rendered[this.conf.layout][threadID];\n    }).bind(this))\n    // catalog configuration\n    $('.bg-button').click((function(ev) {\n      var $target = $(ev.currentTarget);\n      if($target.hasClass('bgb-selected')) return;\n      var $group = $target.parent()\n      , val = $target.data('val')\n      , key = $group.data('select');\n      $group.find('.bg-button').removeClass('bgb-selected');\n      $target.addClass('bgb-selected');\n      if(key !== 'sortBy' && key !== 'layout') val = !!val;\n      else {\n        if(val == 'bumped') $('#pinControl').removeClass('disabled');\n        else $('#pinControl').addClass('disabled');\n      }\n      this.conf[key] = val;\n      this.saveConfig();\n      if(key !== 'showHidden') this.build();\n      else {\n        if(val) $('#catalog-contents').removeClass('hideHidden');\n        else $('#catalog-contents').addClass('hideHidden');\n      }\n    }).bind(this))\n    $('#refresh_catalog').click((function(ev) {\n      ev.preventDefault();\n      this.load();\n    }).bind(this));\n    //search\n    $('#cat-search').on('input', function() {\n      var query = $(this).val().toLowerCase().replace(/\\\"/, '\\\\\"');\n      try {\n        injector.remove('cat-search');\n      } catch(e) {}\n      if(query.length)\n        injector.inject('cat-search', '#catalog-contents .cat-entry:not([data-search *= \"'+query+'\"]) { display:none; }');\n      else injector.remove('cat-search');\n    }).trigger('input');\n  },\n  load: function() {\n    // clear data\n    this.rendered = {text: {}, gallery: {}};\n    this.model = null;\n    // get contents\n    $.getJSON('catalog.json?v='+(new Date().getTime()))\n    .done(this.build.bind(this))\n    .fail(function(err) {\n      throw err;\n    })\n  },\n  fileTypes: {\n    image: ['jpg', 'gif', 'png'],\n    jpgThumb: ['webm', 'cob', 'vim', 'you'],\n    iconsAvailable: ['swf', 'mp3', 'ogg', 'css', 'flv'],\n    audio: ['mp3', 'ogg'],\n    embed: ['cob', 'vim', 'you']\n  },\n  authorities: ['', 'Admin', 'Mod', '?', 'God'],\n  formatDate: function(timestamp, short) {\n    if(typeof short === 'undefined') short = false;\n    var date = new Date(timestamp * 1000)\n    , Dow = this.dateLocal.dows.hasOwnProperty(locale) ? this.dateLocal.dows[locale][date.getDay()] : this.dateLocal.dows.en[date.getDay()]\n    , yy = _.padLeft(date.getFullYear() % 100, 2, 0)\n    , mo = _.padLeft(date.getMonth()+1, 2, 0)\n    , Mon = (locale === 'ru') ? this.dateLocal.mons.ru[date.getMonth()] : date.getMonth()+1\n    , dd = _.padLeft(date.getDate(), 2, 0)\n    , hh = _.padLeft(date.getHours(), 2, 0)\n    , mm = _.padLeft(date.getMinutes(), 2, 0)\n    , ss = _.padLeft(date.getSeconds(), 2, 0);\n    return (short\n      ? ( (locale === 'ru')\n        ? (dd+'.'+mo+'.'+yy+' в ')\n        : (mo+'/'+dd+'/'+yy+' @ ') )\n      : ( (locale === 'ru')\n        ? (Dow+' '+dd+' '+Mon+'’'+yy+' в ')\n        : (mo+'/'+dd+'/'+yy+' ('+Dow+') @ ') )\n    ) + hh+':'+mm+':'+ss;\n  },\n  dateLocal: {\n    dows: {\n      ru: ['Пнд','Втр','Срд','Чтв','Птн','Сбт','Вск'],\n      en: ['Sun','Mon','Tue','Wen','Thu','Fri','Sat']\n    },\n    mons: {\n      ru: ['Янв','Фев','Мар','Апр','Май','Июн','Июл','Авг','Сен','Окт','Ноя','Дек']\n    }\n  },\n  build: function(data) {\n    if(typeof data === 'undefined') data = this.model;\n    if(!data) return;\n    // normalize\n    _.each(data, function(entry, i) {\n      _.each(['id', 'reply_count', 'bumped', 'replied', 'reply_count', 'timestamp', 'page', 'locked', 'stickied', 'deleted_timestamp'], function(prop) {\n        entry[prop] = ~~entry[prop];\n      })\n      data[i] = entry;\n    })\n    // Sort threads\n    if(this.conf.sortBy === 'bumped' && this.conf.respectStickied)\n      this.model = _.sortByOrder(data, ['stickied', 'bumped'], ['desc', 'desc']);\n    else {\n      var sby = [this.conf.sortBy];\n      if(this.conf.sortBy !== 'bumped')\n        sby.push('bumped')\n      this.model = _.sortByOrder(data, sby, _.repeat('desc', sby.length));\n    }\n\n    var html = '';\n\n    _.each(this.model, function(thread) {\n      html += this.buildEntry(thread);\n    }, this);\n\n    $('#catalog-contents').html(html);\n  },\n  getEmbedThumb: function($el) {\n    var site = $el.data('site'), id = $el.data('id'), img\n    , $thread = $el.parents('.cat-entry')\n    , threadID = $thread.data('id');\n    if(site == 'cob')\n      $.get(ku_boardspath+'/corpsy.php?code='+id, (function(res) {\n        $el.replaceWith('<img src=\"'+res.thumbnail_url+'\">');\n        this.rendered[this.conf.layout][threadID] = $thread[0].outerHTML;\n      }).bind(this));\n    if(site == 'vim')\n      $.get('http://vimeo.com/api/v2/video/'+id+'.json', (function(res) {\n        $el.replaceWith('<img src=\"'+res[0].thumbnail_medium+'\">');\n        this.rendered[this.conf.layout][threadID] = $thread[0].outerHTML\n      }).bind(this));\n  },\n\n  buildEntry: function(thread) {\n    if(this.rendered[this.conf.layout].hasOwnProperty(thread.id))\n      return this.rendered[this.conf.layout][thread.id];\n\n    if(!thread.processed) {\n      thread.url = '/'+this_board_dir+'/res/'+thread.id+'.html';\n      // --- Building blocks ---\n      // Thumbnails\n      var expanderBtn = '<svg class=\"actor icon cat-thumb-expand\"><use xlink:href=\"#i-expand\"></use></svg>',\n      playerBtn = '<svg class=\"actor icon cat-thumb-expand\"><use xlink:href=\"#i-play\"></use></svg>';\n      // Find first non-deleted file\n      let embed = thread.embeds ? (thread.embeds.find(e => e.file != 'removed') || 'removed') : null\n      //  for images\n      if(!embed || embed === 'removed') {\n        thread.smallThumb =\n        '<a href=\"'+thread.url+'\" class=\"smallThumb\">\\\n          <div class=\"nofile-removed ctx\">'+(embed === 'removed' ? 'Удалён' : 'No File')+'</div>'\n        +'</a>';\n      }\n      else {\n        if (\n          _.includes(this.fileTypes.image, embed.file_type)\n          ||\n          _.includes(this.fileTypes.jpgThumb, embed.file_type)\n          ||\n          (\n            _.includes(this.fileTypes.audio, embed.file_type)\n            &&\n            (+embed.thumb_w) > 0\n            &&\n            (+embed.thumb_h) > 0\n          )\n        ) {\n          let ftype = _.includes(this.fileTypes.image, embed.file_type)\n            ? embed.file_type\n            : 'jpg'\n          , thumbURL = _.includes(this.fileTypes.embed, embed.file_type)\n            ? `${embed.file_type}-${embed.file}-`\n            : embed.file\n          , vartype = embed.file_type == 'mp3' ? ' onerror=\"switchFileType(this)\" extset=\"jpg,png,gif\"' : ''\n          thread.smallThumb =\n          '<a href=\"'+thread.url+'\" class=\"smallThumb\">\\\n            <img src=\"thumb/'+thumbURL+'c.'+ftype+'\"'+vartype+'>'\n          +'</a>';\n          thread.bigThumb =\n          '<img src=\"thumb/'+thumbURL+'s.'+ftype+'\"'+vartype+'>';\n        }\n        /*if(_.includes(this.fileTypes.image, thread.file_type)) {\n          thread.fileTypeClass = 'image';\n          thread.smallThumb =\n          '<a href=\"'+thread.url+'\" class=\"smallThumb\">\\\n            <img src=\"thumb/'+thread.file+'c.'+(thread.file_type === 'webm' ? 'jpg' : thread.file_type)+'\">'\n          +'</a>';\n          thread.bigThumb =\n          '<img src=\"thumb/'+thread.file+'s.'+(thread.file_type === 'webm' ? 'jpg' : thread.file_type)+'\">';\n        }*/\n        //  small thumbnail for embeds and generic files\n        else {\n          var smallSrc = (_.includes(this.fileTypes.iconsAvailable, embed.file_type))\n          ? '/inc/filetypes/'+embed.file_type+'.png'\n          : '/inc/filetypes/generic'+(_.includes(this.fileTypes.embed, embed.file_type) ? '-embed' : '')+'.png';\n          var expandable = _.includes(this.fileTypes.embed, embed.file_type) || _.includes(this.fileTypes.audio, embed.file_type);\n          thread.smallThumb =\n          '<a href=\"'+thread.url+'\" class=\"smallThumb\">\\\n            <img src=\"'+smallSrc+'\">' +\n            /*+ ''+(expandable ? playerBtn : '') +*/\n          '</a>';\n          //  for audios\n          if(_.includes(this.fileTypes.audio, embed.file_type)) {\n            thread.bigThumb =\n            '<audio src=\"src/'+embed.file+'.'+embed.file_type+'\" controls></audio>';\n          }\n        }\n        /*//  for embeds\n        if(_.includes(this.fileTypes.embed, thread.file_type)) {\n          thread.bigThumb = (thread.file_type == 'you')\n          ? '<img src=\"http://i.ytimg.com/vi/'+thread.file+'/mqdefault.jpg\">'\n          : '<div class=\"cat-bt-embed\" data-site=\"'+thread.file_type+'\" data-id=\"'+thread.file+'\"></div>';\n        }\n        //  for audios\n        if(_.includes(this.fileTypes.audio, thread.file_type)) {\n          thread.bigThumb =\n          '<audio src=\"src/'+thread.file+'.'+thread.file_type+'\" controls></audio>';\n        }*/\n        thread.bigThumb = '<a target=\"_blank\" href=\"'+thread.url+'\" class=\"bigThumb\">'+thread.bigThumb+'</a>';\n      }\n      /*if(!embed || embed === 'removed')\n        thread.bigThumb = '<a target=\"_blank\" href=\"'+thread.url+'\" class=\"bigThumb\">'+thread.bigThumb+'</a>';*/\n\n      //OP\n      thread.op = '<a target=\"_blank\" title=\"'+_l.goToThread+'\" target=\"_blank\" href=\"'+thread.url+'\" class=\"op-number ctx\">#'+thread.id+'</a>';\n\n      //preview\n      thread.preview =\n      '<a href=\"'+thread.url+'#'+thread.id+'\" class=\"actor cat-prv\">\\\n        <svg class=\"icon\"><use xlink:href=\"#i-eye\"></use></svg>\\\n      </a>';\n\n      //counters\n      var repliesLabel =\n      '<svg class=\"icon\"><use xlink:href=\"#i-reply\"></use></svg>\\\n      <span class=\"ctx reply-count\">'+thread.reply_count+'</span>';\n      if(thread.last_reply)\n        repliesLabel = '<a href=\"'+thread.url+'#'+thread.last_reply+'\" class=\"actor cat-prv\">'+repliesLabel+'</a>';\n      var replies =\n      '<div class=\"infolabel\">'+repliesLabel+'</div>',\n      images =\n      '<div class=\"infolabel\">\\\n        <svg class=\"icon\"><use xlink:href=\"#i-picture\"></use></svg>\\\n        <span class=\"ctx image-count\">'+thread.images+'</span>\\\n      </div>',\n      page =\n      '<div class=\"infolabel il-page\">\\\n        <a title=\"'+_l.threadOnPage+' '+thread.page+'\" target=\"_blank\" href=\"/'+this_board_dir+'/' + ((thread.page > 0) ? thread.page+'.html' : '')+'#'+thread.id+'\" class=\"actor\">\\\n          <svg class=\"icon\"><use xlink:href=\"#i-page\"></use></svg>\\\n          <span class=\"ctx page-number\">'+thread.page+'</span>\\\n        </a>\\\n      </div>';\n      thread.countersCombined = replies+images+page;\n\n      //Poster name+date\n      thread.posterauthority = +thread.posterauthority;\n      thread.nameDatePriority = 'date';\n      if(localStorage['cat_nameDatePriority'] == 'name' ||\n          (localStorage['cat_nameDatePriority'] != 'date' &&\n            (thread.name || thread.tripcode || thread.posterauthority)\n          )\n        ) thread.nameDatePriority = 'name';\n\n      // Poster name\n      var poster =\n      (thread.name ? '<span class=\"ctx postername\">'+thread.name+'</span>' : '') +\n      (thread.tripcode ? '<span class=\"ctx postertrip\">!'+thread.tripcode+'</span>' : '') +\n      (thread.posterauthority ? '<span class=\"ctx admin\">&nbsp;##'+this.authorities[thread.posterauthority]+'##</span>' : '');\n      thread.poster = '<div class=\"cat-poster\"><span class=\"ctx\">by&nbsp;</span>'+ (poster || '<span class=\"ctx c-postername\">'+(this_board_defaultName || _l.anonymous)+'</span>')+'</div>';\n\n      // Date\n      var dn = ' style=\"display:none\"';\n      thread.date = '<div class=\"ctx cat-date cat-date-long\">'+this.formatDate(thread.timestamp)+'</div>';\n      thread.dateCompact = '<div class=\"ctx cat-date cat-date-short\">'+this.formatDate(thread.timestamp, 1)+'</div>';\n\n      //search data\n      thread.searchData = _.escape(stripHTML(thread.subject + ' ' + thread.message).toLowerCase());\n\n      thread.message = thread.message.replace(/\\\\\"/mg, '\"');\n\n      thread.processed = true;\n      this.model[_.findIndex(this.model, {id: thread.id})] = thread;\n    }\n    //indicators\n    thread = this.buildIndicators(thread);\n\n    var html = this.layouts[this.conf.layout].bind(this)(thread);\n    this.rendered[this.conf.layout][thread.id] = html;\n    return html\n  },\n  buildIndicators: function(thread) {\n    // if(!thread.hasOwnProperty('hidden'))\n    thread.hidden =  _.includes((localStorage['hiddenThreads.'+this_board_dir] || '').split(','), ''+thread.id);\n    var pin = thread.stickied ? '<svg class=\"foradmin-act icon i-layer-1 i-pin\"><use xlink:href=\"#i-pin\"></use></svg>' : '',\n    lock = thread.locked ? '<svg class=\"foradmin-act icon i-layer-1 i-lock\"><use xlink:href=\"#i-lock\"></use></svg>' : '',\n    deathmark = thread.deleted_timestamp ? '<svg class=\"foradmin-act icon i-layer-1 i-deathmark\"><use xlink:href=\"#i-skull\"></use></svg>' : '',\n    hide = '<svg class=\"actor icon i-layer-1 i-hide'+(thread.hidden ? ' hidden-on' : '')+'\"><use xlink:href=\"#i-'+(thread.hidden ? 'unhide' : 'hide')+'\"></use></svg>',\n    burger = '<svg class=\"actor icon i-burger foradmin-show\"><use xlink:href=\"#i-burger\"></use></svg>',\n    del = '<svg class=\"actor icon i-layer-2 i-delete foradmin-show\"><use xlink:href=\"#i-x\"></use></svg>',\n    and = '<svg class=\"actor icon i-layer-2 i-dnb foradmin-show\"><use xlink:href=\"#i-and\"></use></svg>',\n    ban = '<svg class=\"actor icon i-layer-2 i-ban foradmin-show\"><use xlink:href=\"#i-ban\"></use></svg>';\n    thread.indicatorsCombined = '<div class=\"indicators\">'+burger+'<span class=\"i-layer-1\">'+deathmark+pin+lock+hide+'</span><span class=\"i-layer-2\">'+del+and+ban+'</span></div>';\n    return thread;\n  },\n  layouts: {\n    text: function(thread) {\n      return ''+\n      '<div data-id=\"'+thread.id+'\" class=\"cat-entry ce-text'+(thread.hidden ? ' thread-hidden' : '')+'\" data-search=\"'+thread.searchData+'\">\\\n        <div class=\"cat-card\">\\\n          <div class=\"ce-heda\">'\n            +thread.smallThumb+\n            '<div class=\"cat-infoline ci-op-link\">'\n              +thread.op\n              +thread.indicatorsCombined+\n            '</div>\\\n            <div class=\"cat-infoline namedate-overlay '+thread.nameDatePriority+'-on\">'\n              +thread.poster\n              +thread.date\n            +'</div>\\\n            <div class=\"cat-infoline\">'\n              +thread.preview\n              +thread.countersCombined+\n            '</div>\\\n          </div>\\\n          <div class=\"ce-opcontent ctx\">\\\n            <h5>'+thread.subject+'</h5>'+\n            thread.message+\n          '</div>\\\n        </div>'\n        +thread.bigThumb+\n      '</div>'\n    },\n    gallery: function(thread) {\n      return ''+\n      '<div data-id=\"'+thread.id+'\" class=\"cat-entry ce-gallery'+(thread.hidden ? ' thread-hidden' : '')+'\" data-search=\"'+thread.searchData+'\">\\\n        <div class=\"cat-card\">'+\n          thread.bigThumb+\n          '<div class=\"cat-infoline\">\\\n            <div class=\"ci-op-link\">'+thread.op+'</div>\\\n            <div class=\"counters\">'+thread.countersCombined+'</div>\\\n          </div>\\\n          <div class=\"cat-infoline\">'\n            +thread.preview+\n            '<div class=\"namedate-overlay '+thread.nameDatePriority+'-on\">'\n              +thread.poster\n              +thread.dateCompact\n            +'</div>'\n            +thread.indicatorsCombined+\n          '</div>\\\n          <div class=\"ce-opcontent ctx\">\\\n            <h5>'+thread.subject+'</h5>'+\n            thread.message+\n          '</div>\\\n        </div>\\\n      </div>'\n    }\n  }\n}\n\nfunction stripHTML(html) {\n  var tmp = document.implementation.createHTMLDocument(\"New\").body;\n  tmp.innerHTML = html;\n  return tmp.textContent || tmp.innerText || \"\";\n}\n\nvar unreadCounter = {\n  init: function(built) {\n    if (!built) {\n      built = + document.querySelector('meta[property=\"i0:buildtime\"]').content\n    }\n    this.lastvisits = localStorage['lastvisits'] ? (JSON.parse(localStorage['lastvisits']) || { }) : { }\n    let last_ts = this.lastvisits.hasOwnProperty(boardid) ? parseInt(this.lastvisits[boardid]) : 0;\n    if(last_ts < built) {\n      this.lastvisits[boardid] = built\n      localStorage.setItem('lastvisits', JSON.stringify(this.lastvisits))\n    }\n  },\n  update: function() {\n    if (!this.lastvisits) {\n      this.init()\n    }\n    $.ajax({\n      url: '/newpostscount.php',\n      data: this.lastvisits,\n      dataType: 'json',\n      success: function(data) {\n        $('.newposts-counter').remove()\n        $('.got-updates').removeClass('got-updates')\n        _.each(data, function(val, brd) {\n          if ((+val) > 0) {\n            let valstr = `<span class=\"newposts-counter\"> (${val})</span>`\n            , $brd = $(`.menu-item[href=\"/${brd}/\"]`)\n            if ($brd.length) {\n              $brd.append(valstr)\n              $(`.sect-exr[data-toexpand=\"${$brd.parents('.menu-sect').attr('id').split('ms-')[1]}\"]`).parent().addClass('got-updates')\n            }\n            $(`.mobile-nav option[value=\"${brd}\"]`).append(valstr)\n          }\n        })\n      }\n    });\n  }\n}\n\nvar HTMLoader = {\n  loadThread: function(boardID, threadID, done, postID) {\n    $.get(threadID === '?'\n      ? `${ku_boardspath}/postbynumber.php?b=${boardID}&p=${postID}`\n      : `${ku_boardspath}/${boardID}/res/${threadID}.html?${force_html_nocache ? Math.random() : ''}`)\n    .then(data => {\n      let posts = data.match(/<div\\s*?class\\s*?=\\s*?\"[^\"]*?i0svcel[^\"]*?\"\\s*?>!i0-pd:[0-9]+\\s*?<\\/div\\s*?>[\\s\\S]+?<div\\s*?class\\s*?=\\s*?\"[^\"]*?i0svcel[^\"]*?\"\\s*?>!i0-pd-end\\s*?<\\/div\\s*?>/gi)\n      .map(match => {\n      \tlet res = match.match(/<div\\s*?class\\s*?=\\s*?\"[^\"]*?i0svcel[^\"]*?\"\\s*?>!i0-pd:([0-9]+)\\s*?<\\/div\\s*?>([\\s\\S]+?)<div\\s*?class\\s*?=\\s*?\"[^\"]*?i0svcel[^\"]*?\"\\s*?>!i0-pd-end\\s*?<\\/div\\s*?>/i);\n      \treturn {\n      \t\tid: +res[1],\n      \t\tbody: res[2]\n      \t}\n      })\n      if (threadID === '?') {\n      \tlet thrno = data.match(/<!--i0:thrno=([0-9]+)-->/) //wtf\n      \tif (thrno)\n      \t\tthreadID = thrno[1]\n      }\n      if (posts.length) {\n      \tlet postMap = posts.map(post => {\n      \t\tthis.cached[`${boardID}_${post.id}`] = post.body\n      \t\treturn post.id\n      \t})\n      \tif (threadID !== '?') {\n      \t  this.threadMaps[`${boardID}_${threadID}`] = postMap\n      \t}\n      }\n      done()\n    })\n    .fail(err => {\n      done(err.status || 'null')\n    })\n  },\n  getPost: function(boardID, threadID, postID, callback, secondTry) {\n    let cachedPost = this.cached[`${boardID}_${postID}`]\n    if (cachedPost) {\n      callback(false, cachedPost)\n      return\n    }\n    else {\n      if (!secondTry) {\n        let found = false\n        if (boardID === this_board_dir) {\n          let $post = $(`a[name=${postID}]`)\n          if ($post.length) {\n            let post = $post.parents('.postnode')[0].outerHTML\n            this.cached[`${boardID}_${postID}`] = post\n            found = true\n            callback(false, post)\n          }\n        }\n        if (!found) {\n          this.loadThread(boardID, threadID, err => {\n            if (err) {\n              callback(err)\n            }\n            else {\n              this.getPost(boardID, threadID, postID, callback, true)\n            }\n          }, postID)\n        }\n      }\n      else {\n        callback(null)\n      }\n    }\n  },\n  getThread: function(boardID, threadID, range, callback, secondTry, force) {\n    let threadMap = force ? false : this.threadMaps[`${boardID}_${threadID}`]\n    if (threadMap) {\n      if (range) {\n        threadMap = threadMap.filter(n => n > range[0] && n < range[1])\n      }\n      callback(false, threadMap.reduce((htm, postID) => htm + this.cached[`${boardID}_${postID}`], ''))\n    }\n    else {\n      if (!secondTry) {\n        this.loadThread(boardID, threadID, err => {\n          if (err) {\n            callback(err)\n          }\n          else {\n            this.getThread(boardID, threadID, range, callback, true)\n          }\n        })\n      }\n      else {\n        callback(null)\n      }\n    }\n  },\n  cached: {},\n  threadMaps: {}\n}\n\nfunction switchFileType(el) {\n  let exp = /\\.([a-z0-9]+)(?=$|\\?)/i\n  , match = el.src.match(exp)\n  if (!match) return;\n  let exts = el.getAttribute('extset').toLowerCase().split(',')\n  if (!exts.length) return;\n  let i = exts.indexOf(match[1].toLowerCase())\n  if (i == -1 || i >= (exts.length-1)) return;\n  el.src = el.src.replace(exp, `.${exts[i+1]}`)\n}\n\nfunction LSfetchJSON(key) {\n  let val = null, data = localStorage[key]\n  if (typeof data !== 'undefined') {\n    try {\n      val = JSON.parse(data)\n    }\n    catch(e) {\n      console.error(e)\n      localStorage.removeItem(key)\n    }\n  }\n  return val\n}\n\n// YOBA alerts\nvar pups = {\n  push: function(a) {\n    // generate a unique alert ID\n    a.id = (+_.uniqueId(_.now())).toString(16)\n    this.container.insertAdjacentHTML('afterBegin', this.buildAlert(a))\n    a.el = document.getElementById(`pup_${a.id}`)\n    // Add the popup to the animation queue\n    a.el.style.marginTop = -a.el.getBoundingClientRect().height + 'px'\n    a.el.getBoundingClientRect() // This forces browser to respect the element's updated position for future animations (no idea why but it works)\n    // Close on click\n    a.el.onclick = () => {\n      delete a.timeout\n      a.onHold = false\n      a.old = true\n      a.el.classList.add('pup-away')\n      a.el.style.marginTop = -a.el.getBoundingClientRect().height + 'px'\n    }\n    // Do not close if mouse is over\n    a.el.onmouseenter = () => {\n      // iterate stack from end to start\n      this.stack.slice(0).reverse().find(ar => {\n        ar.onHold = true\n        return (ar.id == a.id) // break\n      })\n    }\n    // Close after mouse leave\n    a.el.onmouseleave = () => {\n      this.stack.forEach(ae => {\n        ae.onHold = false\n      })\n      this.holdOffTimeout = setTimeout(() => {\n        this.stack.forEach(ae => {\n          if (!ae.onHold && ae.old && ae.el) {\n            ae.el.classList.add('pup-away')\n            ae.el.style.marginTop = -a.el.getBoundingClientRect().height + 'px'\n          }\n        })\n      }, 200)\n    }\n    this.queue.add(() => {\n      this.scheduleClose(a)\n      a.el.classList.remove('pup-pre')\n      a.el.style.marginTop = null\n      a.el.classList.remove('pup-noshadow')\n    })\n    this.stack.push(a)\n    this.save()\n    return a.id\n  },\n  closeByID: function(aid) {\n    let a = this.byID(aid)\n    if (a)\n      a.el.onclick()\n  },\n  queue: {\n    stack: [],\n    busy: false,\n    add: function(fn) {\n      return new Promise((resolve, reject) => {\n        if (! this.busy) {\n          this.timeout = setTimeout(this.next.bind(this), this.cooldown * 1000)\n          this.busy = true\n          resolve(fn())\n        }\n        else {\n          this.stack.push(() => resolve(fn()))\n        }\n      })\n    },\n    next: function() {\n      let next = this.stack.shift()\n      if (! next)\n        this.busy = false\n      else {\n        next()\n        this.timeout = setTimeout(this.next.bind(this), this.cooldown * 1000)\n      }\n    },\n    cooldown: .3\n  },\n  byID: function(aid) {\n    return this.stack.find(a => a.id == aid)\n  },\n  update: function(aid, upd) {\n    let a = this.byID(aid)\n    if (typeof upd !== 'object')\n      a = {msg: upd}\n    _.extend(a, upd)\n    // reset timeout\n    this.scheduleClose(a)\n    a.el.setAttribute('pupclass', a.cls)\n    a.el.querySelector('.pup-wrapped').innerHTML = this.buildAlert(a, 1)\n    this.save()\n  },\n  buildAlert: function(a, contentsOnly=false) {\n    let contents = `\n      <div class=\"alert-icon\">\n        <svg class=\"icon\"><use xlink:href=\"#i-${this.iconMap[a.cls]}\"></use></svg>\n      </div>\n      <div class=\"alert-msg\">${a.msg}</div>`\n    if (contentsOnly)\n      return contents\n    return `<div class=\"pup ${a.old ? 'pup-away pup-away-full' : 'pup-pre pup-noshadow'}\" pupclass=\"${a.cls}\" id=\"pup_${a.id}\">\n      <div class=\"pup-wrapped\">\n        ${contents}\n      </div>\n    </div>`\n  },\n  iconMap: {\n    succ: 'success',\n    err: 'error',\n    info: 'info',\n    warn: 'warning'\n  },\n  historyToggle: function() {\n    if (!this.stack.length) {\n      this.push({cls: 'info', msg: _l.historyEmpty, destroy: true})\n      return\n    }\n    let on = this.container.classList.toggle('history-mode')\n    setTimeout(() => this.container.style.overflow = (on ? 'auto' : null), on ? 300 : 0)\n  },\n  scheduleClose: function(a) {\n    if (a.timeout)\n      clearTimeout(a.timeout)\n    if (a.onHold)\n      a.onHold = false\n    let time = (a.time || a.time === 0) ? a.time : this.defaultTimeout\n    if (time) // If time is 0 it means no timeout\n      a.timeout = setTimeout(() => {\n        a.old = true\n        if (! a.onHold) {\n          a.el.classList.add('pup-away')\n          a.el.style.marginTop = -a.el.getBoundingClientRect().height + 'px'\n        }\n      }, time * 1000)\n  },\n  defaultTimeout: 3.5, // in seconds\n  init: function(container_id=\"pups-container\") {\n    document.body.insertAdjacentHTML('beforeEnd', `<div id=\"${container_id}\"><div class=\"pup-history-shadow\"></div></div>`)\n    this.container = document.getElementById(container_id)\n    if (! this.container) {\n      console.error('No popup container found')\n      return;\n    }\n    this.container.onclick = () => {\n      if (this.container.classList.contains('history-mode')) {\n        return this.historyToggle()\n      }\n    }\n    // make aliases for error classes\n    ['err', 'warn', 'info', 'succ', 'wait'].forEach(pupclass => {\n      this[pupclass] = function(a, options={}) {\n        if (typeof a !== 'object')\n          a = {msg: a}\n        a.cls = pupclass\n        _.extend(a, options)\n        return this.push(a)\n      }\n    })\n    // load history from LS\n    let log = LSfetchJSON('I0_event_log') || []\n    log.forEach(a => {\n      a.old = true\n      this.container.insertAdjacentHTML('afterBegin', this.buildAlert(a))\n      this.stack.push(a)\n    })\n  },\n  historySize: 10,\n  save: function() {\n    let ss = [] \n    _.cloneDeep(this.stack).forEach(a => {\n      if (a.save) {\n        // Clear stack from the properties that don't need to be saved\n        ['old', 'onHold', 'timeout', 'el', 'save'].forEach(junkProperty => delete a[junkProperty])\n        ss.push(a)\n      }\n    })\n    while (ss.length > this.historySize) {\n      ss.shift()\n    }\n    localStorage['I0_event_log'] = JSON.stringify(ss)\n  },\n  stack: []\n}"]}